Started GET "/" for 127.0.0.1 at 2020-11-09 14:27:19 +0300
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  
ActiveRecord::PendingMigrationError (

Migrations are pending. To resolve this issue, run:

        rails db:migrate RAILS_ENV=development

):
  
activerecord (6.0.3.4) lib/active_record/migration.rb:586:in `check_pending!'
activerecord (6.0.3.4) lib/active_record/migration.rb:564:in `call'
actionpack (6.0.3.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.4) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.4) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.4) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.4) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.0.4) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.0.4) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `catch'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.4) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.4) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.4) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.4) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.4) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.4) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.4) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.4) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.4) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.4) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.4) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.4) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.4) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.4) lib/rails/engine.rb:527:in `call'
puma (4.3.6) lib/puma/configuration.rb:228:in `call'
puma (4.3.6) lib/puma/server.rb:713:in `handle_request'
puma (4.3.6) lib/puma/server.rb:472:in `process_client'
puma (4.3.6) lib/puma/server.rb:328:in `block in run'
puma (4.3.6) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started POST "/rails/actions" for 127.0.0.1 at 2020-11-09 14:27:26 +0300
  [1m[35m (1.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4489605530800437810)[0m
  [1m[35m (4.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20201023085922)
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (24.7ms)[0m  [1m[35mDROP TABLE "users"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (6.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(4489605530800437810)[0m
  
StandardError (An error has occurred, this and all later migrations canceled:

PG::DependentObjectsStillExist: –û–®–ò–ë–ö–ê:  —É–¥–∞–ª–∏—Ç—å –æ–±—ä–µ–∫—Ç —Ç–∞–±–ª–∏—Ü–∞ users –Ω–µ–ª—å–∑—è, —Ç–∞–∫ –∫–∞–∫ –æ—Ç –Ω–µ–≥–æ –∑–∞–≤–∏—Å—è—Ç –¥—Ä—É–≥–∏–µ –æ–±—ä–µ–∫—Ç—ã
DETAIL:  –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ fk_rails_4e2c355ec6 –≤ –æ—Ç–Ω–æ—à–µ–Ω–∏–∏ —Ç–∞–±–ª–∏—Ü–∞ users_history_records –∑–∞–≤–∏—Å–∏—Ç –æ—Ç –æ–±—ä–µ–∫—Ç–∞ —Ç–∞–±–ª–∏—Ü–∞ users
HINT:  –î–ª—è —É–¥–∞–ª–µ–Ω–∏—è –∑–∞–≤–∏—Å–∏–º—ã—Ö –æ–±—ä–µ–∫—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ DROP ... CASCADE.
):
  
activerecord (6.0.3.4) lib/active_record/connection_adapters/postgresql/database_statements.rb:92:in `exec'
activerecord (6.0.3.4) lib/active_record/connection_adapters/postgresql/database_statements.rb:92:in `block (2 levels) in execute'
activesupport (6.0.3.4) lib/active_support/dependencies/interlock.rb:48:in `block in permit_concurrent_loads'
activesupport (6.0.3.4) lib/active_support/concurrency/share_lock.rb:187:in `yield_shares'
activesupport (6.0.3.4) lib/active_support/dependencies/interlock.rb:47:in `permit_concurrent_loads'
activerecord (6.0.3.4) lib/active_record/connection_adapters/postgresql/database_statements.rb:91:in `block in execute'
activerecord (6.0.3.4) lib/active_record/connection_adapters/abstract_adapter.rb:722:in `block (2 levels) in log'
activesupport (6.0.3.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
activesupport (6.0.3.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
activesupport (6.0.3.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
activesupport (6.0.3.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
activesupport (6.0.3.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
activerecord (6.0.3.4) lib/active_record/connection_adapters/abstract_adapter.rb:721:in `block in log'
activesupport (6.0.3.4) lib/active_support/notifications/instrumenter.rb:24:in `instrument'
activerecord (6.0.3.4) lib/active_record/connection_adapters/abstract_adapter.rb:712:in `log'
activerecord (6.0.3.4) lib/active_record/connection_adapters/postgresql/database_statements.rb:90:in `execute'
activerecord (6.0.3.4) lib/active_record/connection_adapters/postgresql/schema_statements.rb:58:in `drop_table'
activerecord (6.0.3.4) lib/active_record/migration.rb:890:in `block in method_missing'
activerecord (6.0.3.4) lib/active_record/migration.rb:858:in `block in say_with_time'
/usr/lib/ruby/2.7.0/benchmark.rb:293:in `measure'
activerecord (6.0.3.4) lib/active_record/migration.rb:858:in `say_with_time'
activerecord (6.0.3.4) lib/active_record/migration.rb:879:in `method_missing'
db/migrate/20201023085922_create_users.rb:5:in `change'
activerecord (6.0.3.4) lib/active_record/migration.rb:828:in `exec_migration'
activerecord (6.0.3.4) lib/active_record/migration.rb:812:in `block (2 levels) in migrate'
/usr/lib/ruby/2.7.0/benchmark.rb:293:in `measure'
activerecord (6.0.3.4) lib/active_record/migration.rb:811:in `block in migrate'
activerecord (6.0.3.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:471:in `with_connection'
activerecord (6.0.3.4) lib/active_record/migration.rb:810:in `migrate'
activerecord (6.0.3.4) lib/active_record/migration.rb:1002:in `migrate'
activerecord (6.0.3.4) lib/active_record/migration.rb:1310:in `block in execute_migration_in_transaction'
activerecord (6.0.3.4) lib/active_record/migration.rb:1361:in `block in ddl_transaction'
activerecord (6.0.3.4) lib/active_record/connection_adapters/abstract/database_statements.rb:280:in `block in transaction'
activerecord (6.0.3.4) lib/active_record/connection_adapters/abstract/transaction.rb:280:in `block in within_new_transaction'
activesupport (6.0.3.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:26:in `block (2 levels) in synchronize'
activesupport (6.0.3.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `handle_interrupt'
activesupport (6.0.3.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:25:in `block in synchronize'
activesupport (6.0.3.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `handle_interrupt'
activesupport (6.0.3.4) lib/active_support/concurrency/load_interlock_aware_monitor.rb:21:in `synchronize'
activerecord (6.0.3.4) lib/active_record/connection_adapters/abstract/transaction.rb:278:in `within_new_transaction'
activerecord (6.0.3.4) lib/active_record/connection_adapters/abstract/database_statements.rb:280:in `transaction'
activerecord (6.0.3.4) lib/active_record/transactions.rb:212:in `transaction'
activerecord (6.0.3.4) lib/active_record/migration.rb:1361:in `ddl_transaction'
activerecord (6.0.3.4) lib/active_record/migration.rb:1309:in `execute_migration_in_transaction'
activerecord (6.0.3.4) lib/active_record/migration.rb:1281:in `block in migrate_without_lock'
activerecord (6.0.3.4) lib/active_record/migration.rb:1280:in `each'
activerecord (6.0.3.4) lib/active_record/migration.rb:1280:in `migrate_without_lock'
activerecord (6.0.3.4) lib/active_record/migration.rb:1229:in `block in migrate'
activerecord (6.0.3.4) lib/active_record/migration.rb:1382:in `with_advisory_lock'
activerecord (6.0.3.4) lib/active_record/migration.rb:1229:in `migrate'
activerecord (6.0.3.4) lib/active_record/migration.rb:1061:in `up'
activerecord (6.0.3.4) lib/active_record/migration.rb:1036:in `migrate'
activerecord (6.0.3.4) lib/active_record/tasks/database_tasks.rb:238:in `migrate'
activerecord (6.0.3.4) lib/active_record/migration.rb:135:in `block in <class:PendingMigrationError>'
activesupport (6.0.3.4) lib/active_support/actionable_error.rb:28:in `dispatch'
actionpack (6.0.3.4) lib/action_dispatch/middleware/actionable_exceptions.rb:20:in `call'
actionpack (6.0.3.4) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.0.4) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.0.4) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `catch'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.4) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.4) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.4) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.4) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.4) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.4) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.4) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.4) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.4) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.4) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.4) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.4) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.4) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.4) lib/rails/engine.rb:527:in `call'
puma (4.3.6) lib/puma/configuration.rb:228:in `call'
puma (4.3.6) lib/puma/server.rb:713:in `handle_request'
puma (4.3.6) lib/puma/server.rb:472:in `process_client'
puma (4.3.6) lib/puma/server.rb:328:in `block in run'
puma (4.3.6) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35mSQL (2.1ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (7.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "cash_machines" CASCADE[0m
  [1m[35m (25.9ms)[0m  [1m[35mCREATE TABLE "cash_machines" ("id" bigserial primary key, "cash_amount" float DEFAULT 100000.0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (6.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (20.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "current_balance" float DEFAULT 0.0 NOT NULL, "user_is_admin" boolean DEFAULT FALSE NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp)[0m
  [1m[35m (5.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (8.7ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35m (3.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "users_history_records" CASCADE[0m
  [1m[35m (18.0ms)[0m  [1m[35mCREATE TABLE "users_history_records" ("id" bigserial primary key, "operation_type" character varying NOT NULL, "amount" float NOT NULL, "balance_after" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint)[0m
  [1m[35m (6.5ms)[0m  [1m[35mALTER TABLE "users_history_records" ADD CONSTRAINT "fk_rails_4e2c355ec6"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Update (1.7ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = $1, "updated_at" = $2 WHERE "ar_internal_metadata"."key" = $3[0m  [["value", "de1dd7d89c9cc999567410958a508868fc8cdf59"], ["updated_at", "2020-11-09 11:33:08.332288"], ["key", "schema_sha1"]]
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35mSQL (1.1ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (11.0ms)[0m  [1m[35mDROP TABLE IF EXISTS "cash_machines" CASCADE[0m
  [1m[35m (12.5ms)[0m  [1m[35mCREATE TABLE "cash_machines" ("id" bigserial primary key, "cash_amount" float DEFAULT 100000.0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (9.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (24.8ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "current_balance" float DEFAULT 0.0 NOT NULL, "user_is_admin" boolean DEFAULT FALSE NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp)[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (5.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35m (3.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "users_history_records" CASCADE[0m
  [1m[35m (11.0ms)[0m  [1m[35mCREATE TABLE "users_history_records" ("id" bigserial primary key, "operation_type" character varying NOT NULL, "amount" float NOT NULL, "balance_after" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint)[0m
  [1m[35m (3.5ms)[0m  [1m[35mALTER TABLE "users_history_records" ADD CONSTRAINT "fk_rails_4e2c355ec6"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.9ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.8ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = $1, "updated_at" = $2 WHERE "ar_internal_metadata"."key" = $3[0m  [["value", "development"], ["updated_at", "2020-11-09 11:33:08.591309"], ["key", "environment"]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.8ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = $1, "updated_at" = $2 WHERE "ar_internal_metadata"."key" = $3[0m  [["value", "test"], ["updated_at", "2020-11-09 11:33:08.614421"], ["key", "environment"]]
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.7ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = $1, "updated_at" = $2 WHERE "ar_internal_metadata"."key" = $3[0m  [["value", "de1dd7d89c9cc999567410958a508868fc8cdf59"], ["updated_at", "2020-11-09 11:33:08.637521"], ["key", "schema_sha1"]]
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
Started GET "/" for 127.0.0.1 at 2020-11-09 14:34:01 +0300
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 990.1ms | Allocations: 35334)
[Webpacker] Compiling...
[Webpacker] Compiled all packs in /home/kali/ct/CuteBank/public/packs
[Webpacker] Hash: 15d1bb7b54cf6326b9ba
Version: webpack 4.44.2
Time: 15298ms
Built at: 09.11.2020 14:34:28
                                     Asset       Size       Chunks                         Chunk Names
    js/application-9afcbb5693aa87623e69.js    124 KiB  application  [emitted] [immutable]  application
js/application-9afcbb5693aa87623e69.js.map    139 KiB  application  [emitted] [dev]        application
                             manifest.json  364 bytes               [emitted]              
Entrypoint application = js/application-9afcbb5693aa87623e69.js js/application-9afcbb5693aa87623e69.js.map
[./app/javascript/channels sync recursive _channel\.js$] ./app/javascript/channels sync _channel\.js$ 160 bytes {application} [built]
[./app/javascript/channels/index.js] 211 bytes {application} [built]
[./app/javascript/packs/application.js] 749 bytes {application} [built]
[./node_modules/webpack/buildin/module.js] (webpack)/buildin/module.js 552 bytes {application} [built]
    + 3 hidden modules

Completed 200 OK in 26498ms (Views: 26421.8ms | ActiveRecord: 0.0ms | Allocations: 43287)


Started GET "/users/sign_up" for 127.0.0.1 at 2020-11-09 14:35:27 +0300
Processing by Devise::RegistrationsController#new as HTML
  Rendering devise/registrations/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 5.9ms | Allocations: 200)
  Rendered devise/registrations/new.html.erb within layouts/application (Duration: 76.2ms | Allocations: 4919)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 201ms (Views: 117.7ms | ActiveRecord: 46.7ms | Allocations: 14766)


Started GET "/" for 127.0.0.1 at 2020-11-09 14:35:38 +0300
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 19.4ms | Allocations: 1323)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 64ms (Views: 56.5ms | ActiveRecord: 0.0ms | Allocations: 3976)


Started GET "/" for 127.0.0.1 at 2020-11-09 14:35:49 +0300
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 23.5ms | Allocations: 1314)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 91ms (Views: 86.0ms | ActiveRecord: 0.0ms | Allocations: 3965)


Started GET "/users/sign_up" for 127.0.0.1 at 2020-11-09 14:35:53 +0300
Processing by Devise::RegistrationsController#new as HTML
  Rendering devise/registrations/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.1ms | Allocations: 15)
  Rendered devise/registrations/new.html.erb within layouts/application (Duration: 43.2ms | Allocations: 1670)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 135ms (Views: 113.2ms | ActiveRecord: 0.0ms | Allocations: 4507)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-11-09 14:35:56 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.1ms | Allocations: 15)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 25.5ms | Allocations: 1941)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 103ms (Views: 72.0ms | ActiveRecord: 0.0ms | Allocations: 5933)


Started GET "/" for 127.0.0.1 at 2020-11-09 14:35:59 +0300
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 24.1ms | Allocations: 1318)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 134ms (Views: 132.7ms | ActiveRecord: 0.0ms | Allocations: 3978)


Started GET "/users/sign_up" for 127.0.0.1 at 2020-11-09 14:39:41 +0300
Processing by Devise::RegistrationsController#new as HTML
  Rendering devise/registrations/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.1ms | Allocations: 15)
  Rendered devise/registrations/new.html.erb within layouts/application (Duration: 36.7ms | Allocations: 1671)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 133ms (Views: 115.3ms | ActiveRecord: 0.0ms | Allocations: 4499)


Started POST "/users" for 127.0.0.1 at 2020-11-09 14:40:30 +0300
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"authenticity_token"=>"jKh2aAgJ/reBOZuRCTOeZveItVXXuEB1XRkdcXEZOfMk1q04LpgDHKHsnG9edsYGKSX5CxATtIqvgjvAt9FxmQ==", "user"=>{"email"=>"mokraya@suka.xxx", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Become a client"}
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "mokraya@suka.xxx"], ["LIMIT", 1]]
  [1m[35m (1.8ms)[0m  [1m[31mROLLBACK[0m
  Rendering devise/registrations/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 7.1ms | Allocations: 221)
  Rendered devise/registrations/new.html.erb within layouts/application (Duration: 17.8ms | Allocations: 1882)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 777ms (Views: 33.0ms | ActiveRecord: 3.6ms | Allocations: 18073)


Started POST "/users" for 127.0.0.1 at 2020-11-09 14:40:47 +0300
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"authenticity_token"=>"gBeFvqcPsJGCYxSMGCtQLBCSsfWCFd2mPDIXkA2FRQdajN8pehbYb50yb301Ex64ZqaTJ5XH01TLngybBfVEVQ==", "user"=>{"email"=>"mokraya@suka.xxx", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Become a client"}
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.7ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "mokraya@suka.xxx"], ["LIMIT", 1]]
  [1m[36mUser Create (6.4ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "email", "encrypted_password") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2020-11-09 11:40:48.344376"], ["updated_at", "2020-11-09 11:40:48.344376"], ["email", "mokraya@suka.xxx"], ["encrypted_password", "$2a$12$Lt6Rq/X3g5v8qqqkxPq5EecWZW90UiEVyovmHkiNsfBuVj4Bbluxa"]]
  [1m[35m (2.1ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/user
Completed 302 Found in 664ms (ActiveRecord: 9.6ms | Allocations: 7380)


Started GET "/user" for 127.0.0.1 at 2020-11-09 14:40:48 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.6ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 1]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 114.3ms | Allocations: 5438)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 447ms (Views: 172.6ms | ActiveRecord: 8.2ms | Allocations: 16592)


Started POST "/user" for 127.0.0.1 at 2020-11-09 14:42:14 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"FE8vqx3ovF/WiJvrtVUCq7zDwXXtY5wJkmm5eFiJtWzO1HU8wPHUocnZ4BqYbUw/yvfjp/qxkvtlxaJzUPm0Pg==", "user"=>{"current_balance"=>"0.0"}, "commit"=>"Deposit"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:28:in `deposit'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (1.8ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 1]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 77.1ms | Allocations: 2350)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 207ms (Views: 140.7ms | ActiveRecord: 5.1ms | Allocations: 7876)


Started POST "/user" for 127.0.0.1 at 2020-11-09 14:42:24 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"frDnZu6GpDe8Z+i9NjywXstzuwgkUJy64ZNQ6gn1uVekK73xM5/MyaM2k0wbBP7KvUeZ2jOCkkgWP0vhAYW4BQ==", "user"=>{"current_balance"=>"10.0"}, "commit"=>"Deposit"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (5.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:28:in `deposit'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "current_balance" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["current_balance", 10.0], ["updated_at", "2020-11-09 11:42:24.447559"], ["id", 1]]
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[35m (5.2ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mCashMachine Load (6.2ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:7:in `add_cash'
Completed 404 Not Found in 277ms (ActiveRecord: 77.2ms | Allocations: 11264)


  
ActiveRecord::RecordNotFound (Couldn't find CashMachine with 'id'=1):
  
app/models/cash_machine.rb:7:in `add_cash'
app/controllers/user_controller.rb:31:in `deposit'
app/controllers/user_controller.rb:65:in `choose_action'
app/controllers/user_controller.rb:19:in `create'
Started POST "/user" for 127.0.0.1 at 2020-11-09 14:42:33 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"frDnZu6GpDe8Z+i9NjywXstzuwgkUJy64ZNQ6gn1uVekK73xM5/MyaM2k0wbBP7KvUeZ2jOCkkgWP0vhAYW4BQ==", "user"=>{"current_balance"=>"10.0"}, "commit"=>"Deposit"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:28:in `deposit'
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "current_balance" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["current_balance", 20.0], ["updated_at", "2020-11-09 11:42:33.297881"], ["id", 1]]
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[35m (2.8ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mCashMachine Load (1.5ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:7:in `add_cash'
Completed 404 Not Found in 109ms (ActiveRecord: 8.6ms | Allocations: 6370)


  
ActiveRecord::RecordNotFound (Couldn't find CashMachine with 'id'=1):
  
app/models/cash_machine.rb:7:in `add_cash'
app/controllers/user_controller.rb:31:in `deposit'
app/controllers/user_controller.rb:65:in `choose_action'
app/controllers/user_controller.rb:19:in `create'
Started POST "/user" for 127.0.0.1 at 2020-11-09 14:42:43 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"frDnZu6GpDe8Z+i9NjywXstzuwgkUJy64ZNQ6gn1uVekK73xM5/MyaM2k0wbBP7KvUeZ2jOCkkgWP0vhAYW4BQ==", "user"=>{"current_balance"=>""}, "commit"=>"Deposit"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (5.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:28:in `deposit'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (13.4ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 1]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 35.4ms | Allocations: 2381)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 107ms (Views: 39.7ms | ActiveRecord: 20.7ms | Allocations: 7738)


Started POST "/user" for 127.0.0.1 at 2020-11-09 14:42:54 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"aUx0WLklZAcNrbaisb259dbR+oroFk31pB7mDNeHXMqz1y7PZDwM+RL8zVOchfdhoOXYWP/EQwdTsv0H3/ddmA==", "user"=>{"current_balance"=>"0"}, "commit"=>"Withdraw"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:42:in `withdraw'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (1.3ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 1]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 30.9ms | Allocations: 2328)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 81ms (Views: 43.4ms | ActiveRecord: 2.7ms | Allocations: 7678)


Started POST "/user" for 127.0.0.1 at 2020-11-09 14:42:57 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"wHvC0qgXuAhCjt5r+eIP1km+YfKPvAnh7aVRTvoPHK8a4JhFdQ7Q9l3fpZrU2kFCP4pDIJhuBxMaCUpF8n8d/Q==", "user"=>{"current_balance"=>"20.0"}, "commit"=>"Withdraw"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:42:in `withdraw'
  [1m[36mCashMachine Load (0.6ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:16:in `cash_available?'
Completed 404 Not Found in 81ms (ActiveRecord: 3.9ms | Allocations: 3894)


  
ActiveRecord::RecordNotFound (Couldn't find CashMachine with 'id'=1):
  
app/models/cash_machine.rb:16:in `cash_available?'
app/models/user.rb:25:in `withdraw'
app/controllers/user_controller.rb:44:in `withdraw'
app/controllers/user_controller.rb:63:in `choose_action'
app/controllers/user_controller.rb:19:in `create'
Started POST "/user" for 127.0.0.1 at 2020-11-09 14:43:18 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"wHvC0qgXuAhCjt5r+eIP1km+YfKPvAnh7aVRTvoPHK8a4JhFdQ7Q9l3fpZrU2kFCP4pDIJhuBxMaCUpF8n8d/Q==", "user"=>{"current_balance"=>"5.0"}, "commit"=>"Withdraw"}
  [1m[36mUser Load (18.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (5.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:42:in `withdraw'
  [1m[36mCashMachine Load (0.7ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:16:in `cash_available?'
Completed 404 Not Found in 122ms (ActiveRecord: 24.8ms | Allocations: 3894)


  
ActiveRecord::RecordNotFound (Couldn't find CashMachine with 'id'=1):
  
app/models/cash_machine.rb:16:in `cash_available?'
app/models/user.rb:25:in `withdraw'
app/controllers/user_controller.rb:44:in `withdraw'
app/controllers/user_controller.rb:63:in `choose_action'
app/controllers/user_controller.rb:19:in `create'
Started GET "/user" for 127.0.0.1 at 2020-11-09 14:43:25 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.4ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 1]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 29.2ms | Allocations: 2219)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 83ms (Views: 46.5ms | ActiveRecord: 2.1ms | Allocations: 7054)


Started POST "/user" for 127.0.0.1 at 2020-11-09 14:43:29 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"SCAUmUYkZUYmR6XFclbPNSO9h9XsUEMC1TBbMJxqrqKSu04Omz0NuDkW3jRfboGhVYmlB/uCTfAinEA7lBqv8A==", "user"=>{"current_balance"=>"5.0"}, "commit"=>"Deposit"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:28:in `deposit'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "current_balance" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["current_balance", 25.0], ["updated_at", "2020-11-09 11:43:29.256562"], ["id", 1]]
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[35m (50.5ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mCashMachine Load (1.2ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:7:in `add_cash'
Completed 404 Not Found in 155ms (ActiveRecord: 53.8ms | Allocations: 6275)


  
ActiveRecord::RecordNotFound (Couldn't find CashMachine with 'id'=1):
  
app/models/cash_machine.rb:7:in `add_cash'
app/controllers/user_controller.rb:31:in `deposit'
app/controllers/user_controller.rb:65:in `choose_action'
app/controllers/user_controller.rb:19:in `create'
Started POST "/user" for 127.0.0.1 at 2020-11-09 14:44:49 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"SCAUmUYkZUYmR6XFclbPNSO9h9XsUEMC1TBbMJxqrqKSu04Omz0NuDkW3jRfboGhVYmlB/uCTfAinEA7lBqv8A==", "user"=>{"current_balance"=>"5.0"}, "commit"=>"Withdraw"}
  [1m[36mUser Load (10.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:42:in `withdraw'
  [1m[36mCashMachine Load (1.1ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:16:in `cash_available?'
Completed 404 Not Found in 78ms (ActiveRecord: 13.4ms | Allocations: 3875)


  
ActiveRecord::RecordNotFound (Couldn't find CashMachine with 'id'=1):
  
app/models/cash_machine.rb:16:in `cash_available?'
app/models/user.rb:25:in `withdraw'
app/controllers/user_controller.rb:44:in `withdraw'
app/controllers/user_controller.rb:63:in `choose_action'
app/controllers/user_controller.rb:19:in `create'
Started POST "/user" for 127.0.0.1 at 2020-11-09 14:45:33 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"SCAUmUYkZUYmR6XFclbPNSO9h9XsUEMC1TBbMJxqrqKSu04Omz0NuDkW3jRfboGhVYmlB/uCTfAinEA7lBqv8A==", "user"=>{"current_balance"=>"5.0"}, "commit"=>"Deposit"}
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (18.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:28:in `deposit'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mUser Update (1.8ms)[0m  [1m[33mUPDATE "users" SET "current_balance" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["current_balance", 30.0], ["updated_at", "2020-11-09 11:45:33.703760"], ["id", 1]]
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mCashMachine Load (0.4ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:7:in `add_cash'
Completed 404 Not Found in 207ms (ActiveRecord: 24.9ms | Allocations: 6269)


  
ActiveRecord::RecordNotFound (Couldn't find CashMachine with 'id'=1):
  
app/models/cash_machine.rb:7:in `add_cash'
app/controllers/user_controller.rb:31:in `deposit'
app/controllers/user_controller.rb:65:in `choose_action'
app/controllers/user_controller.rb:19:in `create'
Started GET "/user" for 127.0.0.1 at 2020-11-09 14:47:11 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (8.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (4.2ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 1]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 17.4ms | Allocations: 2218)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 86ms (Views: 46.2ms | ActiveRecord: 13.1ms | Allocations: 7031)


Started POST "/user" for 127.0.0.1 at 2020-11-09 14:47:19 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"wF+k6+dsiITRLDMkeeYBQv421tqGarOeNCQkxo/RB7oaxP58OnXges59SNVU3k/WiAL0CJG4vWzDiD/Nh6EG6A==", "user"=>{"current_balance"=>"5.0"}, "commit"=>"Deposit"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:28:in `deposit'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "current_balance" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["current_balance", 35.0], ["updated_at", "2020-11-09 11:47:19.930393"], ["id", 1]]
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mCashMachine Load (0.7ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:7:in `add_cash'
Completed 404 Not Found in 152ms (ActiveRecord: 15.7ms | Allocations: 6461)


  
ActiveRecord::RecordNotFound (Couldn't find CashMachine with 'id'=1):
  
app/models/cash_machine.rb:7:in `add_cash'
app/controllers/user_controller.rb:31:in `deposit'
app/controllers/user_controller.rb:65:in `choose_action'
app/controllers/user_controller.rb:19:in `create'
Started POST "/user" for 127.0.0.1 at 2020-11-09 14:47:25 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"wF+k6+dsiITRLDMkeeYBQv421tqGarOeNCQkxo/RB7oaxP58OnXges59SNVU3k/WiAL0CJG4vWzDiD/Nh6EG6A==", "user"=>{"current_balance"=>"5.0"}, "commit"=>"Deposit"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:28:in `deposit'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mUser Update (1.9ms)[0m  [1m[33mUPDATE "users" SET "current_balance" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["current_balance", 40.0], ["updated_at", "2020-11-09 11:47:25.261396"], ["id", 1]]
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mCashMachine Load (0.5ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:7:in `add_cash'
Completed 404 Not Found in 132ms (ActiveRecord: 5.5ms | Allocations: 6279)


  
ActiveRecord::RecordNotFound (Couldn't find CashMachine with 'id'=1):
  
app/models/cash_machine.rb:7:in `add_cash'
app/controllers/user_controller.rb:31:in `deposit'
app/controllers/user_controller.rb:65:in `choose_action'
app/controllers/user_controller.rb:19:in `create'
Started GET "/" for 127.0.0.1 at 2020-11-09 14:47:30 +0300
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 16.1ms | Allocations: 1324)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mUser Load (5.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/views/layouts/application.html.erb:12
Completed 200 OK in 60ms (Views: 48.0ms | ActiveRecord: 5.3ms | Allocations: 4882)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-11-09 14:47:33 +0300
Processing by Devise::SessionsController#new as HTML
  [1m[36mUser Load (14.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Redirected to http://127.0.0.1:3000/user
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 70ms (ActiveRecord: 14.6ms | Allocations: 1877)


Started GET "/user" for 127.0.0.1 at 2020-11-09 14:47:33 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.5ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 1]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 61.8ms | Allocations: 2215)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 117ms (Views: 84.0ms | ActiveRecord: 2.4ms | Allocations: 7034)


Started POST "/user" for 127.0.0.1 at 2020-11-09 14:48:27 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"PzkEH9g3/iNEMKAjhwInJIbXfWxB8Oh61eE/0dkPa5FTd5QfObORLPhpOX2Cv2r5QLsa53T6n2aDHjIgfsQYxA==", "user"=>{"current_balance"=>"40.0"}, "commit"=>"Withdraw"}
  [1m[36mUser Load (7.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (4.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:42:in `withdraw'
  [1m[36mCashMachine Load (2.2ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:16:in `cash_available?'
Completed 404 Not Found in 145ms (ActiveRecord: 14.2ms | Allocations: 3904)


  
ActiveRecord::RecordNotFound (Couldn't find CashMachine with 'id'=1):
  
app/models/cash_machine.rb:16:in `cash_available?'
app/models/user.rb:25:in `withdraw'
app/controllers/user_controller.rb:44:in `withdraw'
app/controllers/user_controller.rb:63:in `choose_action'
app/controllers/user_controller.rb:19:in `create'
Started GET "/user" for 127.0.0.1 at 2020-11-09 14:48:31 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (10.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (1.7ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 1]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 35.0ms | Allocations: 2218)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 93ms (Views: 46.5ms | ActiveRecord: 13.5ms | Allocations: 7031)


Started POST "/user" for 127.0.0.1 at 2020-11-09 14:48:40 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"fbO5IFu9G6YBdU+VocyfdgCMSpEzV2Y5oyUO6exsOnunKOO3hqRzWB4kNGSM9NHidrhoQySFaMtUiRXi5Bw7KQ==", "user"=>{"current_balance"=>"10.0"}, "commit"=>"Withdraw"}
  [1m[36mUser Load (1.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:42:in `withdraw'
  [1m[36mCashMachine Load (0.4ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:16:in `cash_available?'
Completed 404 Not Found in 64ms (ActiveRecord: 2.8ms | Allocations: 3874)


  
ActiveRecord::RecordNotFound (Couldn't find CashMachine with 'id'=1):
  
app/models/cash_machine.rb:16:in `cash_available?'
app/models/user.rb:25:in `withdraw'
app/controllers/user_controller.rb:44:in `withdraw'
app/controllers/user_controller.rb:63:in `choose_action'
app/controllers/user_controller.rb:19:in `create'
Started POST "/user" for 127.0.0.1 at 2020-11-09 14:48:55 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"fbO5IFu9G6YBdU+VocyfdgCMSpEzV2Y5oyUO6exsOnunKOO3hqRzWB4kNGSM9NHidrhoQySFaMtUiRXi5Bw7KQ==", "user"=>{"current_balance"=>"10.0"}, "commit"=>"Withdraw"}
  [1m[36mUser Load (13.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:42:in `withdraw'
  [1m[36mCashMachine Load (1.3ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:16:in `cash_available?'
Completed 404 Not Found in 84ms (ActiveRecord: 14.8ms | Allocations: 3873)


  
ActiveRecord::RecordNotFound (Couldn't find CashMachine with 'id'=1):
  
app/models/cash_machine.rb:16:in `cash_available?'
app/models/user.rb:25:in `withdraw'
app/controllers/user_controller.rb:44:in `withdraw'
app/controllers/user_controller.rb:63:in `choose_action'
app/controllers/user_controller.rb:19:in `create'
Started GET "/user" for 127.0.0.1 at 2020-11-09 14:49:00 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.6ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 1]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 23.7ms | Allocations: 2218)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 113ms (Views: 74.7ms | ActiveRecord: 3.6ms | Allocations: 7029)


  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4489605530800437810)[0m
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddCash (20201109115808)
  [1m[35m (2.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCashMachine Create (1.9ms)[0m  [1m[32mINSERT INTO "cash_machines" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2020-11-09 12:00:12.612212"], ["updated_at", "2020-11-09 12:00:12.612212"]]
  [1m[36mprimary::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201109115808"]]
  [1m[35m (3.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(4489605530800437810)[0m
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/" for 127.0.0.1 at 2020-11-09 15:00:44 +0300
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 127.6ms | Allocations: 8010)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mUser Load (4.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/views/layouts/application.html.erb:12
Completed 200 OK in 357ms (Views: 285.9ms | ActiveRecord: 36.8ms | Allocations: 19720)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-11-09 15:00:48 +0300
Processing by Devise::SessionsController#new as HTML
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Redirected to http://127.0.0.1:3000/user
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 85ms (ActiveRecord: 3.0ms | Allocations: 3555)


Started GET "/user" for 127.0.0.1 at 2020-11-09 15:00:49 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (9.4ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 1]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 47.3ms | Allocations: 3708)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 138ms (Views: 60.1ms | ActiveRecord: 18.7ms | Allocations: 12316)


Started POST "/user" for 127.0.0.1 at 2020-11-09 15:00:52 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"V5s+h4dUFcTvy1BTJ3Ydg4pgYntXhG/Hth4fNLiQonw71a6HZtB6y1OSyQ0iy1BeTAwF8GKOGNvg4RLFH1vRKQ==", "user"=>{"current_balance"=>"40.0"}, "commit"=>"Deposit"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:28:in `deposit'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "current_balance" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["current_balance", 80.0], ["updated_at", "2020-11-09 12:00:52.395829"], ["id", 1]]
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[35m (7.3ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mCashMachine Load (0.6ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:7:in `add_cash'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[36mCashMachine Update (0.8ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 100040.0], ["updated_at", "2020-11-09 12:00:52.499317"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[35m (2.0ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
  [1m[36mUsersHistoryRecord Create (15.6ms)[0m  [1m[32mINSERT INTO "users_history_records" ("operation_type", "amount", "balance_after", "created_at", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["operation_type", "Deposit"], ["amount", 40.0], ["balance_after", 80.0], ["created_at", "2020-11-09 12:00:52.637906"], ["updated_at", "2020-11-09 12:00:52.637906"], ["user_id", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
Redirected to http://127.0.0.1:3000/user
Completed 302 Found in 412ms (ActiveRecord: 65.0ms | Allocations: 18279)


Started GET "/user" for 127.0.0.1 at 2020-11-09 15:00:52 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (2.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (9.6ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 1]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 114.7ms | Allocations: 2259)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 233ms (Views: 146.9ms | ActiveRecord: 14.9ms | Allocations: 7086)


Started POST "/user" for 127.0.0.1 at 2020-11-09 15:00:59 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"/u2fEKiBzdRVug9MD79rmQbdXaSML8NXtEMtozUFiywkdsWHdZilKkrrdL0ihyUNcOl/dpv9zaVD7zaoPXWKfg==", "user"=>{"current_balance"=>"60.0"}, "commit"=>"Withdraw"}
  [1m[36mUser Load (2.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:42:in `withdraw'
  [1m[36mCashMachine Load (0.8ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:16:in `cash_available?'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:24:in `cash_available?'
  [1m[36mCashMachine Update (1.2ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 99980.0], ["updated_at", "2020-11-09 12:00:59.433009"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:24:in `cash_available?'
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:24:in `cash_available?'
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/user.rb:27:in `withdraw'
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "current_balance" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["current_balance", 20.0], ["updated_at", "2020-11-09 12:00:59.479969"], ["id", 1]]
  ‚Ü≥ app/models/user.rb:27:in `withdraw'
  [1m[35m (1.6ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/user.rb:27:in `withdraw'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/controllers/user_controller.rb:47:in `withdraw'
  [1m[36mUsersHistoryRecord Create (1.4ms)[0m  [1m[32mINSERT INTO "users_history_records" ("operation_type", "amount", "balance_after", "created_at", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["operation_type", "Withdraw"], ["amount", 60.0], ["balance_after", 20.0], ["created_at", "2020-11-09 12:00:59.545828"], ["updated_at", "2020-11-09 12:00:59.545828"], ["user_id", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:47:in `withdraw'
  [1m[35m (1.1ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/controllers/user_controller.rb:47:in `withdraw'
Redirected to http://127.0.0.1:3000/user
Completed 302 Found in 231ms (ActiveRecord: 21.1ms | Allocations: 10918)


Started GET "/user" for 127.0.0.1 at 2020-11-09 15:00:59 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (5.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (4.8ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 1]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 21.4ms | Allocations: 2280)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 89ms (Views: 28.8ms | ActiveRecord: 11.7ms | Allocations: 7094)


Started GET "/users/sign_up" for 127.0.0.1 at 2020-11-09 15:01:02 +0300
Processing by Devise::RegistrationsController#new as HTML
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Redirected to http://127.0.0.1:3000/user
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 86ms (ActiveRecord: 28.3ms | Allocations: 2107)


Started GET "/user" for 127.0.0.1 at 2020-11-09 15:01:02 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (1.5ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 1]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 26.4ms | Allocations: 2283)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 96ms (Views: 50.7ms | ActiveRecord: 5.6ms | Allocations: 7116)


Started GET "/users/sign_up" for 127.0.0.1 at 2020-11-09 15:01:06 +0300
Processing by Devise::RegistrationsController#new as HTML
  [1m[36mUser Load (10.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Redirected to http://127.0.0.1:3000/user
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 92ms (ActiveRecord: 10.7ms | Allocations: 1870)


Started GET "/user" for 127.0.0.1 at 2020-11-09 15:01:06 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (10.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (18.5ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 1]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 49.3ms | Allocations: 2277)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 138ms (Views: 64.7ms | ActiveRecord: 29.9ms | Allocations: 7117)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-11-09 15:01:09 +0300
Processing by Devise::SessionsController#new as HTML
  [1m[36mUser Load (12.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Redirected to http://127.0.0.1:3000/user
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 96ms (ActiveRecord: 12.1ms | Allocations: 1850)


Started GET "/user" for 127.0.0.1 at 2020-11-09 15:01:09 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (6.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.9ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 1]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 48.1ms | Allocations: 2275)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 125ms (Views: 65.2ms | ActiveRecord: 8.0ms | Allocations: 7099)


Started GET "/" for 127.0.0.1 at 2020-11-09 15:02:27 +0300
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 22.2ms | Allocations: 1324)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mUser Load (12.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/views/layouts/application.html.erb:12
Completed 200 OK in 121ms (Views: 106.3ms | ActiveRecord: 12.8ms | Allocations: 4903)


Started GET "/users/sign_up" for 127.0.0.1 at 2020-11-09 15:02:30 +0300
Processing by Devise::RegistrationsController#new as HTML
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Redirected to http://127.0.0.1:3000/user
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 79ms (ActiveRecord: 15.5ms | Allocations: 2044)


Started GET "/user" for 127.0.0.1 at 2020-11-09 15:02:31 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mUser Load (6.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.6ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 1]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 32.6ms | Allocations: 2278)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 112ms (Views: 53.3ms | ActiveRecord: 8.1ms | Allocations: 7113)


Started GET "/" for 127.0.0.1 at 2020-11-13 21:51:39 +0300
  [1m[35m (3.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 258.2ms | Allocations: 8010)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 380ms (Views: 354.1ms | ActiveRecord: 0.0ms | Allocations: 12391)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-11-13 21:51:47 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 2.3ms | Allocations: 200)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 41.9ms | Allocations: 2819)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 181ms (Views: 61.4ms | ActiveRecord: 60.9ms | Allocations: 12820)


Started GET "/" for 127.0.0.1 at 2020-11-13 21:51:50 +0300
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 21.7ms | Allocations: 1320)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 99ms (Views: 94.9ms | ActiveRecord: 0.0ms | Allocations: 3981)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-11-13 21:51:51 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 5.0ms | Allocations: 15)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 59.4ms | Allocations: 1613)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 145ms (Views: 120.5ms | ActiveRecord: 0.0ms | Allocations: 4521)


Started POST "/users/sign_in" for 127.0.0.1 at 2020-11-13 21:52:02 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"NosvcOtCyi+dzhBK5yfCPt1MAJGutcqGi4l7xoQS+OnjPQUdwkmUHHei33deJR+jbM2S15yrtW9BAqXboAfXWg==", "user"=>{"email"=>"hk@fdgf", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  [1m[36mUser Load (5.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "hk@fdgf"], ["LIMIT", 1]]
Completed 401 Unauthorized in 98ms (ActiveRecord: 9.7ms | Allocations: 2573)


Processing by Devise::SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"NosvcOtCyi+dzhBK5yfCPt1MAJGutcqGi4l7xoQS+OnjPQUdwkmUHHei33deJR+jbM2S15yrtW9BAqXboAfXWg==", "user"=>{"email"=>"hk@fdgf", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.1ms | Allocations: 15)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 10.0ms | Allocations: 1613)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 625ms (Views: 28.5ms | ActiveRecord: 0.0ms | Allocations: 4934)


Started GET "/users/sign_up" for 127.0.0.1 at 2020-11-13 21:52:10 +0300
Processing by Devise::RegistrationsController#new as HTML
  Rendering devise/registrations/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.1ms | Allocations: 15)
  Rendered devise/registrations/new.html.erb within layouts/application (Duration: 20.1ms | Allocations: 2031)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 49ms (Views: 46.7ms | ActiveRecord: 0.0ms | Allocations: 5564)


Started POST "/users" for 127.0.0.1 at 2020-11-13 21:52:25 +0300
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"authenticity_token"=>"dfvHY30T0x3fCkLeoFJUCTPLt4xNiBcrLy77GB8Vw9QWFiVsFLKB6z9U+z7L+YeiBAhm5BqvVVD/VVh90QcQeQ==", "user"=>{"email"=>"mokraya@suka.xxx", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Become a client"}
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (3.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "mokraya@suka.xxx"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[31mROLLBACK[0m
  Rendering devise/registrations/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 1.6ms | Allocations: 347)
  Rendered devise/registrations/new.html.erb within layouts/application (Duration: 18.2ms | Allocations: 2000)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 640ms (Views: 34.0ms | ActiveRecord: 4.0ms | Allocations: 12691)


Started POST "/users" for 127.0.0.1 at 2020-11-13 21:52:48 +0300
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"authenticity_token"=>"4AEopaVEOXXwTEJ++wdbjQkErpGF3oGUt7IIln8wcC0r4HPH4V4fwFf4s7xt/iit5ydYxiaFZ1RZCFAsSpGvUA==", "user"=>{"email"=>"mokraya1@suka.xxx", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Become a client"}
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "mokraya1@suka.xxx"], ["LIMIT", 1]]
  [1m[36mUser Create (7.4ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "email", "encrypted_password") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2020-11-13 18:52:49.463853"], ["updated_at", "2020-11-13 18:52:49.463853"], ["email", "mokraya1@suka.xxx"], ["encrypted_password", "$2a$12$d1QD8qil.ZcU0ES56QqiDeKkTFlfu0L3/cajE7FcsPvXyzfI00UB6"]]
  [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/user
Completed 302 Found in 653ms (ActiveRecord: 15.6ms | Allocations: 7356)


Started GET "/user" for 127.0.0.1 at 2020-11-13 21:52:49 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (5.2ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 49.3ms | Allocations: 3570)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 135ms (Views: 59.6ms | ActiveRecord: 10.4ms | Allocations: 12027)


Started GET "/" for 127.0.0.1 at 2020-11-13 22:41:29 +0300
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 209.7ms | Allocations: 8015)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/views/layouts/application.html.erb:12
Completed 200 OK in 371ms (Views: 317.0ms | ActiveRecord: 18.7ms | Allocations: 19741)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-11-13 22:41:34 +0300
Processing by Devise::SessionsController#new as HTML
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Redirected to http://127.0.0.1:3000/user
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 101ms (ActiveRecord: 1.3ms | Allocations: 3551)


Started GET "/user" for 127.0.0.1 at 2020-11-13 22:41:34 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (8.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (4.7ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 106.8ms | Allocations: 3702)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 276ms (Views: 163.1ms | ActiveRecord: 23.4ms | Allocations: 12307)


Started GET "/" for 127.0.0.1 at 2020-11-13 22:44:12 +0300
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 142.0ms | Allocations: 8010)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/views/layouts/application.html.erb:12
Completed 200 OK in 319ms (Views: 273.2ms | ActiveRecord: 15.0ms | Allocations: 19713)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-11-13 22:44:17 +0300
Processing by Devise::SessionsController#new as HTML
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Redirected to http://127.0.0.1:3000/user
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 64ms (ActiveRecord: 11.7ms | Allocations: 3539)


Started GET "/user" for 127.0.0.1 at 2020-11-13 22:44:17 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.7ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 35.5ms | Allocations: 3703)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 122ms (Views: 50.7ms | ActiveRecord: 13.3ms | Allocations: 12320)


Started GET "/" for 127.0.0.1 at 2020-11-13 22:44:35 +0300
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 17.4ms | Allocations: 1318)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/views/layouts/application.html.erb:12
Completed 200 OK in 44ms (Views: 39.6ms | ActiveRecord: 0.5ms | Allocations: 4858)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-11-13 22:44:39 +0300
Processing by Devise::SessionsController#new as HTML
  [1m[36mUser Load (5.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Redirected to http://127.0.0.1:3000/user
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 49ms (ActiveRecord: 5.1ms | Allocations: 1846)


Started GET "/user" for 127.0.0.1 at 2020-11-13 22:44:40 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (16.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (3.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.6ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 28.2ms | Allocations: 2217)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 109ms (Views: 41.0ms | ActiveRecord: 20.7ms | Allocations: 7044)


Started GET "/users/sign_up" for 127.0.0.1 at 2020-11-13 22:44:42 +0300
Processing by Devise::RegistrationsController#new as HTML
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Redirected to http://127.0.0.1:3000/user
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 32ms (ActiveRecord: 1.6ms | Allocations: 1958)


Started GET "/user" for 127.0.0.1 at 2020-11-13 22:44:43 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.5ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 21.8ms | Allocations: 2209)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 55ms (Views: 33.5ms | ActiveRecord: 1.4ms | Allocations: 7041)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-11-13 22:44:45 +0300
Processing by Devise::SessionsController#new as HTML
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Redirected to http://127.0.0.1:3000/user
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 47ms (ActiveRecord: 2.0ms | Allocations: 1855)


Started GET "/user" for 127.0.0.1 at 2020-11-13 22:44:45 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (1.1ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 16.5ms | Allocations: 2211)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 111ms (Views: 49.3ms | ActiveRecord: 3.1ms | Allocations: 7052)


Started GET "/" for 127.0.0.1 at 2020-11-13 22:44:50 +0300
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 20.7ms | Allocations: 1318)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/views/layouts/application.html.erb:12
Completed 200 OK in 60ms (Views: 58.4ms | ActiveRecord: 0.3ms | Allocations: 4872)


Started GET "/" for 127.0.0.1 at 2020-11-13 22:44:52 +0300
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 27.5ms | Allocations: 1312)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/views/layouts/application.html.erb:12
Completed 200 OK in 62ms (Views: 55.9ms | ActiveRecord: 0.3ms | Allocations: 4856)


Started GET "/" for 127.0.0.1 at 2020-11-13 22:44:53 +0300
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 16.5ms | Allocations: 1312)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/views/layouts/application.html.erb:12
Completed 200 OK in 178ms (Views: 173.6ms | ActiveRecord: 0.3ms | Allocations: 4869)


Started GET "/" for 127.0.0.1 at 2020-11-13 22:44:55 +0300
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 18.6ms | Allocations: 1318)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/views/layouts/application.html.erb:12
Completed 200 OK in 78ms (Views: 69.7ms | ActiveRecord: 3.6ms | Allocations: 4871)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-11-13 22:45:00 +0300
Processing by Devise::SessionsController#new as HTML
  [1m[36mUser Load (5.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Redirected to http://127.0.0.1:3000/user
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 67ms (ActiveRecord: 5.9ms | Allocations: 1844)


Started GET "/user" for 127.0.0.1 at 2020-11-13 22:45:00 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.4ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 22.9ms | Allocations: 2217)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 60ms (Views: 39.7ms | ActiveRecord: 1.6ms | Allocations: 7035)


Started GET "/" for 127.0.0.1 at 2020-11-13 22:48:57 +0300
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 268.1ms | Allocations: 8015)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 417ms (Views: 356.7ms | ActiveRecord: 0.0ms | Allocations: 12412)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-11-13 22:49:01 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 2.8ms | Allocations: 200)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 38.3ms | Allocations: 2817)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 163ms (Views: 67.8ms | ActiveRecord: 23.2ms | Allocations: 12807)


Started POST "/users/sign_in" for 127.0.0.1 at 2020-11-13 22:49:50 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"vT43j/LM0zwzojhdEazByR5L8tgD0OUU3Rl9MCA+VA+rpDUXfDbEKagCEuFg8UhwL8lKPQDPOiu5bkfPwoCrgQ==", "user"=>{"email"=>"admin@admin.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "admin@admin.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 29ms (ActiveRecord: 1.2ms | Allocations: 2487)


Processing by Devise::SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"vT43j/LM0zwzojhdEazByR5L8tgD0OUU3Rl9MCA+VA+rpDUXfDbEKagCEuFg8UhwL8lKPQDPOiu5bkfPwoCrgQ==", "user"=>{"email"=>"admin@admin.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.1ms | Allocations: 15)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 31.3ms | Allocations: 1620)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 639ms (Views: 73.8ms | ActiveRecord: 0.0ms | Allocations: 4932)


Started POST "/users/sign_in" for 127.0.0.1 at 2020-11-13 22:49:57 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"O0VBD6jbH6b9PQOAXQJzgRLtL/IQNHDe5p4FUkGewdYN+GI9Q5J0G9xQYFSVuumMyuhm2DXVm+L3KLHpi0r7zA==", "user"=>{"email"=>"admin@admin.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  [1m[36mUser Load (1.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "admin@admin.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 22ms (ActiveRecord: 1.9ms | Allocations: 1816)


Processing by Devise::SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"O0VBD6jbH6b9PQOAXQJzgRLtL/IQNHDe5p4FUkGewdYN+GI9Q5J0G9xQYFSVuumMyuhm2DXVm+L3KLHpi0r7zA==", "user"=>{"email"=>"admin@admin.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.2ms | Allocations: 15)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 45.5ms | Allocations: 1612)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 713ms (Views: 91.4ms | ActiveRecord: 0.0ms | Allocations: 4399)


  [1m[35m (2.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4489605530800437810)[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddAdminUser (20201113200845)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@admin.com"], ["LIMIT", 1]]
  [1m[36mprimary::SchemaMigration Create (4.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201113200845"]]
  [1m[35m (3.1ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.4ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(4489605530800437810)[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/" for 127.0.0.1 at 2020-11-13 23:10:50 +0300
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 173.7ms | Allocations: 8010)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 250ms (Views: 226.9ms | ActiveRecord: 0.0ms | Allocations: 12496)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-11-13 23:10:55 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 1.4ms | Allocations: 200)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 33.0ms | Allocations: 2817)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 131ms (Views: 54.7ms | ActiveRecord: 33.3ms | Allocations: 12814)


Started POST "/users/sign_in" for 127.0.0.1 at 2020-11-13 23:11:02 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"B8vR233VKduc55etzY0vVO0TqOnBp+8oKNjEo/2bigkRUdND8y8+zgdHvRG80Kbt3JEQDMK4MBdMr/5cHyV1hw==", "user"=>{"email"=>"admin@admin.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "admin@admin.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 27ms (ActiveRecord: 3.6ms | Allocations: 2483)


Processing by Devise::SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"B8vR233VKduc55etzY0vVO0TqOnBp+8oKNjEo/2bigkRUdND8y8+zgdHvRG80Kbt3JEQDMK4MBdMr/5cHyV1hw==", "user"=>{"email"=>"admin@admin.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.1ms | Allocations: 15)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 17.4ms | Allocations: 1620)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 570ms (Views: 35.4ms | ActiveRecord: 0.0ms | Allocations: 4929)


Started GET "/" for 127.0.0.1 at 2020-11-13 23:13:23 +0300
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 13.9ms | Allocations: 1320)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 50ms (Views: 48.6ms | ActiveRecord: 0.0ms | Allocations: 3988)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-11-13 23:13:27 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.1ms | Allocations: 15)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 22.2ms | Allocations: 1612)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 78ms (Views: 75.7ms | ActiveRecord: 0.0ms | Allocations: 4518)


Started POST "/users/sign_in" for 127.0.0.1 at 2020-11-13 23:13:31 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"ApuT7uChGOjmrmssvesKmtxb2VWobxoziQEREfLguIwUAZF2blsP/X0OQZDMtoMj7dlhsKtwxQztdivuEF5HAg==", "user"=>{"email"=>"admin@admin.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
Completed 401 Unauthorized in 4ms (ActiveRecord: 0.0ms | Allocations: 427)


Processing by Devise::SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"ApuT7uChGOjmrmssvesKmtxb2VWobxoziQEREfLguIwUAZF2blsP/X0OQZDMtoMj7dlhsKtwxQztdivuEF5HAg==", "user"=>{"email"=>"admin@admin.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.1ms | Allocations: 15)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 16.6ms | Allocations: 1612)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 39ms (Views: 30.9ms | ActiveRecord: 0.0ms | Allocations: 4397)


Started POST "/users/sign_in" for 127.0.0.1 at 2020-11-13 23:13:33 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"9oXELkz/5YlfsNZN+dekMUf2d9vzvuKXmjF3swJqUZzAOOccp7aONH7dtZkxbz48n/M+8dZfCauLh8MIyL5rhg==", "user"=>{"email"=>"admin@admin.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
Completed 401 Unauthorized in 2ms (ActiveRecord: 0.0ms | Allocations: 393)


Processing by Devise::SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"9oXELkz/5YlfsNZN+dekMUf2d9vzvuKXmjF3swJqUZzAOOccp7aONH7dtZkxbz48n/M+8dZfCauLh8MIyL5rhg==", "user"=>{"email"=>"admin@admin.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.1ms | Allocations: 15)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 29.1ms | Allocations: 1610)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 56ms (Views: 50.4ms | ActiveRecord: 0.0ms | Allocations: 4357)


  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@admin.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "admin@admin.com"], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "mokraya@suka.xxx"], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "mokraya@suka.xxx"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (10.5ms)[0m  [1m[33mUPDATE "users" SET "user_is_admin" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["user_is_admin", true], ["updated_at", "2020-11-13 20:47:33.184143"], ["id", 1]]
  [1m[35m (3.4ms)[0m  [1m[35mCOMMIT[0m
Started GET "/" for 127.0.0.1 at 2020-11-13 23:48:37 +0300
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 128.7ms | Allocations: 8010)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 249ms (Views: 210.1ms | ActiveRecord: 0.0ms | Allocations: 12486)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-11-13 23:48:40 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 4.5ms | Allocations: 200)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 54.1ms | Allocations: 2820)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 227ms (Views: 119.6ms | ActiveRecord: 24.1ms | Allocations: 12825)


Started POST "/users/sign_in" for 127.0.0.1 at 2020-11-13 23:48:48 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"Gu0N829M8oFWfKXkiayEJkyke7C6k12I7/r/UraqORUMdw9r4bbllM3cj1j48Q2ffSbDVbmMgreLjcWtVBTGmw==", "user"=>{"email"=>"mokraya@suka.xxx", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  [1m[36mUser Load (2.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "mokraya@suka.xxx"], ["LIMIT", 1]]
Completed 401 Unauthorized in 749ms (ActiveRecord: 8.1ms | Allocations: 3035)


Processing by Devise::SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"Gu0N829M8oFWfKXkiayEJkyke7C6k12I7/r/UraqORUMdw9r4bbllM3cj1j48Q2ffSbDVbmMgreLjcWtVBTGmw==", "user"=>{"email"=>"mokraya@suka.xxx", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.1ms | Allocations: 15)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 10.2ms | Allocations: 1618)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 667ms (Views: 34.3ms | ActiveRecord: 0.0ms | Allocations: 4427)


Started POST "/users/sign_in" for 127.0.0.1 at 2020-11-13 23:48:58 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"XQ+ZJQUEI5eQDWz6VJJlxfNqP19IlkCanLDuQbnABWVrsroX7k1IKrFgDy6cKv/IK292dW13q6aNBlr6cxQ/fw==", "user"=>{"email"=>"mokraya@suka.xxx", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  [1m[36mUser Load (3.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "mokraya@suka.xxx"], ["LIMIT", 1]]
Completed 401 Unauthorized in 609ms (ActiveRecord: 3.5ms | Allocations: 1871)


Processing by Devise::SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"XQ+ZJQUEI5eQDWz6VJJlxfNqP19IlkCanLDuQbnABWVrsroX7k1IKrFgDy6cKv/IK292dW13q6aNBlr6cxQ/fw==", "user"=>{"email"=>"mokraya@suka.xxx", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.1ms | Allocations: 15)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 17.3ms | Allocations: 1612)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 760ms (Views: 32.2ms | ActiveRecord: 0.0ms | Allocations: 4383)


  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "mokraya1@suka.xxx"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "user_is_admin" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["user_is_admin", true], ["updated_at", "2020-11-13 20:49:36.321159"], ["id", 2]]
  [1m[35m (4.2ms)[0m  [1m[35mCOMMIT[0m
Started GET "/" for 127.0.0.1 at 2020-11-13 23:50:10 +0300
  [1m[35m (2.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 177.0ms | Allocations: 8011)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 312ms (Views: 265.7ms | ActiveRecord: 0.0ms | Allocations: 12493)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-11-13 23:50:13 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 3.5ms | Allocations: 200)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 49.8ms | Allocations: 2819)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 243ms (Views: 99.9ms | ActiveRecord: 39.1ms | Allocations: 12819)


Started POST "/users/sign_in" for 127.0.0.1 at 2020-11-13 23:50:21 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"SZcv8Wajja8QU0abMsr6LMZ+43dbNIvhqDT/p2wdZ2lfDS1p6FmauovzbCdDl3OV9/xbklgrVN7MQ8VYjqOY5w==", "user"=>{"email"=>"mokraya1@suka.xxx", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "mokraya1@suka.xxx"], ["LIMIT", 1]]
Redirected to http://127.0.0.1:3000/user
Completed 302 Found in 851ms (ActiveRecord: 3.8ms | Allocations: 6632)


Started GET "/user" for 127.0.0.1 at 2020-11-13 23:50:22 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (9.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Redirected to http://127.0.0.1:3000/admin
Filter chain halted as :check_if_admin rendered or redirected
Completed 302 Found in 84ms (ActiveRecord: 9.6ms | Allocations: 2471)


Started GET "/admin" for 127.0.0.1 at 2020-11-13 23:50:22 +0300
Processing by AdminController#index as HTML
  [1m[36mUser Load (8.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCashMachine Load (4.8ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/admin_controller.rb:8:in `index'
  Rendering admin/index.html.erb within layouts/application
  Rendered admin/index.html.erb within layouts/application (Duration: 3.0ms | Allocations: 551)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 240ms (Views: 62.3ms | ActiveRecord: 30.8ms | Allocations: 8491)


Started POST "/admin" for 127.0.0.1 at 2020-11-13 23:51:15 +0300
Processing by AdminController#create as HTML
  Parameters: {"authenticity_token"=>"eYUOGASqmgLLRnM5X6+JHv/eE5EtLJrBbIrDaixddrfuiAdWq8Ew/PeLEMKEA9+5dhjPOyfCAyzRA/gqzLXapw==", "admin"=>{"cash_amount"=>"15000"}, "commit"=>"Submit"}
  [1m[36mUser Load (3.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCashMachine Load (0.7ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/admin_controller.rb:12:in `create'
  [1m[35m (5.9ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:34:in `update_cash'
  [1m[36mCashMachine Update (1.6ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 15000.0], ["updated_at", "2020-11-13 20:51:15.198745"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:34:in `update_cash'
  [1m[35m (2.8ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:34:in `update_cash'
  Rendering admin/index.html.erb within layouts/application
  Rendered admin/index.html.erb within layouts/application (Duration: 10.6ms | Allocations: 250)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 206ms (Views: 53.0ms | ActiveRecord: 14.4ms | Allocations: 7329)


Started POST "/admin" for 127.0.0.1 at 2020-11-13 23:51:22 +0300
Processing by AdminController#create as HTML
  Parameters: {"authenticity_token"=>"ftFA5SALL+RSNu42sDaeTJ/XpRpbGa/rPkvr/urhN3zp3Emrj2CFGm77jc1rmsjrFhF5sFH3NgaDwtC+CgmbbA==", "admin"=>{"cash_amount"=>"1000999"}, "commit"=>"Submit"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCashMachine Load (1.9ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/admin_controller.rb:12:in `create'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:34:in `update_cash'
  [1m[36mCashMachine Update (0.5ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 1000999.0], ["updated_at", "2020-11-13 20:51:22.472848"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:34:in `update_cash'
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:34:in `update_cash'
  Rendering admin/index.html.erb within layouts/application
  Rendered admin/index.html.erb within layouts/application (Duration: 1.3ms | Allocations: 248)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 102ms (Views: 25.3ms | ActiveRecord: 5.3ms | Allocations: 7167)


Started DELETE "/users/sign_out" for 127.0.0.1 at 2020-11-13 23:51:24 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"+J/kVWAVFN5kkQY2aXjEr7igQnno7nF2rXu4r43Vxh9vku0bz36+IFhcZc2y1JIIMWae0+IA6JsQ8oPvbT1qDw=="}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Redirected to http://127.0.0.1:3000/main
Completed 302 Found in 92ms (ActiveRecord: 0.7ms | Allocations: 7012)


Started GET "/main" for 127.0.0.1 at 2020-11-13 23:51:25 +0300
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 28.6ms | Allocations: 1324)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 58ms (Views: 56.7ms | ActiveRecord: 0.0ms | Allocations: 3985)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-11-13 23:51:27 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.1ms | Allocations: 15)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 37.1ms | Allocations: 1620)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 149ms (Views: 121.9ms | ActiveRecord: 0.0ms | Allocations: 4537)


Started GET "/users/sign_up" for 127.0.0.1 at 2020-11-13 23:51:30 +0300
Processing by Devise::RegistrationsController#new as HTML
  Rendering devise/registrations/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.2ms | Allocations: 15)
  Rendered devise/registrations/new.html.erb within layouts/application (Duration: 22.7ms | Allocations: 2027)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 65ms (Views: 58.9ms | ActiveRecord: 0.0ms | Allocations: 5570)


Started GET "/" for 127.0.0.1 at 2020-11-14 12:18:31 +0300
  
PG::ConnectionBad (could not connect to server: No such file or directory
	Is the server running locally and accepting
	connections on Unix domain socket "/var/run/postgresql/.s.PGSQL.5432"?
):
  
pg (1.2.3) lib/pg.rb:58:in `initialize'
pg (1.2.3) lib/pg.rb:58:in `new'
pg (1.2.3) lib/pg.rb:58:in `connect'
activerecord (6.0.3.4) lib/active_record/connection_adapters/postgresql_adapter.rb:46:in `postgresql_connection'
activerecord (6.0.3.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:887:in `new_connection'
activerecord (6.0.3.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:931:in `checkout_new_connection'
activerecord (6.0.3.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:910:in `try_to_checkout_new_connection'
activerecord (6.0.3.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:871:in `acquire_connection'
activerecord (6.0.3.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:593:in `checkout'
activerecord (6.0.3.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:437:in `connection'
activerecord (6.0.3.4) lib/active_record/connection_adapters/abstract/connection_pool.rb:1119:in `retrieve_connection'
activerecord (6.0.3.4) lib/active_record/connection_handling.rb:221:in `retrieve_connection'
activerecord (6.0.3.4) lib/active_record/connection_handling.rb:189:in `connection'
activerecord (6.0.3.4) lib/active_record/migration.rb:562:in `call'
actionpack (6.0.3.4) lib/action_dispatch/middleware/callbacks.rb:27:in `block in call'
activesupport (6.0.3.4) lib/active_support/callbacks.rb:101:in `run_callbacks'
actionpack (6.0.3.4) lib/action_dispatch/middleware/callbacks.rb:26:in `call'
actionpack (6.0.3.4) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.4) lib/action_dispatch/middleware/actionable_exceptions.rb:18:in `call'
actionpack (6.0.3.4) lib/action_dispatch/middleware/debug_exceptions.rb:32:in `call'
web-console (4.0.4) lib/web_console/middleware.rb:132:in `call_app'
web-console (4.0.4) lib/web_console/middleware.rb:28:in `block in call'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `catch'
web-console (4.0.4) lib/web_console/middleware.rb:17:in `call'
actionpack (6.0.3.4) lib/action_dispatch/middleware/show_exceptions.rb:33:in `call'
railties (6.0.3.4) lib/rails/rack/logger.rb:37:in `call_app'
railties (6.0.3.4) lib/rails/rack/logger.rb:26:in `block in call'
activesupport (6.0.3.4) lib/active_support/tagged_logging.rb:80:in `block in tagged'
activesupport (6.0.3.4) lib/active_support/tagged_logging.rb:28:in `tagged'
activesupport (6.0.3.4) lib/active_support/tagged_logging.rb:80:in `tagged'
railties (6.0.3.4) lib/rails/rack/logger.rb:26:in `call'
sprockets-rails (3.2.2) lib/sprockets/rails/quiet_assets.rb:13:in `call'
actionpack (6.0.3.4) lib/action_dispatch/middleware/remote_ip.rb:81:in `call'
actionpack (6.0.3.4) lib/action_dispatch/middleware/request_id.rb:27:in `call'
rack (2.2.3) lib/rack/method_override.rb:24:in `call'
rack (2.2.3) lib/rack/runtime.rb:22:in `call'
activesupport (6.0.3.4) lib/active_support/cache/strategy/local_cache_middleware.rb:29:in `call'
actionpack (6.0.3.4) lib/action_dispatch/middleware/executor.rb:14:in `call'
actionpack (6.0.3.4) lib/action_dispatch/middleware/static.rb:126:in `call'
rack (2.2.3) lib/rack/sendfile.rb:110:in `call'
actionpack (6.0.3.4) lib/action_dispatch/middleware/host_authorization.rb:82:in `call'
webpacker (4.3.0) lib/webpacker/dev_server_proxy.rb:23:in `perform_request'
rack-proxy (0.6.5) lib/rack/proxy.rb:57:in `call'
railties (6.0.3.4) lib/rails/engine.rb:527:in `call'
puma (4.3.6) lib/puma/configuration.rb:228:in `call'
puma (4.3.6) lib/puma/server.rb:713:in `handle_request'
puma (4.3.6) lib/puma/server.rb:472:in `process_client'
puma (4.3.6) lib/puma/server.rb:328:in `block in run'
puma (4.3.6) lib/puma/thread_pool.rb:134:in `block in spawn_thread'
Started GET "/" for 127.0.0.1 at 2020-11-14 12:19:24 +0300
  [1m[35m (4.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 146.9ms | Allocations: 8010)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 289ms (Views: 231.6ms | ActiveRecord: 0.0ms | Allocations: 12402)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-11-14 12:19:31 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 5.2ms | Allocations: 200)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 40.3ms | Allocations: 2818)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 174ms (Views: 74.2ms | ActiveRecord: 43.6ms | Allocations: 12826)


Started POST "/users/sign_in" for 127.0.0.1 at 2020-11-14 12:19:44 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"b7laIglluGqs0AqWzzZd2wjKCNZJyn3+KOgiJROvF75ffkyqMGG1RCJ7vGxwHQzqGAqaXUg3OjgspMQN69Bp6w==", "user"=>{"email"=>"mokraya1@suka.xxx", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  [1m[36mUser Load (6.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "mokraya1@suka.xxx"], ["LIMIT", 1]]
Redirected to http://127.0.0.1:3000/user
Completed 302 Found in 574ms (ActiveRecord: 13.5ms | Allocations: 6622)


Started GET "/user" for 127.0.0.1 at 2020-11-14 12:19:45 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Redirected to http://127.0.0.1:3000/admin
Filter chain halted as :check_if_admin rendered or redirected
Completed 302 Found in 17ms (ActiveRecord: 0.4ms | Allocations: 2463)


Started GET "/admin" for 127.0.0.1 at 2020-11-14 12:19:45 +0300
Processing by AdminController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCashMachine Load (3.0ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/admin_controller.rb:8:in `index'
  Rendering admin/index.html.erb within layouts/application
  Rendered admin/index.html.erb within layouts/application (Duration: 3.9ms | Allocations: 550)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 105ms (Views: 47.8ms | ActiveRecord: 14.4ms | Allocations: 8414)


Started POST "/admin" for 127.0.0.1 at 2020-11-14 12:19:51 +0300
Processing by AdminController#create as HTML
  Parameters: {"authenticity_token"=>"c59TlQZpj/BoffU7P7CYRkuGO8O0xS7gd4PdeipP5uoPPgB8zc7EroUvKMWD5CVb+LC1N+XNb9QAiJhkwgzJdA==", "admin"=>{"cash_amount"=>"43523425352"}, "commit"=>"Submit"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCashMachine Load (12.2ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/admin_controller.rb:12:in `create'
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:34:in `update_cash'
  [1m[36mCashMachine Update (0.9ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 43523425352.0], ["updated_at", "2020-11-14 09:19:51.379539"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:34:in `update_cash'
  [1m[35m (2.4ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:34:in `update_cash'
  Rendering admin/index.html.erb within layouts/application
  Rendered admin/index.html.erb within layouts/application (Duration: 1.1ms | Allocations: 249)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 113ms (Views: 25.3ms | ActiveRecord: 17.9ms | Allocations: 7324)


Started POST "/admin" for 127.0.0.1 at 2020-11-14 12:20:02 +0300
Processing by AdminController#create as HTML
  Parameters: {"authenticity_token"=>"6YXdsOpUiw/cPf1pwUqp1IKSWG83Biob2fC/L5omh3uVJI5ZIfPAUTFvIJd9HhTJMaTWm2YOay+u+/oxcmWo5Q==", "admin"=>{"cash_amount"=>"100"}, "commit"=>"Submit"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCashMachine Load (0.4ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/admin_controller.rb:12:in `create'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:34:in `update_cash'
  [1m[36mCashMachine Update (1.0ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 100.0], ["updated_at", "2020-11-14 09:20:02.675119"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:34:in `update_cash'
  [1m[35m (9.9ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:34:in `update_cash'
  Rendering admin/index.html.erb within layouts/application
  Rendered admin/index.html.erb within layouts/application (Duration: 1.1ms | Allocations: 248)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 90ms (Views: 15.1ms | ActiveRecord: 12.6ms | Allocations: 7166)


Started DELETE "/users/sign_out" for 127.0.0.1 at 2020-11-14 12:20:07 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"ZS90BLKbRxwWSHM3+7GJmuiJTxFzzw825JiRiIp1w1QZjifteTwMQvsarslH5TSHW7/B5SLHTgKTk9SWYjbsyg=="}
  [1m[36mUser Load (7.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Redirected to http://127.0.0.1:3000/main
Completed 302 Found in 45ms (ActiveRecord: 7.0ms | Allocations: 2599)


Started GET "/main" for 127.0.0.1 at 2020-11-14 12:20:07 +0300
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 5.4ms | Allocations: 1326)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 22ms (Views: 20.7ms | ActiveRecord: 0.0ms | Allocations: 3990)


Started GET "/users/sign_up" for 127.0.0.1 at 2020-11-14 12:20:13 +0300
Processing by Devise::RegistrationsController#new as HTML
  Rendering devise/registrations/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.1ms | Allocations: 15)
  Rendered devise/registrations/new.html.erb within layouts/application (Duration: 22.2ms | Allocations: 2031)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 63ms (Views: 61.1ms | ActiveRecord: 0.0ms | Allocations: 5574)


Started POST "/users" for 127.0.0.1 at 2020-11-14 12:20:39 +0300
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"authenticity_token"=>"8gn4yA4MwAfI4c0MG8FBkIZCZ56Q0t/Pib45Pbx87wLXfNCoVdXVD9nCyaqvrtv1k0AI5p+IFsop93wD+MPd0A==", "user"=>{"email"=>"zalupa@porn.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Become a client"}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "zalupa@porn.com"], ["LIMIT", 1]]
  [1m[36mUser Create (11.5ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "email", "encrypted_password") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2020-11-14 09:20:40.095203"], ["updated_at", "2020-11-14 09:20:40.095203"], ["email", "zalupa@porn.com"], ["encrypted_password", "$2a$12$KINnB9mQ2wttFSLHLqTWEuQMHxQJROwqMrEUxqHji9kKEnfjpKRg2"]]
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://127.0.0.1:3000/user
Completed 302 Found in 595ms (ActiveRecord: 15.1ms | Allocations: 7834)


Started GET "/user" for 127.0.0.1 at 2020-11-14 12:20:40 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (2.6ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 48.9ms | Allocations: 2987)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 168ms (Views: 68.2ms | ActiveRecord: 9.5ms | Allocations: 15627)


Started POST "/user" for 127.0.0.1 at 2020-11-14 12:21:02 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"8lMy0VpKxWlnqAkaQl8Q/EFnOjIpnMMeLMoYTuuS861/2Qkh5cYnrSPOCa9fx8T/z5qTMhU4oDXg1eZ+I80LBg==", "user"=>{"current_balance"=>"10000000"}, "commit"=>"Withdraw"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:42:in `withdraw'
  [1m[36mCashMachine Load (1.9ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:16:in `cash_available?'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (3.2ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 26.1ms | Allocations: 2430)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 105ms (Views: 45.8ms | ActiveRecord: 6.2ms | Allocations: 8313)


Started POST "/user" for 127.0.0.1 at 2020-11-14 12:21:13 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"PFzUjUvHcVUlcHz24B9d736dpd3LVS6iOIzwTu0nZ6Kx1u999EuTkWEWfEP9h4ns8GAM3ffxTYn0kw5+JXifCQ==", "user"=>{"current_balance"=>"100000"}, "commit"=>"Deposit"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:28:in `deposit'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mUser Update (9.5ms)[0m  [1m[33mUPDATE "users" SET "current_balance" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["current_balance", 100000.0], ["updated_at", "2020-11-14 09:21:13.141215"], ["id", 3]]
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mCashMachine Load (0.7ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:7:in `add_cash'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[36mCashMachine Update (0.6ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 100100.0], ["updated_at", "2020-11-14 09:21:13.196933"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
  [1m[36mUsersHistoryRecord Create (7.7ms)[0m  [1m[32mINSERT INTO "users_history_records" ("operation_type", "amount", "balance_after", "created_at", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["operation_type", "Deposit"], ["amount", 100000.0], ["balance_after", 100000.0], ["created_at", "2020-11-14 09:21:13.340022"], ["updated_at", "2020-11-14 09:21:13.340022"], ["user_id", 3]]
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
Redirected to http://127.0.0.1:3000/user
Completed 302 Found in 306ms (ActiveRecord: 57.1ms | Allocations: 19396)


Started GET "/user" for 127.0.0.1 at 2020-11-14 12:21:13 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.4ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 14.0ms | Allocations: 2262)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 68ms (Views: 50.2ms | ActiveRecord: 1.5ms | Allocations: 7093)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-11-14 12:21:44 +0300
Processing by Devise::SessionsController#new as HTML
  [1m[36mUser Load (6.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Redirected to http://127.0.0.1:3000/user
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 47ms (ActiveRecord: 6.1ms | Allocations: 1853)


Started GET "/user" for 127.0.0.1 at 2020-11-14 12:21:44 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (1.4ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 15.4ms | Allocations: 2243)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 76ms (Views: 29.2ms | ActiveRecord: 3.8ms | Allocations: 7081)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-11-14 12:21:47 +0300
Processing by Devise::SessionsController#new as HTML
  [1m[36mUser Load (11.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Redirected to http://127.0.0.1:3000/user
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 55ms (ActiveRecord: 11.7ms | Allocations: 1843)


Started GET "/user" for 127.0.0.1 at 2020-11-14 12:21:47 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.5ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 16.0ms | Allocations: 2242)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 76ms (Views: 35.8ms | ActiveRecord: 2.4ms | Allocations: 7056)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-11-14 12:21:48 +0300
Processing by Devise::SessionsController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Redirected to http://127.0.0.1:3000/user
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 59ms (ActiveRecord: 0.3ms | Allocations: 1864)


Started GET "/user" for 127.0.0.1 at 2020-11-14 12:21:48 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (15.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (3.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (11.1ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 58.1ms | Allocations: 2262)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 182ms (Views: 80.7ms | ActiveRecord: 30.3ms | Allocations: 7092)


Started GET "/users/sign_up" for 127.0.0.1 at 2020-11-14 12:21:49 +0300
Processing by Devise::RegistrationsController#new as HTML
  [1m[36mUser Load (5.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Redirected to http://127.0.0.1:3000/user
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 49ms (ActiveRecord: 5.3ms | Allocations: 1867)


Started GET "/user" for 127.0.0.1 at 2020-11-14 12:21:50 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.4ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 22.3ms | Allocations: 2247)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 61ms (Views: 37.3ms | ActiveRecord: 1.4ms | Allocations: 7067)


Started GET "/users/sign_up" for 127.0.0.1 at 2020-11-14 12:21:51 +0300
Processing by Devise::RegistrationsController#new as HTML
  [1m[36mUser Load (8.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Redirected to http://127.0.0.1:3000/user
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 58ms (ActiveRecord: 8.6ms | Allocations: 1829)


Started GET "/user" for 127.0.0.1 at 2020-11-14 12:21:51 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (14.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (1.4ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 27.9ms | Allocations: 2247)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 120ms (Views: 47.9ms | ActiveRecord: 17.3ms | Allocations: 7095)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-11-14 12:21:58 +0300
Processing by Devise::SessionsController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Redirected to http://127.0.0.1:3000/user
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 49ms (ActiveRecord: 0.3ms | Allocations: 1856)


Started GET "/user" for 127.0.0.1 at 2020-11-14 12:21:58 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.4ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 15.0ms | Allocations: 2241)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 84ms (Views: 26.3ms | ActiveRecord: 4.5ms | Allocations: 7073)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-11-14 12:21:59 +0300
Processing by Devise::SessionsController#new as HTML
  [1m[36mUser Load (12.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Redirected to http://127.0.0.1:3000/user
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 46ms (ActiveRecord: 12.1ms | Allocations: 1848)


Started GET "/user" for 127.0.0.1 at 2020-11-14 12:21:59 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (13.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (5.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (4.2ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 38.8ms | Allocations: 2243)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 149ms (Views: 54.9ms | ActiveRecord: 22.9ms | Allocations: 7086)


Started GET "/users/sign_up" for 127.0.0.1 at 2020-11-14 12:22:00 +0300
Processing by Devise::RegistrationsController#new as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Redirected to http://127.0.0.1:3000/user
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 52ms (ActiveRecord: 0.3ms | Allocations: 1841)


Started GET "/user" for 127.0.0.1 at 2020-11-14 12:22:01 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.3ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 28.3ms | Allocations: 2241)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 90ms (Views: 69.2ms | ActiveRecord: 0.9ms | Allocations: 7060)


Started GET "/users/sign_up" for 127.0.0.1 at 2020-11-14 12:22:03 +0300
Processing by Devise::RegistrationsController#new as HTML
  [1m[36mUser Load (16.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Redirected to http://127.0.0.1:3000/user
Filter chain halted as :require_no_authentication rendered or redirected
Completed 302 Found in 64ms (ActiveRecord: 16.4ms | Allocations: 1867)


Started GET "/user" for 127.0.0.1 at 2020-11-14 12:22:03 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.3ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 13.9ms | Allocations: 2241)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 89ms (Views: 28.5ms | ActiveRecord: 4.2ms | Allocations: 7087)


Started GET "/user" for 127.0.0.1 at 2020-11-14 12:22:21 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (6.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.5ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 17.2ms | Allocations: 2247)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 119ms (Views: 45.2ms | ActiveRecord: 7.7ms | Allocations: 7068)


Started GET "/user" for 127.0.0.1 at 2020-11-14 12:22:50 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (6.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (8.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.4ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 25.8ms | Allocations: 2241)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 86ms (Views: 43.0ms | ActiveRecord: 14.9ms | Allocations: 7060)


Started GET "/user" for 127.0.0.1 at 2020-11-14 12:23:15 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (11.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (2.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (1.7ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 31.9ms | Allocations: 2247)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 116ms (Views: 71.2ms | ActiveRecord: 15.9ms | Allocations: 7074)


Started GET "/" for 127.0.0.1 at 2020-11-15 11:53:39 +0300
  [1m[35m (3.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 124.4ms | Allocations: 8010)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 222ms (Views: 194.9ms | ActiveRecord: 0.0ms | Allocations: 12391)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-11-15 11:53:44 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 1.5ms | Allocations: 200)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 53.8ms | Allocations: 2819)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 190ms (Views: 95.3ms | ActiveRecord: 32.5ms | Allocations: 12832)


Started POST "/users/sign_in" for 127.0.0.1 at 2020-11-15 11:53:51 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"pGi7zhRHRavRundoU8Bt9BqOhFOzC+PCJaFCG1GpW3bK1gba//PMWZGSEALlzxHZRgIpyjQgPdwB65v4iIy7yA==", "user"=>{"email"=>"mokraya1@suka.xxx", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  [1m[36mUser Load (5.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "mokraya1@suka.xxx"], ["LIMIT", 1]]
Redirected to http://127.0.0.1:3000/user
Completed 302 Found in 767ms (ActiveRecord: 5.8ms | Allocations: 6619)


Started GET "/user" for 127.0.0.1 at 2020-11-15 11:53:52 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Redirected to http://127.0.0.1:3000/admin
Filter chain halted as :check_if_admin rendered or redirected
Completed 302 Found in 56ms (ActiveRecord: 1.5ms | Allocations: 2457)


Started GET "/admin" for 127.0.0.1 at 2020-11-15 11:53:52 +0300
Processing by AdminController#index as HTML
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mCashMachine Load (2.1ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/admin_controller.rb:8:in `index'
  Rendering admin/index.html.erb within layouts/application
  Rendered admin/index.html.erb within layouts/application (Duration: 8.0ms | Allocations: 549)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 162ms (Views: 32.1ms | ActiveRecord: 11.6ms | Allocations: 8398)


Started DELETE "/users/sign_out" for 127.0.0.1 at 2020-11-15 11:53:55 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"jS32zK2XbObVcxKQsnGz4yzd8rzyerYAhwhC66Mu9R2i4E31WQmeFbRRp4BsMX92J9uJ67HyzvpZ94ki8lWCmA=="}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Redirected to http://127.0.0.1:3000/main
Completed 302 Found in 75ms (ActiveRecord: 0.5ms | Allocations: 2674)


Started GET "/main" for 127.0.0.1 at 2020-11-15 11:53:55 +0300
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 7.2ms | Allocations: 1329)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 49ms (Views: 47.9ms | ActiveRecord: 0.0ms | Allocations: 3996)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-11-15 11:53:57 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.1ms | Allocations: 15)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 46.9ms | Allocations: 1618)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 113ms (Views: 91.5ms | ActiveRecord: 0.0ms | Allocations: 4536)


Started POST "/users/sign_in" for 127.0.0.1 at 2020-11-15 11:54:05 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"yw808uT8h8mU6v15KR49KQ12sMCIUOs1FYFXJ/Hxen4OqIkAEryNSABwOY1W0NuOp5YgfoUMPRJAskEXEQPKpA==", "user"=>{"email"=>"admin@admin.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  [1m[36mUser Load (4.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "admin@admin.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 30ms (ActiveRecord: 4.7ms | Allocations: 1858)


Processing by Devise::SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"yw808uT8h8mU6v15KR49KQ12sMCIUOs1FYFXJ/Hxen4OqIkAEryNSABwOY1W0NuOp5YgfoUMPRJAskEXEQPKpA==", "user"=>{"email"=>"admin@admin.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.1ms | Allocations: 15)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 7.7ms | Allocations: 1613)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 536ms (Views: 19.6ms | ActiveRecord: 0.0ms | Allocations: 4436)


Started POST "/users/sign_in" for 127.0.0.1 at 2020-11-15 11:54:22 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"WMH4sybQma+GpfHEuSLJ7f7jj7m8EhUuR/AamYPFyG1xz6H1tI+kHuoF2LYlvwdzSO5w2v3JJwfIa2baTPLHSQ==", "user"=>{"email"=>"zalupa@porn.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "zalupa@porn.com"], ["LIMIT", 1]]
Redirected to http://127.0.0.1:3000/user
Completed 302 Found in 575ms (ActiveRecord: 0.6ms | Allocations: 2662)


Started GET "/user" for 127.0.0.1 at 2020-11-15 11:54:22 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (2.5ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 79.9ms | Allocations: 7329)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 175ms (Views: 88.1ms | ActiveRecord: 12.5ms | Allocations: 19681)


Started POST "/user" for 127.0.0.1 at 2020-11-15 11:54:29 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"uQp63Kf0x09zcJnCe9cA8p8gxfidSJHsm9c4KurNUK9qTU/Ul0JRK7SEjic8nYZ67nBfRTwOtbs4na3nz94D3A==", "user"=>{"current_balance"=>"-100000.0"}, "commit"=>"Withdraw"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:42:in `withdraw'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.5ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 19.4ms | Allocations: 2390)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 118ms (Views: 49.6ms | ActiveRecord: 2.1ms | Allocations: 7737)


Started POST "/user" for 127.0.0.1 at 2020-11-15 11:54:37 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"1k/zy3CU8/cJnHp9G6UXTzg4v70zbxleqUHNlFdR/GAFCMbDQCJlk85obZhc75HHSWglAJIpPQkKC1hZckKvEw==", "user"=>{"current_balance"=>"100000.0"}, "commit"=>"Deposit"}
  [1m[36mUser Load (5.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:28:in `deposit'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mUser Update (4.7ms)[0m  [1m[33mUPDATE "users" SET "current_balance" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["current_balance", 200000.0], ["updated_at", "2020-11-15 08:54:38.018986"], ["id", 3]]
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mCashMachine Load (0.7ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:7:in `add_cash'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[36mCashMachine Update (0.6ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 200100.0], ["updated_at", "2020-11-15 08:54:38.073927"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
  [1m[36mUsersHistoryRecord Create (7.2ms)[0m  [1m[32mINSERT INTO "users_history_records" ("operation_type", "amount", "balance_after", "created_at", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["operation_type", "Deposit"], ["amount", 100000.0], ["balance_after", 200000.0], ["created_at", "2020-11-15 08:54:38.097318"], ["updated_at", "2020-11-15 08:54:38.097318"], ["user_id", 3]]
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
Redirected to http://127.0.0.1:3000/user
Completed 302 Found in 187ms (ActiveRecord: 26.1ms | Allocations: 11246)


Started GET "/user" for 127.0.0.1 at 2020-11-15 11:54:38 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.4ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 24.3ms | Allocations: 2277)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 69ms (Views: 46.4ms | ActiveRecord: 2.4ms | Allocations: 7102)


Started POST "/user" for 127.0.0.1 at 2020-11-15 11:54:45 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"r0iOLqfc9ogunuzYjTzTA+bmSm/DJHpPTHzmGgAvWgp8D7sml2pg7Olq+z3KdlWLl7bQ0mJiXhjvNnPXJTwJeQ==", "user"=>{"current_balance"=>"-100000.0"}, "commit"=>"Withdraw"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (3.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:42:in `withdraw'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.5ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:38:in `!='
  Rendered user/index.html.erb within layouts/application (Duration: 41.6ms | Allocations: 2401)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 96ms (Views: 58.8ms | ActiveRecord: 4.1ms | Allocations: 7748)


Started GET "/" for 127.0.0.1 at 2020-11-17 22:15:08 +0300
  [1m[35m (4.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 148.3ms | Allocations: 8017)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 314ms (Views: 269.0ms | ActiveRecord: 0.0ms | Allocations: 12381)


DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /usr/share/rubygems-integration/all/gems/rake-13.0.1/lib/rake/task.rb:281)
  [1m[35m (1.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4489605530800437810)[0m
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (5.0ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(4489605530800437810)[0m
  [1m[35m (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /usr/share/rubygems-integration/all/gems/rake-13.0.1/lib/rake/task.rb:281)
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /usr/share/rubygems-integration/all/gems/rake-13.0.1/lib/rake/task.rb:281)
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /usr/share/rubygems-integration/all/gems/rake-13.0.1/lib/rake/task.rb:281)
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /usr/share/rubygems-integration/all/gems/rake-13.0.1/lib/rake/task.rb:281)
  [1m[35m (1.0ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4489605530800437810)[0m
  [1m[35m (5.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (3.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(4489605530800437810)[0m
  [1m[35m (1.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (6.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.7ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (184.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "cutebank_test"[0m
  [1m[35m (1934.4ms)[0m  [1m[35mCREATE DATABASE "cutebank_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (5.2ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (1.9ms)[0m  [1m[35mDROP TABLE IF EXISTS "cash_machines" CASCADE[0m
  [1m[35m (55.3ms)[0m  [1m[35mCREATE TABLE "cash_machines" ("id" bigserial primary key, "cash_amount" float DEFAULT 100000.0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.6ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (28.0ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "current_balance" float DEFAULT 0.0 NOT NULL, "user_is_admin" boolean DEFAULT FALSE NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp)[0m
  [1m[35m (6.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (6.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "users_history_records" CASCADE[0m
  [1m[35m (29.6ms)[0m  [1m[35mCREATE TABLE "users_history_records" ("id" bigserial primary key, "operation_type" character varying NOT NULL, "amount" float NOT NULL, "balance_after" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint)[0m
  [1m[35m (22.7ms)[0m  [1m[35mALTER TABLE "users_history_records" ADD CONSTRAINT "fk_rails_4e2c355ec6"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (15.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (9.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20201113200845)[0m
  [1m[35m (1.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20201109115808);

[0m
  [1m[35m (10.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (2.8ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2020-11-21 15:55:20.532030"], ["updated_at", "2020-11-21 15:55:20.532030"]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (5.8ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.7ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = $1, "updated_at" = $2 WHERE "ar_internal_metadata"."key" = $3[0m  [["value", "test"], ["updated_at", "2020-11-21 15:55:20.568975"], ["key", "environment"]]
  [1m[35m (2.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "0257f07634425d2e16fb401099c04a321fc370c2"], ["created_at", "2020-11-21 15:55:20.614845"], ["updated_at", "2020-11-21 15:55:20.614845"]]
  [1m[35m (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (28.1ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "cash_machines" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "users_history_records" DISABLE TRIGGER ALL[0m
  [1m[35m (15.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (2.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (21.0ms)[0m  [1m[31mDELETE FROM "fixture"[0m
  [1m[35m (1.0ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (36.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (10.2ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "cash_machines" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "users_history_records" DISABLE TRIGGER ALL[0m
  [1m[35m (3.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (15.0ms)[0m  [1m[31mDELETE FROM "fixture"[0m
  [1m[35m (0.3ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.0ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "cash_machines" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "users_history_records" DISABLE TRIGGER ALL[0m
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (28.1ms)[0m  [1m[31mDELETE FROM "users";
DELETE FROM "cash_machines";
INSERT INTO "users" ("id", "current_balance", "user_is_admin", "created_at", "updated_at", "email", "encrypted_password", "reset_password_token", "reset_password_sent_at", "remember_created_at") VALUES (980190962, DEFAULT, DEFAULT, '2020-11-21 17:00:52.803027', '2020-11-21 17:00:52.803027', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT), (298486374, DEFAULT, DEFAULT, '2020-11-21 17:00:52.803027', '2020-11-21 17:00:52.803027', DEFAULT, DEFAULT, DEFAULT, DEFAULT, DEFAULT);
INSERT INTO "cash_machines" ("id", "cash_amount", "created_at", "updated_at") VALUES (980190962, DEFAULT, '2020-11-21 17:00:52.884967', '2020-11-21 17:00:52.884967'), (298486374, DEFAULT, '2020-11-21 17:00:52.884967', '2020-11-21 17:00:52.884967')[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (1.6ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4489605530800437810)[0m
  [1m[35m (3.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(4489605530800437810)[0m
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (1.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (184.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "cutebank_test"[0m
  [1m[35m (847.8ms)[0m  [1m[35mCREATE DATABASE "cutebank_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (0.8ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (0.5ms)[0m  [1m[35mDROP TABLE IF EXISTS "cash_machines" CASCADE[0m
  [1m[35m (71.5ms)[0m  [1m[35mCREATE TABLE "cash_machines" ("id" bigserial primary key, "cash_amount" float DEFAULT 100000.0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (21.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "current_balance" float DEFAULT 0.0 NOT NULL, "user_is_admin" boolean DEFAULT FALSE NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp)[0m
  [1m[35m (6.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (5.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35m (0.4ms)[0m  [1m[35mDROP TABLE IF EXISTS "users_history_records" CASCADE[0m
  [1m[35m (34.8ms)[0m  [1m[35mCREATE TABLE "users_history_records" ("id" bigserial primary key, "operation_type" character varying NOT NULL, "amount" float NOT NULL, "balance_after" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint)[0m
  [1m[35m (16.6ms)[0m  [1m[35mALTER TABLE "users_history_records" ADD CONSTRAINT "fk_rails_4e2c355ec6"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (14.9ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (1.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.9ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20201113200845)[0m
  [1m[35m (2.0ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20201109115808);

[0m
  [1m[35m (14.8ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (8.2ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (3.5ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2020-11-21 17:03:43.878983"], ["updated_at", "2020-11-21 17:03:43.878983"]]
  [1m[35m (3.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.7ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Update (0.8ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = $1, "updated_at" = $2 WHERE "ar_internal_metadata"."key" = $3[0m  [["value", "test"], ["updated_at", "2020-11-21 17:03:43.919016"], ["key", "environment"]]
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.9ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "0257f07634425d2e16fb401099c04a321fc370c2"], ["created_at", "2020-11-21 17:03:43.947370"], ["updated_at", "2020-11-21 17:03:43.947370"]]
  [1m[35m (1.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "schema_migrations" DISABLE TRIGGER ALL;ALTER TABLE "ar_internal_metadata" DISABLE TRIGGER ALL;ALTER TABLE "cash_machines" DISABLE TRIGGER ALL;ALTER TABLE "users" DISABLE TRIGGER ALL;ALTER TABLE "users_history_records" DISABLE TRIGGER ALL[0m
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.8ms)[0m  [1m[31mDELETE FROM "fixture"[0m
  [1m[35m (0.2ms)[0m  [1m[31mROLLBACK[0m
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /usr/share/rubygems-integration/all/gems/rake-13.0.1/lib/rake/task.rb:281)
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /usr/share/rubygems-integration/all/gems/rake-13.0.1/lib/rake/task.rb:281)
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /usr/share/rubygems-integration/all/gems/rake-13.0.1/lib/rake/task.rb:281)
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /usr/share/rubygems-integration/all/gems/rake-13.0.1/lib/rake/task.rb:281)
Started GET "/" for 127.0.0.1 at 2020-11-26 15:34:22 +0300
  [1m[35m (7.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 123.9ms | Allocations: 8023)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 194ms (Views: 163.2ms | ActiveRecord: 0.0ms | Allocations: 12391)


Started GET "/users/sign_up" for 127.0.0.1 at 2020-11-26 15:34:39 +0300
Processing by Devise::RegistrationsController#new as HTML
  Rendering devise/registrations/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 2.4ms | Allocations: 200)
  Rendered devise/registrations/new.html.erb within layouts/application (Duration: 39.2ms | Allocations: 2912)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 163ms (Views: 51.1ms | ActiveRecord: 47.6ms | Allocations: 12657)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-11-26 15:34:44 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.1ms | Allocations: 15)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 31.3ms | Allocations: 1947)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 110ms (Views: 83.1ms | ActiveRecord: 0.0ms | Allocations: 5698)


Started GET "/" for 127.0.0.1 at 2020-11-26 15:34:50 +0300
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 25.3ms | Allocations: 1326)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 83ms (Views: 81.7ms | ActiveRecord: 0.0ms | Allocations: 3966)


  [1m[35m (5.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (6.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (116.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "cutebank_test"[0m
  [1m[35m (677.7ms)[0m  [1m[35mCREATE DATABASE "cutebank_test" ENCODING = 'unicode'[0m
  [1m[35mSQL (2.3ms)[0m  [1m[35mCREATE EXTENSION IF NOT EXISTS "plpgsql"[0m
  [1m[35m (1.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "cash_machines" CASCADE[0m
  [1m[35m (71.5ms)[0m  [1m[35mCREATE TABLE "cash_machines" ("id" bigserial primary key, "cash_amount" float DEFAULT 100000.0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (1.8ms)[0m  [1m[35mDROP TABLE IF EXISTS "users" CASCADE[0m
  [1m[35m (17.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "current_balance" float DEFAULT 0.0 NOT NULL, "user_is_admin" boolean DEFAULT FALSE NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "email" character varying DEFAULT '' NOT NULL, "encrypted_password" character varying DEFAULT '' NOT NULL, "reset_password_token" character varying, "reset_password_sent_at" timestamp, "remember_created_at" timestamp)[0m
  [1m[35m (21.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (6.4ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[35m (0.3ms)[0m  [1m[35mDROP TABLE IF EXISTS "users_history_records" CASCADE[0m
  [1m[35m (16.8ms)[0m  [1m[35mCREATE TABLE "users_history_records" ("id" bigserial primary key, "operation_type" character varying NOT NULL, "amount" float NOT NULL, "balance_after" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL, "user_id" bigint)[0m
  [1m[35m (15.9ms)[0m  [1m[35mALTER TABLE "users_history_records" ADD CONSTRAINT "fk_rails_4e2c355ec6"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[35m (10.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (2.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES (20201113200845)[0m
  [1m[35m (1.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" (version) VALUES
(20201109115808);

[0m
  [1m[35m (21.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (1.3ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2020-11-26 16:20:25.942213"], ["updated_at", "2020-11-26 16:20:25.942213"]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (3.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Update (5.3ms)[0m  [1m[33mUPDATE "ar_internal_metadata" SET "value" = $1, "updated_at" = $2 WHERE "ar_internal_metadata"."key" = $3[0m  [["value", "test"], ["updated_at", "2020-11-26 16:20:25.971678"], ["key", "environment"]]
  [1m[35m (2.9ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "schema_sha1"], ["LIMIT", 1]]
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "schema_sha1"], ["value", "0257f07634425d2e16fb401099c04a321fc370c2"], ["created_at", "2020-11-26 16:20:26.008693"], ["updated_at", "2020-11-26 16:20:26.008693"]]
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4489605530800437810)[0m
  [1m[35m (8.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (2.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (5.4ms)[0m  [1m[34mSELECT pg_advisory_unlock(4489605530800437810)[0m
  [1m[35m (2.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /usr/share/rubygems-integration/all/gems/rake-13.0.1/lib/rake/task.rb:281)
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /usr/share/rubygems-integration/all/gems/rake-13.0.1/lib/rake/task.rb:281)
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /usr/share/rubygems-integration/all/gems/rake-13.0.1/lib/rake/task.rb:281)
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /usr/share/rubygems-integration/all/gems/rake-13.0.1/lib/rake/task.rb:281)
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /usr/share/rubygems-integration/all/gems/rake-13.0.1/lib/rake/task.rb:281)
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /usr/share/rubygems-integration/all/gems/rake-13.0.1/lib/rake/task.rb:281)
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /usr/share/rubygems-integration/all/gems/rake-13.0.1/lib/rake/task.rb:281)
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /usr/share/rubygems-integration/all/gems/rake-13.0.1/lib/rake/task.rb:281)
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /usr/share/rubygems-integration/all/gems/rake-13.0.1/lib/rake/task.rb:281)
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /usr/share/rubygems-integration/all/gems/rake-13.0.1/lib/rake/task.rb:281)
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /usr/share/rubygems-integration/all/gems/rake-13.0.1/lib/rake/task.rb:281)
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /usr/share/rubygems-integration/all/gems/rake-13.0.1/lib/rake/task.rb:281)
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /usr/share/rubygems-integration/all/gems/rake-13.0.1/lib/rake/task.rb:281)
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /usr/share/rubygems-integration/all/gems/rake-13.0.1/lib/rake/task.rb:281)
DEPRECATION WARNING: Using `bin/rake routes` is deprecated and will be removed in Rails 6.1. Use `bin/rails routes` instead.
 (called from block in execute at /usr/share/rubygems-integration/all/gems/rake-13.0.1/lib/rake/task.rb:281)
Started GET "/" for 127.0.0.1 at 2020-12-01 17:16:26 +0300
  [1m[35m (3.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 140.6ms | Allocations: 8030)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 210ms (Views: 184.1ms | ActiveRecord: 0.0ms | Allocations: 12398)


Started GET "/users/sign_up" for 127.0.0.1 at 2020-12-01 17:16:40 +0300
Processing by Devise::RegistrationsController#new as HTML
  Rendering devise/registrations/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 3.2ms | Allocations: 200)
  Rendered devise/registrations/new.html.erb within layouts/application (Duration: 52.4ms | Allocations: 2909)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 135ms (Views: 69.5ms | ActiveRecord: 29.5ms | Allocations: 12637)


Started GET "/" for 127.0.0.1 at 2020-12-01 17:16:44 +0300
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 27.3ms | Allocations: 1320)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 93ms (Views: 74.5ms | ActiveRecord: 0.0ms | Allocations: 3966)


Started GET "/" for 127.0.0.1 at 2020-12-07 14:23:14 +0300
  [1m[35m (34.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 2.1ms | Allocations: 453)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 500 Internal Server Error in 605ms (ActiveRecord: 0.0ms | Allocations: 208181)


  
ActionView::Template::Error (undefined local variable or method `about_index_path' for #<#<Class:0x0000560db84bf408>:0x0000560db84bd298>):
    74:       <nav>
    75:         <ul>
    76:           <li>
    77:           <%= link_to image_tag('/assets/icon-about.svg') + "About", about_index_path %>
    78:             <div class="border-reg"></div>
    79:           </li>
    80:           <li><img class="icon-time" src="/assets/icon-time.svg"><span id="date_time"></span></li>
  
app/views/layouts/application.html.erb:77
Started GET "/" for 127.0.0.1 at 2020-12-07 14:26:40 +0300
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 0.3ms | Allocations: 66)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 10ms (Views: 8.6ms | ActiveRecord: 0.0ms | Allocations: 4253)


Started GET "/about" for 127.0.0.1 at 2020-12-07 14:26:58 +0300
Processing by AboutController#index as HTML
  Rendering about/index.html.erb within layouts/application
  Rendered about/index.html.erb within layouts/application (Duration: 0.3ms | Allocations: 120)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 12ms (Views: 10.8ms | ActiveRecord: 0.0ms | Allocations: 4816)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-12-07 14:27:01 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.7ms | Allocations: 156)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 87.5ms | Allocations: 1705)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 533ms (Views: 99.9ms | ActiveRecord: 407.3ms | Allocations: 13253)


Started POST "/users/sign_in" for 127.0.0.1 at 2020-12-07 14:28:30 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"1xUEjUbPMtv7Ot5wrSXvw4IipiU6qke7f5FzLzRIGjRk56BHwYb4oNUAvyDnQd6Yrr2RICZUGcIty5FIq5GOuA==", "user"=>{"email"=>"fordgt260@mail.ru", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  [1m[36mUser Load (48.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "fordgt260@mail.ru"], ["LIMIT", 1]]
Redirected to http://localhost:3000/user
Completed 302 Found in 6094ms (ActiveRecord: 49.0ms | Allocations: 587526)


Started GET "/user" for 127.0.0.1 at 2020-12-07 14:28:37 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (24.9ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (40.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:58
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 93.5ms | Allocations: 9909)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 175ms (Views: 33.9ms | ActiveRecord: 69.9ms | Allocations: 22060)


Started POST "/user" for 127.0.0.1 at 2020-12-07 14:28:46 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"7RxP+iJLH8ryNyICHDMYVBUXU1EvXjfO8+pLULJexD2HV+hUq4jJrurLmaxXViG02aM5uYoIDJ9yG6HiBY6Qvw==", "user"=>{"current_balance"=>"1000"}, "commit"=>"Deposit"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:28:in `deposit'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mUser Update (76.1ms)[0m  [1m[33mUPDATE "users" SET "current_balance" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["current_balance", 4494.0], ["updated_at", "2020-12-07 11:28:46.664774"], ["id", 3]]
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[35m (53.1ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mCashMachine Load (26.9ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:7:in `add_cash'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[36mCashMachine Update (0.6ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 34333.0], ["updated_at", "2020-12-07 11:28:46.845188"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
  [1m[36mUsersHistoryRecord Create (40.5ms)[0m  [1m[32mINSERT INTO "users_history_records" ("operation_type", "amount", "balance_after", "created_at", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["operation_type", "Deposit"], ["amount", 1000.0], ["balance_after", 4494.0], ["created_at", "2020-12-07 11:28:46.858579"], ["updated_at", "2020-12-07 11:28:46.858579"], ["user_id", 3]]
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
  [1m[35m (20.1ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
Redirected to http://localhost:3000/user
Completed 302 Found in 269ms (ActiveRecord: 231.1ms | Allocations: 13844)


Started GET "/user" for 127.0.0.1 at 2020-12-07 14:28:46 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.8ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:58
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 10.2ms | Allocations: 4075)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 25ms (Views: 17.7ms | ActiveRecord: 2.5ms | Allocations: 10151)


Started DELETE "/users/sign_out" for 127.0.0.1 at 2020-12-07 14:28:52 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"+NPQBDGL1/i7U2JUuGHPpddCPsNCUuQXNaV9aqZqNqaSmHequEgBnKOv2frzBPZFG/ZUK+cE30a0VJfYEbpiJA=="}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Redirected to http://localhost:3000/main
Completed 302 Found in 112ms (ActiveRecord: 0.7ms | Allocations: 2910)


Started GET "/main" for 127.0.0.1 at 2020-12-07 14:28:52 +0300
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 0.3ms | Allocations: 62)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 10ms (Views: 9.0ms | ActiveRecord: 0.0ms | Allocations: 4071)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-12-07 14:28:56 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.0ms | Allocations: 15)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 1.1ms | Allocations: 421)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 10ms (Views: 9.4ms | ActiveRecord: 0.0ms | Allocations: 4634)


Started GET "/users/sign_up" for 127.0.0.1 at 2020-12-07 14:28:57 +0300
Started GET "/users/sign_up" for 127.0.0.1 at 2020-12-07 14:28:58 +0300
Processing by Devise::RegistrationsController#new as HTML
Processing by Devise::RegistrationsController#new as HTML
  Rendering devise/registrations/new.html.erb within layouts/application
  Rendering devise/registrations/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.1ms | Allocations: 15)
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.0ms | Allocations: 15)
  Rendered devise/registrations/new.html.erb within layouts/application (Duration: 3.2ms | Allocations: 963)
  Rendered devise/registrations/new.html.erb within layouts/application (Duration: 3.6ms | Allocations: 1254)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 20ms (Views: 18.6ms | ActiveRecord: 0.0ms | Allocations: 8610)


[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 26ms (Views: 25.0ms | ActiveRecord: 0.0ms | Allocations: 11077)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-12-07 14:29:03 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.0ms | Allocations: 15)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 1.0ms | Allocations: 420)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 13ms (Views: 11.8ms | ActiveRecord: 0.0ms | Allocations: 4626)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-12-07 14:30:40 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.1ms | Allocations: 15)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 1.3ms | Allocations: 412)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 11ms (Views: 9.7ms | ActiveRecord: 0.0ms | Allocations: 4601)


Started GET "/users/sign_up" for 127.0.0.1 at 2020-12-07 14:30:46 +0300
Processing by Devise::RegistrationsController#new as HTML
  Rendering devise/registrations/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.0ms | Allocations: 15)
  Rendered devise/registrations/new.html.erb within layouts/application (Duration: 1.0ms | Allocations: 461)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 9ms (Views: 8.0ms | ActiveRecord: 0.0ms | Allocations: 4593)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-12-07 14:30:47 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.0ms | Allocations: 15)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 1.1ms | Allocations: 412)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 11ms (Views: 9.8ms | ActiveRecord: 0.0ms | Allocations: 4604)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-12-07 14:33:26 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.1ms | Allocations: 15)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 1.2ms | Allocations: 412)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 1859ms (Views: 1858.0ms | ActiveRecord: 0.0ms | Allocations: 15416)


Started GET "/users/sign_up" for 127.0.0.1 at 2020-12-07 14:33:32 +0300
Processing by Devise::RegistrationsController#new as HTML
  Rendering devise/registrations/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.0ms | Allocations: 15)
  Rendered devise/registrations/new.html.erb within layouts/application (Duration: 1.1ms | Allocations: 461)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 9ms (Views: 7.7ms | ActiveRecord: 0.0ms | Allocations: 4375)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-12-07 14:33:34 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.0ms | Allocations: 15)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 1.0ms | Allocations: 412)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 11ms (Views: 9.7ms | ActiveRecord: 0.0ms | Allocations: 4396)


Started GET "/users/sign_up" for 127.0.0.1 at 2020-12-07 14:33:39 +0300
Processing by Devise::RegistrationsController#new as HTML
  Rendering devise/registrations/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.0ms | Allocations: 15)
  Rendered devise/registrations/new.html.erb within layouts/application (Duration: 1.1ms | Allocations: 461)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 12ms (Views: 10.6ms | ActiveRecord: 0.0ms | Allocations: 4377)


Started POST "/users" for 127.0.0.1 at 2020-12-07 14:33:54 +0300
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"authenticity_token"=>"OcOBlyg4OfhpEMnORK3prtG5wXCx+EFZ2RmnuLfypx7Bmfm9W966DwIn17+7Qi6rbij4/FtosDwgcinj5EN0tg==", "user"=>{"email"=>"new@hyan", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Register"}
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "new@hyan"], ["LIMIT", 1]]
  [1m[36mUser Create (34.6ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "email", "encrypted_password") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2020-12-07 11:33:55.267321"], ["updated_at", "2020-12-07 11:33:55.267321"], ["email", "new@hyan"], ["encrypted_password", "$2a$12$E22FxShrARw3OLSl8pKUs.V9Kn2GRwxMpLkm5E7EvyBsG4zV77Mli"]]
  [1m[35m (12.8ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/user
Completed 302 Found in 408ms (ActiveRecord: 49.3ms | Allocations: 7647)


Started GET "/user" for 127.0.0.1 at 2020-12-07 14:33:55 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.4ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 7]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 7]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 9.2ms | Allocations: 3039)
Completed 500 Internal Server Error in 18ms (ActiveRecord: 2.5ms | Allocations: 5818)


  
ActionView::Template::Error (undefined method `operation_type' for nil:NilClass):
    57:             <%2.times do |i|%>
    58:               <%record = @record[@record.count - i - 1 ] %>
    59:               <tr>
    60:               <% if record.operation_type == 'Deposit'%>
    61:               
    62:               <td><span class="deposit" ><%=record.operation_type%>:</span></td>
    63:                 <td><span class="deposit" >+$<%=record.amount%></span></td>
  
app/views/user/index.html.erb:60
app/views/user/index.html.erb:57:in `times'
app/views/user/index.html.erb:57
Started GET "/user" for 127.0.0.1 at 2020-12-07 14:35:51 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (1.0ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 7]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (1.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 7]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 7.4ms | Allocations: 3024)
Completed 500 Internal Server Error in 14ms (ActiveRecord: 3.2ms | Allocations: 5644)


  
ActionView::Template::Error (undefined method `operation_type' for nil:NilClass):
    57:             <%2.times do |i|%>
    58:               <%record = @record[@record.count - i - 1 ] %>
    59:               <tr>
    60:               <%if record.operation_type ! = nil%>
    61:               <% if record.operation_type == 'Deposit'%>
    62:               
    63:               <td><span class="deposit" ><%=record.operation_type%>:</span></td>
  
app/views/user/index.html.erb:60
app/views/user/index.html.erb:57:in `times'
app/views/user/index.html.erb:57
Started GET "/user" for 127.0.0.1 at 2020-12-07 14:35:53 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  Rendered user/index.html.erb within layouts/application (Duration: 1.5ms | Allocations: 1649)
Completed 500 Internal Server Error in 10ms (ActiveRecord: 1.4ms | Allocations: 5111)


  
ActionView::SyntaxErrorInTemplate (Encountered a syntax error while rendering template: check <html>

<head>
  <title>CuteBank</title>
  <link rel="preconnect" href="https://fonts.gstatic.com">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet">
</head>

<body>
  <div id="content">
    <div class="fon-content">



      <div class="do_balance">
        <div class="input_balance">
          <%= form_for :user, :url => {:controller => :user, :action => :index} do |f| %>
            <% if @user.errors.any? %>
              <% @user.errors.full_messages.each do |msg| %>
                <div class= "alertUser ">
                  <%= msg%>
                </div>
              <% end %>
            <% end %>
            <p >
              <%= f.text_field :current_balance, :placeholder => 'Input value:', :class => 'input_monay' %>
            </p>

            <p >
              <%= f.submit 'Deposit', :class => 'submit-deposit' %>
            </p>

            <p >
              <%= f.submit 'Withdraw', :class => 'submit-withdraw' %>
            </p>

          <%end%>
        </div>
      


        <div class="balance">
        
        <div class="right_block_balance">
        <span class="text-balance">Balance:</span><br>
        <span class="value-balance">$<%=  @user.current_balance%></span>
        </div>



        <div class="Latest_operations">
        <br><span class="latest-operation">Latest operations:</span>


        <table>
          <%if @record !=nil%>
            <%2.times do |i|%>
              <%record = @record[@record.count - i - 1 ] %>
              <tr>
              <%if record.operation_type ! = nil%>
              <% if record.operation_type == 'Deposit'%>
              
              <td><span class="deposit" ><%=record.operation_type%>:</span></td>
                <td><span class="deposit" >+$<%=record.amount%></span></td>
                
                
                <%else%>
                
                <td><span class="withdraw"><%=record.operation_type%>:</span></td>
                <td><span class="withdraw">-$<%=record.amount%></span></td>
                <%end%>
              <%end%>
              </tr>    
            <%end%>
          <% end %>
          </table>
          </div>

          </div>
</div>




        <div class="operation_balance">
          <table>
          <tr>
            <th>Operation</th>
            <th>Amount</th>
            <th>Date</th>
            <th>Time</th>
            <th>Balance</th>
          </tr>
            <%if @record !=nil%>
              <%@record.each do |item|%>
                <tr>
                <td><%=item.operation_type%></td>
                <td>+<%=item.amount%></td>
                <%datetime = item.created_at.to_s.dup.force_encoding("UTF-8")%>
                <% date = datetime.strip.split(' ')[0]%>
                <% time = datetime.strip.split(' ')[1]%>
                <td><%=date%></td>
                <td><%=time%></td>
                <td><%=item.balance_after%></td>
                </tr>
              <%end%>
            <% end %>
            </table>
        </div>




      </div>
    </div>
</body>

</html>
):
1:    <html>
2:    
3:    <head>
4:      <title>CuteBank</title>
5:      <link rel="preconnect" href="https://fonts.gstatic.com">
6:      <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300&display=swap" rel="stylesheet">
7:    </head>
8:    
9:    <body>
10:      <div id="content">
11:        <div class="fon-content">
12:    
13:    
14:    
15:          <div class="do_balance">
16:            <div class="input_balance">
17:              <%= form_for :user, :url => {:controller => :user, :action => :index} do |f| %>
18:                <% if @user.errors.any? %>
19:                  <% @user.errors.full_messages.each do |msg| %>
20:                    <div class= "alertUser ">
21:                      <%= msg%>
22:                    </div>
23:                  <% end %>
24:                <% end %>
25:                <p >
26:                  <%= f.text_field :current_balance, :placeholder => 'Input value:', :class => 'input_monay' %>
27:                </p>
28:    
29:                <p >
30:                  <%= f.submit 'Deposit', :class => 'submit-deposit' %>
31:                </p>
32:    
33:                <p >
34:                  <%= f.submit 'Withdraw', :class => 'submit-withdraw' %>
35:                </p>
36:    
37:              <%end%>
38:            </div>
39:          
40:    
41:    
42:            <div class="balance">
43:            
44:            <div class="right_block_balance">
45:            <span class="text-balance">Balance:</span><br>
46:            <span class="value-balance">$<%=  @user.current_balance%></span>
47:            </div>
48:    
49:    
50:    
51:            <div class="Latest_operations">
52:            <br><span class="latest-operation">Latest operations:</span>
53:    
54:    
55:            <table>
56:              <%if @record !=nil%>
57:                <%2.times do |i|%>
58:                  <%record = @record[@record.count - i - 1 ] %>
59:                  <tr>
60:                  <%if record.operation_type ! = nil%>
61:                  <% if record.operation_type == 'Deposit'%>
62:                  
63:                  <td><span class="deposit" ><%=record.operation_type%>:</span></td>
64:                    <td><span class="deposit" >+$<%=record.amount%></span></td>
65:                    
66:                    
67:                    <%else%>
68:                    
69:                    <td><span class="withdraw"><%=record.operation_type%>:</span></td>
70:                    <td><span class="withdraw">-$<%=record.amount%></span></td>
71:                    <%end%>
72:                  <%end%>
73:                  </tr>    
74:                <%end%>
75:              <% end %>
76:              </table>
77:              </div>
78:    
79:              </div>
80:    </div>
81:    
82:    
83:    
84:    
85:            <div class="operation_balance">
86:              <table>
87:              <tr>
88:                <th>Operation</th>
89:                <th>Amount</th>
90:                <th>Date</th>
91:                <th>Time</th>
92:                <th>Balance</th>
93:              </tr>
94:                <%if @record !=nil%>
95:                  <%@record.each do |item|%>
96:                    <tr>
97:                    <td><%=item.operation_type%></td>
98:                    <td>+<%=item.amount%></td>
99:                    <%datetime = item.created_at.to_s.dup.force_encoding("UTF-8")%>
100:                    <% date = datetime.strip.split(' ')[0]%>
101:                    <% time = datetime.strip.split(' ')[1]%>
102:                    <td><%=date%></td>
103:                    <td><%=time%></td>
104:                    <td><%=item.balance_after%></td>
105:                    </tr>
106:                  <%end%>
107:                <% end %>
108:                </table>
109:            </div>
110:    
111:    
112:    
113:    
114:          </div>
115:        </div>
116:    </body>
117:    
118:    </html>
  
app/views/user/index.html.erb:60: syntax error, unexpected '='
app/views/user/index.html.erb:120: syntax error, unexpected `end', expecting end-of-input
app/views/user/index.html.erb:60: syntax error, unexpected '='
app/views/user/index.html.erb:120: syntax error, unexpected `end', expecting end-of-input
app/views/user/index.html.erb:60: syntax error, unexpected '='
app/views/user/index.html.erb:120: syntax error, unexpected `end', expecting end-of-input
app/views/user/index.html.erb:60: syntax error, unexpected '='
app/views/user/index.html.erb:120: syntax error, unexpected `end', expecting end-of-input
app/views/user/index.html.erb:60: syntax error, unexpected '='
app/views/user/index.html.erb:120: syntax error, unexpected `end', expecting end-of-input
app/views/user/index.html.erb:60: syntax error, unexpected '='
app/views/user/index.html.erb:120: syntax error, unexpected `end', expecting end-of-input
Started GET "/user" for 127.0.0.1 at 2020-12-07 14:36:12 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.4ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 7]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 7]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 9.8ms | Allocations: 3778)
Completed 500 Internal Server Error in 19ms (ActiveRecord: 2.9ms | Allocations: 7230)


  
ActionView::Template::Error (undefined method `operation_type' for nil:NilClass):
    57:             <%2.times do |i|%>
    58:               <%record = @record[@record.count - i - 1 ] %>
    59:               <tr>
    60:               <%if record.operation_type != nil%>
    61:               <% if record.operation_type == 'Deposit'%>
    62:               
    63:               <td><span class="deposit" ><%=record.operation_type%>:</span></td>
  
app/views/user/index.html.erb:60
app/views/user/index.html.erb:57:in `times'
app/views/user/index.html.erb:57
Started GET "/user" for 127.0.0.1 at 2020-12-07 14:36:34 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (3.0ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 7]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (1.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 7]]
  ‚Ü≥ app/views/user/index.html.erb:58
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 7]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 16.7ms | Allocations: 2944)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 39ms (Views: 25.9ms | ActiveRecord: 5.4ms | Allocations: 10046)


Started POST "/user" for 127.0.0.1 at 2020-12-07 14:36:44 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"m+6YkmOtJ+8kxprqQSEVOBr3LfMaRMQ9u0upSlu+ETg9oaml31JWtpxJBttxkkCN5gGkuURr0pjbiaaQxBSbQw==", "user"=>{"current_balance"=>"10"}, "commit"=>"Deposit"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:28:in `deposit'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "current_balance" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["current_balance", 10.0], ["updated_at", "2020-12-07 11:36:44.959737"], ["id", 7]]
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[35m (1957.3ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mCashMachine Load (0.6ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:7:in `add_cash'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[36mCashMachine Update (0.5ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 34343.0], ["updated_at", "2020-12-07 11:36:46.926828"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[35m (18.9ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
  [1m[36mUsersHistoryRecord Create (1.1ms)[0m  [1m[32mINSERT INTO "users_history_records" ("operation_type", "amount", "balance_after", "created_at", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["operation_type", "Deposit"], ["amount", 10.0], ["balance_after", 10.0], ["created_at", "2020-12-07 11:36:46.953204"], ["updated_at", "2020-12-07 11:36:46.953204"], ["user_id", 7]]
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
  [1m[35m (48.2ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
Redirected to http://localhost:3000/user
Completed 302 Found in 2059ms (ActiveRecord: 2028.5ms | Allocations: 10768)


Started GET "/user" for 127.0.0.1 at 2020-12-07 14:36:47 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.7ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 7]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 7]]
  ‚Ü≥ app/views/user/index.html.erb:58
  [1m[35mCACHE  (0.1ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 7]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 5.8ms | Allocations: 2251)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 18ms (Views: 10.8ms | ActiveRecord: 2.5ms | Allocations: 8113)


Started POST "/user" for 127.0.0.1 at 2020-12-07 14:37:08 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"7sX3hT10jJ+NnzptYDeAAjyBbnm5At1jufPVwzrUUCZIisaygYv9xjUQplxQhNW3wHfnM+cty8bZMdoZpX7aXQ==", "user"=>{"current_balance"=>"10000"}, "commit"=>"Deposit"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:28:in `deposit'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "current_balance" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["current_balance", 10010.0], ["updated_at", "2020-12-07 11:37:08.388490"], ["id", 7]]
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[35m (80.5ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mCashMachine Load (0.5ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:7:in `add_cash'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[36mCashMachine Update (2.4ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 44343.0], ["updated_at", "2020-12-07 11:37:08.477561"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[35m (26.0ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
  [1m[36mUsersHistoryRecord Create (1.0ms)[0m  [1m[32mINSERT INTO "users_history_records" ("operation_type", "amount", "balance_after", "created_at", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["operation_type", "Deposit"], ["amount", 10000.0], ["balance_after", 10010.0], ["created_at", "2020-12-07 11:37:08.511529"], ["updated_at", "2020-12-07 11:37:08.511529"], ["user_id", 7]]
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
  [1m[35m (58.9ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
Redirected to http://localhost:3000/user
Completed 302 Found in 197ms (ActiveRecord: 171.7ms | Allocations: 10943)


Started GET "/user" for 127.0.0.1 at 2020-12-07 14:37:08 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (1.3ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 7]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (2.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 7]]
  ‚Ü≥ app/views/user/index.html.erb:58
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 7]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 9.7ms | Allocations: 2300)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 21ms (Views: 12.0ms | ActiveRecord: 4.5ms | Allocations: 8141)


Started POST "/user" for 127.0.0.1 at 2020-12-07 14:37:12 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"TM3+PtKFKHYVtJKG68sKXhk2XrBbrsrpq5F+5iY6stnqgs8JbnpZL607DrfbeF/r5cDX+gWB3EzLU3E8uZA4og==", "user"=>{"current_balance"=>"111"}, "commit"=>"Withdraw"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mUser Load (2.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:42:in `withdraw'
  [1m[36mCashMachine Load (2.5ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:16:in `cash_available?'
  [1m[35m (1.3ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:24:in `cash_available?'
  [1m[36mCashMachine Update (1.6ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 44232.0], ["updated_at", "2020-12-07 11:37:12.280055"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:24:in `cash_available?'
  [1m[35m (698.4ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:24:in `cash_available?'
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/user.rb:27:in `withdraw'
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "current_balance" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["current_balance", 9899.0], ["updated_at", "2020-12-07 11:37:12.986130"], ["id", 7]]
  ‚Ü≥ app/models/user.rb:27:in `withdraw'
  [1m[35m (107.4ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/user.rb:27:in `withdraw'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/controllers/user_controller.rb:47:in `withdraw'
  [1m[36mUsersHistoryRecord Create (0.8ms)[0m  [1m[32mINSERT INTO "users_history_records" ("operation_type", "amount", "balance_after", "created_at", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["operation_type", "Withdraw"], ["amount", 111.0], ["balance_after", 9899.0], ["created_at", "2020-12-07 11:37:13.101618"], ["updated_at", "2020-12-07 11:37:13.101618"], ["user_id", 7]]
  ‚Ü≥ app/controllers/user_controller.rb:47:in `withdraw'
  [1m[35m (23.9ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/controllers/user_controller.rb:47:in `withdraw'
Redirected to http://localhost:3000/user
Completed 302 Found in 865ms (ActiveRecord: 839.9ms | Allocations: 10744)


Started GET "/user" for 127.0.0.1 at 2020-12-07 14:37:13 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (1.0ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 7]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (1.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 7]]
  ‚Ü≥ app/views/user/index.html.erb:58
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 7]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 8.5ms | Allocations: 2343)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 20ms (Views: 12.4ms | ActiveRecord: 3.4ms | Allocations: 8198)


Started POST "/user" for 127.0.0.1 at 2020-12-07 14:37:18 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"jIZs6pFWXKrEYAoy6hWnT9QhfpyMBTUKdgXhPVO1GxsqyV3dLakt83zvlgPapvL6KNf31tIqI68Wx+7nzB+RYA==", "user"=>{"current_balance"=>"111"}, "commit"=>"Withdraw"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mUser Load (2.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:42:in `withdraw'
  [1m[36mCashMachine Load (0.9ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:16:in `cash_available?'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:24:in `cash_available?'
  [1m[36mCashMachine Update (0.4ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 44121.0], ["updated_at", "2020-12-07 11:37:18.589544"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:24:in `cash_available?'
  [1m[35m (1750.3ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:24:in `cash_available?'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/user.rb:27:in `withdraw'
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "current_balance" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["current_balance", 9788.0], ["updated_at", "2020-12-07 11:37:20.345280"], ["id", 7]]
  ‚Ü≥ app/models/user.rb:27:in `withdraw'
  [1m[35m (37.0ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/user.rb:27:in `withdraw'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/controllers/user_controller.rb:47:in `withdraw'
  [1m[36mUsersHistoryRecord Create (1.3ms)[0m  [1m[32mINSERT INTO "users_history_records" ("operation_type", "amount", "balance_after", "created_at", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["operation_type", "Withdraw"], ["amount", 111.0], ["balance_after", 9788.0], ["created_at", "2020-12-07 11:37:20.390019"], ["updated_at", "2020-12-07 11:37:20.390019"], ["user_id", 7]]
  ‚Ü≥ app/controllers/user_controller.rb:47:in `withdraw'
  [1m[35m (37.8ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/controllers/user_controller.rb:47:in `withdraw'
Redirected to http://localhost:3000/user
Completed 302 Found in 1856ms (ActiveRecord: 1831.5ms | Allocations: 10750)


Started GET "/user" for 127.0.0.1 at 2020-12-07 14:37:20 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.3ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 7]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 7]]
  ‚Ü≥ app/views/user/index.html.erb:58
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 7]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 5.9ms | Allocations: 2392)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 20ms (Views: 12.9ms | ActiveRecord: 2.2ms | Allocations: 8265)


Started DELETE "/users/sign_out" for 127.0.0.1 at 2020-12-07 14:37:44 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"2HuTxNy97o2IlPTfKC7Tuh/dH1ms/46GQxzZK6Tj/oJ+NKLzYEKf1DAbaO4YnYYP4yuWE/LQmCMj3tbxO0l0+Q=="}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 7], ["LIMIT", 1]]
Redirected to http://localhost:3000/main
Completed 302 Found in 5ms (ActiveRecord: 0.3ms | Allocations: 2173)


Started GET "/main" for 127.0.0.1 at 2020-12-07 14:37:44 +0300
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 2.3ms | Allocations: 198)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 13ms (Views: 11.6ms | ActiveRecord: 0.0ms | Allocations: 4646)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-12-07 14:37:46 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.4ms | Allocations: 151)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 2.4ms | Allocations: 938)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 18ms (Views: 16.5ms | ActiveRecord: 0.0ms | Allocations: 5970)


Started POST "/users/sign_in" for 127.0.0.1 at 2020-12-07 14:37:53 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"AMbAfMDSAzv+jS3RSkoKfEZZjS3xVy13On6T6srI/ags+E+Zw93RapgG3ygiCMeeGRtsqWlP6twyGJ+x51Rp2A==", "user"=>{"email"=>"admin@test.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "admin@test.com"], ["LIMIT", 1]]
Redirected to http://localhost:3000/user
Completed 302 Found in 350ms (ActiveRecord: 0.6ms | Allocations: 3777)


Started GET "/user" for 127.0.0.1 at 2020-12-07 14:37:54 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
Redirected to http://localhost:3000/admin
Filter chain halted as :check_if_admin rendered or redirected
Completed 302 Found in 6ms (ActiveRecord: 0.3ms | Allocations: 1834)


Started GET "/admin" for 127.0.0.1 at 2020-12-07 14:37:54 +0300
Processing by AdminController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mCashMachine Load (0.4ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/admin_controller.rb:8:in `index'
  Rendering admin/index.html.erb within layouts/application
  Rendered admin/index.html.erb within layouts/application (Duration: 1.6ms | Allocations: 584)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 17ms (Views: 10.2ms | ActiveRecord: 0.8ms | Allocations: 6932)


Started POST "/admin" for 127.0.0.1 at 2020-12-07 14:38:00 +0300
Processing by AdminController#create as HTML
  Parameters: {"authenticity_token"=>"+vAFPPzEyxbOvfE+QH24E6jlfFgEcZdngZCq90Y2y5m49H5I0Pi5EOCd5d3M/UPgZzlYiWNhzTsB7NE4osbgSw==", "admin"=>{"cash_amount"=>"11"}, "commit"=>"Submit"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mCashMachine Load (1.6ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/admin_controller.rb:12:in `create'
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:34:in `update_cash'
  [1m[36mCashMachine Update (1.4ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 11.0], ["updated_at", "2020-12-07 11:38:00.385364"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:34:in `update_cash'
  [1m[35m (383.4ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:34:in `update_cash'
  Rendering admin/index.html.erb within layouts/application
  Rendered admin/index.html.erb within layouts/application (Duration: 0.9ms | Allocations: 257)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 408ms (Views: 10.5ms | ActiveRecord: 388.1ms | Allocations: 8267)


Started POST "/admin" for 127.0.0.1 at 2020-12-07 14:38:02 +0300
Processing by AdminController#create as HTML
  Parameters: {"authenticity_token"=>"1eCMI2XIQPzhZYN90HpmaYptvLwTPqkow4s2HiJx3CKX5PdXSfQy+s9Fl55c+p2aRbGYbXQu83RD903RxoH38A==", "admin"=>{"cash_amount"=>"0"}, "commit"=>"Submit"}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mCashMachine Load (2.4ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/admin_controller.rb:12:in `create'
  [1m[35m (2.1ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:34:in `update_cash'
  [1m[36mCashMachine Update (0.5ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 0.0], ["updated_at", "2020-12-07 11:38:02.631043"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:34:in `update_cash'
  [1m[35m (642.2ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:34:in `update_cash'
  Rendering admin/index.html.erb within layouts/application
  Rendered admin/index.html.erb within layouts/application (Duration: 1.2ms | Allocations: 257)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 667ms (Views: 10.2ms | ActiveRecord: 647.5ms | Allocations: 8207)


Started POST "/admin" for 127.0.0.1 at 2020-12-07 14:38:08 +0300
Processing by AdminController#create as HTML
  Parameters: {"authenticity_token"=>"c/dXB+P75MhJ8pwi/P4DQQvaR7gMBZZa25IEe0O6jk4x8yxzz8eWzmfSiMFwfviyxAZjaWsVzAZb7n+0p0qlnA==", "admin"=>{"cash_amount"=>"4000"}, "commit"=>"Submit"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  [1m[36mCashMachine Load (0.9ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/admin_controller.rb:12:in `create'
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:34:in `update_cash'
  [1m[36mCashMachine Update (0.5ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 4000.0], ["updated_at", "2020-12-07 11:38:08.456907"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:34:in `update_cash'
  [1m[35m (70.4ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:34:in `update_cash'
  Rendering admin/index.html.erb within layouts/application
  Rendered admin/index.html.erb within layouts/application (Duration: 1.4ms | Allocations: 257)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 92ms (Views: 9.7ms | ActiveRecord: 73.3ms | Allocations: 8199)


Started GET "/about" for 127.0.0.1 at 2020-12-07 14:38:11 +0300
Processing by AboutController#index as HTML
  Rendering about/index.html.erb within layouts/application
  Rendered about/index.html.erb within layouts/application (Duration: 0.4ms | Allocations: 114)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ‚Ü≥ app/views/layouts/application.html.erb:12
Completed 200 OK in 14ms (Views: 12.0ms | ActiveRecord: 0.4ms | Allocations: 5383)


Started GET "/about" for 127.0.0.1 at 2020-12-07 14:38:14 +0300
Processing by AboutController#index as HTML
  Rendering about/index.html.erb within layouts/application
  Rendered about/index.html.erb within layouts/application (Duration: 0.0ms | Allocations: 4)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
  ‚Ü≥ app/views/layouts/application.html.erb:12
Completed 200 OK in 12ms (Views: 10.7ms | ActiveRecord: 0.6ms | Allocations: 4591)


Started DELETE "/users/sign_out" for 127.0.0.1 at 2020-12-07 14:38:15 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"zxf+u+anoiv+ni0UhPuLF/y5LccqSrnsQ5la+TMMhO2NE4XPypvQLdC+OfcIe3DkM2UJFk1a47DD5SE21/yvPw=="}
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 5], ["LIMIT", 1]]
Redirected to http://localhost:3000/main
Completed 302 Found in 5ms (ActiveRecord: 0.3ms | Allocations: 2198)


Started GET "/main" for 127.0.0.1 at 2020-12-07 14:38:15 +0300
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 0.2ms | Allocations: 62)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 9ms (Views: 7.9ms | ActiveRecord: 0.0ms | Allocations: 3874)


Started GET "/users/sign_up" for 127.0.0.1 at 2020-12-07 14:38:19 +0300
Processing by Devise::RegistrationsController#new as HTML
  Rendering devise/registrations/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.1ms | Allocations: 15)
  Rendered devise/registrations/new.html.erb within layouts/application (Duration: 2.0ms | Allocations: 738)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 15ms (Views: 13.6ms | ActiveRecord: 0.0ms | Allocations: 5321)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-12-07 14:38:22 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.1ms | Allocations: 15)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 1.3ms | Allocations: 420)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 15ms (Views: 13.8ms | ActiveRecord: 0.0ms | Allocations: 4409)


Started GET "/" for 127.0.0.1 at 2020-12-07 16:13:46 +0300
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 2.2ms | Allocations: 341)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 71ms (Views: 60.5ms | ActiveRecord: 0.0ms | Allocations: 25973)


Started GET "/users/sign_in" for 127.0.0.1 at 2020-12-07 16:13:47 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.5ms | Allocations: 156)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 7.4ms | Allocations: 1415)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 56ms (Views: 19.3ms | ActiveRecord: 7.0ms | Allocations: 12532)


Started POST "/users/sign_in" for 127.0.0.1 at 2020-12-07 16:13:53 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"rtUvhu4rivQYojReUYzFMdtrmRtMbZ+noTfVS/NQpyJ8b1u46hWiYGNn/lSXDotWPoFh+harGPYvAWvWjwwb6Q==", "user"=>{"email"=>"fordgt260@mail.ru", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "fordgt260@mail.ru"], ["LIMIT", 1]]
Redirected to http://localhost:3000/user
Completed 302 Found in 542ms (ActiveRecord: 4.1ms | Allocations: 201962)


Started GET "/user" for 127.0.0.1 at 2020-12-07 16:13:54 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.8ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (0.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:58
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 23.9ms | Allocations: 9665)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 46ms (Views: 27.2ms | ActiveRecord: 6.2ms | Allocations: 19187)


<<<<<<< HEAD
=======
  [1m[35m (1.5ms)[0m  [1m[35mCREATE DATABASE "cutebank_development" ENCODING = 'unicode'[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE DATABASE "cutebank_test" ENCODING = 'unicode'[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4489605530800437810)[0m
  [1m[35m (3.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (20.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4489605530800437810)[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4489605530800437810)[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4489605530800437810)[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/" for ::1 at 2020-12-07 17:17:44 +0300
  [1m[35m (2.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MainController#index as HTML
  [1m[36mUser Load (4.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/main_controller.rb:12:in `check_user'
Redirected to http://localhost:3000/user
Filter chain halted as :check_user rendered or redirected
Completed 302 Found in 49ms (ActiveRecord: 14.1ms | Allocations: 8294)


Started GET "/user" for ::1 at 2020-12-07 17:17:44 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (8.3ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (19.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:58
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 70.3ms | Allocations: 8182)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 497ms (Views: 404.7ms | ActiveRecord: 32.6ms | Allocations: 78688)


Started POST "/user" for ::1 at 2020-12-07 17:17:54 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"/WFjm5E9h8I6MTPcJvWfaJJ8luZZIDiIj8/oClmaGm6bn2A7x7X/xfC0mWXwyCB8I4/mtOrRf5Zl28Vb5IdvmA==", "user"=>{"current_balance"=>"5000.0"}, "commit"=>"Deposit"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:28:in `deposit'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mUser Update (8.1ms)[0m  [1m[33mUPDATE "users" SET "current_balance" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["current_balance", 5050.0], ["updated_at", "2020-12-07 14:17:54.635512"], ["id", 3]]
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mCashMachine Load (15.4ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:7:in `add_cash'
  [1m[35m (2.5ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[36mCashMachine Update (0.5ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 1005050.0], ["updated_at", "2020-12-07 14:17:54.696311"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
  [1m[36mUsersHistoryRecord Create (3.6ms)[0m  [1m[32mINSERT INTO "users_history_records" ("operation_type", "amount", "balance_after", "created_at", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["operation_type", "Deposit"], ["amount", 5000.0], ["balance_after", 5050.0], ["created_at", "2020-12-07 14:17:54.706201"], ["updated_at", "2020-12-07 14:17:54.706201"], ["user_id", 3]]
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
Redirected to http://localhost:3000/user
Completed 302 Found in 92ms (ActiveRecord: 41.0ms | Allocations: 14227)


Started GET "/user" for ::1 at 2020-12-07 17:17:54 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.4ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:58
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 7.9ms | Allocations: 2353)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 31ms (Views: 18.1ms | ActiveRecord: 1.8ms | Allocations: 8903)


Started POST "/user" for ::1 at 2020-12-07 17:17:59 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"WWHC4rLcNceKP0DwziXuSj6cbcLCRtnTeXmb9Kb+rjI/n8FC5FRNwEC66kkYGFFej28dkHG3ns2TbbalG+PbxA==", "user"=>{"current_balance"=>"500.0"}, "commit"=>"Withdraw"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:42:in `withdraw'
  [1m[36mCashMachine Load (1.2ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:16:in `cash_available?'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:24:in `cash_available?'
  [1m[36mCashMachine Update (0.6ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 1004550.0], ["updated_at", "2020-12-07 14:17:59.564760"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:24:in `cash_available?'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:24:in `cash_available?'
  [1m[35m (1.5ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/user.rb:27:in `withdraw'
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_balance" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["current_balance", 4550.0], ["updated_at", "2020-12-07 14:17:59.577213"], ["id", 3]]
  ‚Ü≥ app/models/user.rb:27:in `withdraw'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/user.rb:27:in `withdraw'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/controllers/user_controller.rb:47:in `withdraw'
  [1m[36mUsersHistoryRecord Create (1.3ms)[0m  [1m[32mINSERT INTO "users_history_records" ("operation_type", "amount", "balance_after", "created_at", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["operation_type", "Withdraw"], ["amount", 500.0], ["balance_after", 4550.0], ["created_at", "2020-12-07 14:17:59.584677"], ["updated_at", "2020-12-07 14:17:59.584677"], ["user_id", 3]]
  ‚Ü≥ app/controllers/user_controller.rb:47:in `withdraw'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/controllers/user_controller.rb:47:in `withdraw'
Redirected to http://localhost:3000/user
Completed 302 Found in 52ms (ActiveRecord: 8.4ms | Allocations: 10811)


Started GET "/user" for ::1 at 2020-12-07 17:17:59 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.4ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:58
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 3]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 10.5ms | Allocations: 2394)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 26ms (Views: 18.5ms | ActiveRecord: 1.9ms | Allocations: 8900)


Started GET "/about" for ::1 at 2020-12-07 17:18:05 +0300
Processing by AboutController#index as HTML
  Rendering about/index.html.erb within layouts/application
  Rendered about/index.html.erb within layouts/application (Duration: 0.5ms | Allocations: 121)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
  ‚Ü≥ app/views/layouts/application.html.erb:12
Completed 200 OK in 18ms (Views: 15.5ms | ActiveRecord: 1.3ms | Allocations: 6227)


Started DELETE "/users/sign_out" for ::1 at 2020-12-07 17:18:43 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"yZ4mle6EPkBH8jvI1xUaX233DjXek82gAy9Lj6jpwyavYCU1uAxGR413kXEBKKVL3AR+Z21iir7pO2beFfS20A=="}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 3], ["LIMIT", 1]]
Redirected to http://localhost:3000/main
Completed 302 Found in 1401ms (ActiveRecord: 1.5ms | Allocations: 584683)


Started GET "/main" for ::1 at 2020-12-07 17:18:45 +0300
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 0.5ms | Allocations: 211)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 13ms (Views: 10.4ms | ActiveRecord: 0.0ms | Allocations: 5346)


Started GET "/users/sign_in" for ::1 at 2020-12-07 17:19:48 +0300
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.4ms | Allocations: 156)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 7.2ms | Allocations: 1754)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 82ms (Views: 38.9ms | ActiveRecord: 5.8ms | Allocations: 20505)


Started POST "/users/sign_in" for ::1 at 2020-12-07 17:21:05 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"L6vawMOEyySTPMLeehz73S1OqAH56eoxhr+WAW8jZmG0ne6VHUZNEK5rph/XXVA1zQZZu+nrGYhgm2xRl6Pxgg==", "user"=>{"email"=>"admin@admin.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  [1m[36mUser Load (11.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "admin@admin.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 290ms (ActiveRecord: 12.1ms | Allocations: 3785)


Processing by Devise::SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"L6vawMOEyySTPMLeehz73S1OqAH56eoxhr+WAW8jZmG0ne6VHUZNEK5rph/XXVA1zQZZu+nrGYhgm2xRl6Pxgg==", "user"=>{"email"=>"admin@admin.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.0ms | Allocations: 15)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 1.0ms | Allocations: 421)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 266ms (Views: 7.9ms | ActiveRecord: 0.0ms | Allocations: 4840)


Started POST "/users/sign_in" for ::1 at 2020-12-07 17:21:30 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"sumhL2XOKrLrHZgtRR6VIpuZWJgCB/68OApHdZi29Zj+POWhLZ/1AFVbmWAjeX1Unlr5fcvGAS4w0A2YoGbnjg==", "user"=>{"email"=>"admin@admin.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "admin@admin.com"], ["LIMIT", 1]]
Redirected to http://localhost:3000/user
Completed 302 Found in 289ms (ActiveRecord: 1.7ms | Allocations: 4739)


Started GET "/user" for ::1 at 2020-12-07 17:21:30 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Redirected to http://localhost:3000/admin
Filter chain halted as :check_if_admin rendered or redirected
Completed 302 Found in 5ms (ActiveRecord: 0.7ms | Allocations: 2464)


Started GET "/admin" for ::1 at 2020-12-07 17:21:30 +0300
Processing by AdminController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCashMachine Load (0.3ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/admin_controller.rb:8:in `index'
  Rendering admin/index.html.erb within layouts/application
  Rendered admin/index.html.erb within layouts/application (Duration: 1.4ms | Allocations: 602)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 25ms (Views: 9.4ms | ActiveRecord: 5.1ms | Allocations: 10270)


Started POST "/admin" for ::1 at 2020-12-07 17:21:34 +0300
Processing by AdminController#create as HTML
  Parameters: {"authenticity_token"=>"PaPu6vGVo/dUI9NwgMvnos9OkvIPr/ock3qJetAYQy8Y4yOGeYSe312QagKAjBFGkWmt+oHS8vSI7d0oR/wwVg==", "admin"=>{"cash_amount"=>"50000"}, "commit"=>"Submit"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCashMachine Load (1.7ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/admin_controller.rb:12:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:34:in `update_cash'
  [1m[36mCashMachine Update (0.9ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 50000.0], ["updated_at", "2020-12-07 14:21:34.035776"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:34:in `update_cash'
  [1m[35m (7.5ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:34:in `update_cash'
  Rendering admin/index.html.erb within layouts/application
  Rendered admin/index.html.erb within layouts/application (Duration: 0.6ms | Allocations: 261)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 29ms (Views: 7.5ms | ActiveRecord: 11.2ms | Allocations: 9172)


Started POST "/admin" for ::1 at 2020-12-07 17:21:38 +0300
Processing by AdminController#create as HTML
  Parameters: {"authenticity_token"=>"ALjYCRQpJeIj0obTAqaU3+KeMx1RBZzraPpot8vOFEUl+BVlnDgYyiphP6EC4WI7vLkMFd94lANzbTzlXCpnPA==", "admin"=>{"cash_amount"=>"1000000"}, "commit"=>"Submit"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCashMachine Load (0.4ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/admin_controller.rb:12:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:34:in `update_cash'
  [1m[36mCashMachine Update (0.8ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 1000000.0], ["updated_at", "2020-12-07 14:21:38.352845"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:34:in `update_cash'
  [1m[35m (7.3ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:34:in `update_cash'
  Rendering admin/index.html.erb within layouts/application
  Rendered admin/index.html.erb within layouts/application (Duration: 0.7ms | Allocations: 257)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 27ms (Views: 7.6ms | ActiveRecord: 9.6ms | Allocations: 9012)


  [1m[35m (1.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (71.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "cutebank_development"[0m
  [1m[35m (32.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "cutebank_test"[0m
  [1m[35m (282.1ms)[0m  [1m[35mCREATE DATABASE "cutebank_development" ENCODING = 'unicode'[0m
  [1m[35m (85.8ms)[0m  [1m[35mCREATE DATABASE "cutebank_test" ENCODING = 'unicode'[0m
  [1m[35m (4.5ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4489605530800437810)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddCash (20201109115808)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4489605530800437810)[0m
  [1m[35m (0.6ms)[0m  [1m[35mCREATE DATABASE "cutebank_development" ENCODING = 'unicode'[0m
  [1m[35m (0.7ms)[0m  [1m[35mCREATE DATABASE "cutebank_test" ENCODING = 'unicode'[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4489605530800437810)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddCash (20201109115808)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_advisory_unlock(4489605530800437810)[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (28.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "cutebank_development"[0m
  [1m[35m (38.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "cutebank_test"[0m
  [1m[35m (206.8ms)[0m  [1m[35mCREATE DATABASE "cutebank_development" ENCODING = 'unicode'[0m
  [1m[35m (90.0ms)[0m  [1m[35mCREATE DATABASE "cutebank_test" ENCODING = 'unicode'[0m
  [1m[35m (27.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (28.6ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4489605530800437810)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to AddCash (20201109115808)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.1ms)[0m  [1m[31mROLLBACK[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4489605530800437810)[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (41.1ms)[0m  [1m[35mDROP DATABASE IF EXISTS "cutebank_development"[0m
  [1m[35m (37.4ms)[0m  [1m[35mDROP DATABASE IF EXISTS "cutebank_test"[0m
  [1m[35m (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (57.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "cutebank_development"[0m
  [1m[35m (52.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "cutebank_test"[0m
  [1m[35m (233.5ms)[0m  [1m[35mCREATE DATABASE "cutebank_development" ENCODING = 'unicode'[0m
  [1m[35m (83.9ms)[0m  [1m[35mCREATE DATABASE "cutebank_test" ENCODING = 'unicode'[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (25.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4489605530800437810)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20201023085922)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (23.3ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "login" character varying NOT NULL, "email" character varying NOT NULL, "password" character varying NOT NULL, "current_balance" float DEFAULT 0.0 NOT NULL, "user_is_admin" boolean NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023085922"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCashMachines (20201023085944)
  [1m[35m (6.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (8.7ms)[0m  [1m[35mCREATE TABLE "cash_machines" ("id" bigserial primary key, "cash_amount" float DEFAULT 100000.0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023085944"]]
  [1m[35m (9.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUsersHistoryRecords (20201023090011)
  [1m[35m (6.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (16.3ms)[0m  [1m[35mCREATE TABLE "users_history_records" ("id" bigserial primary key, "operation_type" character varying NOT NULL, "amount" float NOT NULL, "balance_after" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023090011"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddForeignKeyUserUsersHistoryRecord (20201023095833)
  [1m[35m (6.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023095833"]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDeviseToUsers (20201023101716)
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "users" DROP COLUMN "email"[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "email" character varying DEFAULT '' NOT NULL[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "encrypted_password" character varying DEFAULT '' NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ADD "reset_password_token" character varying[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ADD "reset_password_sent_at" timestamp[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "remember_created_at" timestamp[0m
  [1m[35m (10.1ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023101716"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to DeleteLoginAttribute (20201023200333)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "users" DROP COLUMN "login"[0m
  [1m[36mprimary::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023200333"]]
  [1m[35m (8.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to DeleteNotNeedpaswordGetAdminDefault (20201023200711)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "users" DROP COLUMN "password"[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "user_is_admin" TYPE boolean, ALTER COLUMN "user_is_admin" SET DEFAULT FALSE[0m
  [1m[36mprimary::SchemaMigration Create (1.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023200711"]]
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddForeignKeyUserHistoryUser (20201027162502)
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "users_history_records" ADD "user_id" bigint[0m
  [1m[35m (2.4ms)[0m  [1m[35mALTER TABLE "users_history_records" ADD CONSTRAINT "fk_rails_4e2c355ec6"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201027162502"]]
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddCashMachineOne (20201027165744)
  [1m[35m (0.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCashMachine Create (0.8ms)[0m  [1m[32mINSERT INTO "cash_machines" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2020-12-08 10:47:34.328049"], ["updated_at", "2020-12-08 10:47:34.328049"]]
  [1m[36mprimary::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201027165744"]]
  [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddCash (20201109115808)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCashMachine Create (0.6ms)[0m  [1m[32mINSERT INTO "cash_machines" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2020-12-08 10:47:34.343456"], ["updated_at", "2020-12-08 10:47:34.343456"]]
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201109115808"]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddAdminWithMigration (20201115153707)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "trueadmin@google.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("user_is_admin", "created_at", "updated_at", "email", "encrypted_password") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_is_admin", true], ["created_at", "2020-12-08 10:47:34.660267"], ["updated_at", "2020-12-08 10:47:34.660267"], ["email", "trueadmin@google.com"], ["encrypted_password", "$2a$12$LUsxzIwSXSpTg6gBQPklqOMVdbvp/BLHbXUNIwOv06DGg6ySkfigy"]]
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201115153707"]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2020-12-08 10:47:34.685218"], ["updated_at", "2020-12-08 10:47:34.685218"]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4489605530800437810)[0m
  [1m[35m (3.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/" for ::1 at 2020-12-08 13:47:58 +0300
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MainController#index as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/main_controller.rb:12:in `check_user'
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 2.5ms | Allocations: 341)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 102ms (Views: 62.9ms | ActiveRecord: 9.1ms | Allocations: 19466)


Started GET "/users/sign_in" for ::1 at 2020-12-08 13:48:01 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.8ms | Allocations: 156)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 8.1ms | Allocations: 1409)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 24ms (Views: 21.1ms | ActiveRecord: 0.0ms | Allocations: 7322)


Started POST "/users/sign_in" for ::1 at 2020-12-08 13:48:18 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"9BOOzct7CK42hnoOG/0zrDDCA4YgfYdvvED+knq2vOa2iD3Erm9mf4vzOAzNyYqH5rg0y5dByiTXf1T2I/twuA==", "user"=>{"email"=>"trueadmin@google.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "trueadmin@google.com"], ["LIMIT", 1]]
Redirected to http://localhost:3000/user
Completed 302 Found in 478ms (ActiveRecord: 2.4ms | Allocations: 201736)


Started GET "/user" for ::1 at 2020-12-08 13:48:19 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Redirected to http://localhost:3000/admin
Filter chain halted as :check_if_admin rendered or redirected
Completed 302 Found in 6ms (ActiveRecord: 0.4ms | Allocations: 2452)


Started GET "/admin" for ::1 at 2020-12-08 13:48:19 +0300
Processing by AdminController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCashMachine Load (0.8ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/admin_controller.rb:8:in `index'
  Rendering admin/index.html.erb within layouts/application
  Rendered admin/index.html.erb within layouts/application (Duration: 2.2ms | Allocations: 604)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 33ms (Views: 14.1ms | ActiveRecord: 6.3ms | Allocations: 10273)


Started POST "/admin" for ::1 at 2020-12-08 13:48:22 +0300
Processing by AdminController#create as HTML
  Parameters: {"authenticity_token"=>"KcsFEYRRpVE3OcGVmBf3tg3lYox0GdH7Rt5/aKFVOcubBXj6gcXPzLnK2adLbmCTDgj5xtyzexUGYs4rhuWKNg==", "admin"=>{"cash_amount"=>"75000"}, "commit"=>"Submit"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCashMachine Load (0.9ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/admin_controller.rb:12:in `create'
  [1m[35m (0.7ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:34:in `update_cash'
  [1m[36mCashMachine Update (2.7ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 75000.0], ["updated_at", "2020-12-08 10:48:22.441660"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:34:in `update_cash'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:34:in `update_cash'
  Rendering admin/index.html.erb within layouts/application
  Rendered admin/index.html.erb within layouts/application (Duration: 0.6ms | Allocations: 261)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 32ms (Views: 14.0ms | ActiveRecord: 5.7ms | Allocations: 8997)


Started DELETE "/users/sign_out" for ::1 at 2020-12-08 13:48:24 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"mF/Wt7cTX1ZyMKjMUx7a53NUrfmWQrn1oATIHm/P2u0qkatcsoc1y/zDsP6AZ03CcLk2sz7oExvguHldSH9pEA=="}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Redirected to http://localhost:3000/main
Completed 302 Found in 17ms (ActiveRecord: 0.4ms | Allocations: 5111)


Started GET "/main" for ::1 at 2020-12-08 13:48:24 +0300
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 0.3ms | Allocations: 63)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 11ms (Views: 9.3ms | ActiveRecord: 0.0ms | Allocations: 4509)


Started GET "/users/sign_up" for ::1 at 2020-12-08 13:48:25 +0300
Processing by Devise::RegistrationsController#new as HTML
  Rendering devise/registrations/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.1ms | Allocations: 15)
  Rendered devise/registrations/new.html.erb within layouts/application (Duration: 3.3ms | Allocations: 779)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 15ms (Views: 14.3ms | ActiveRecord: 0.0ms | Allocations: 6061)


Started POST "/users" for ::1 at 2020-12-08 13:48:39 +0300
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"authenticity_token"=>"gqaUVfYp6H+AsqBOXb1OKj8aSerTGTuayxj7jLWAV6lMMbAJuX/len/1OOOv78rd6H9PLBIz6WqBH2WnAMIjJg==", "user"=>{"email"=>"antaresloe@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Register"}
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.9ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "antaresloe@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "email", "encrypted_password") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2020-12-08 10:48:39.334304"], ["updated_at", "2020-12-08 10:48:39.334304"], ["email", "antaresloe@gmail.com"], ["encrypted_password", "$2a$12$/yfg9ZjH5m/yxlZ54/3EReKSDT.SxLGc8Flun31NB1nx36AUL/XBG"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/user
Completed 302 Found in 282ms (ActiveRecord: 3.4ms | Allocations: 7957)


Started GET "/user" for ::1 at 2020-12-08 13:48:39 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.7ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (1.2ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 10.1ms | Allocations: 3002)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 42ms (Views: 18.6ms | ActiveRecord: 6.0ms | Allocations: 13347)


Started POST "/user" for ::1 at 2020-12-08 13:48:42 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"n07tUn9HnL7tNtGV8jBdxsLlormYa6zO5q7yOcOpjAfP3uGk0YmhtxOncFa7VEgeMESynjvbecKmShi1ApKMBA==", "user"=>{"current_balance"=>"0.0"}, "commit"=>"Deposit"}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:28:in `deposit'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.5ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (1.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 9.2ms | Allocations: 2388)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 25ms (Views: 15.1ms | ActiveRecord: 3.2ms | Allocations: 9422)


Started POST "/user" for ::1 at 2020-12-08 13:48:49 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"g6e3fDgtlUyHK9wgyqldUybj5kkWQm0uK4MKMUz3U6PTN7uKluOoRXm6feODzUiL1EL2brXyuCJrZ+C9jcxToA==", "user"=>{"current_balance"=>"50000"}, "commit"=>"Deposit"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:28:in `deposit'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_balance" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["current_balance", 50000.0], ["updated_at", "2020-12-08 10:48:49.249240"], ["id", 2]]
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mCashMachine Load (0.6ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:7:in `add_cash'
  [1m[35m (3.0ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[36mCashMachine Update (0.4ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 125000.0], ["updated_at", "2020-12-08 10:48:49.261367"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[35m (1.1ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
  [1m[36mUsersHistoryRecord Create (3.7ms)[0m  [1m[32mINSERT INTO "users_history_records" ("operation_type", "amount", "balance_after", "created_at", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["operation_type", "Deposit"], ["amount", 50000.0], ["balance_after", 50000.0], ["created_at", "2020-12-08 10:48:49.285779"], ["updated_at", "2020-12-08 10:48:49.285779"], ["user_id", 2]]
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
  [1m[35m (14.0ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
Redirected to http://localhost:3000/user
Completed 302 Found in 83ms (ActiveRecord: 30.5ms | Allocations: 15027)


Started GET "/user" for ::1 at 2020-12-08 13:48:49 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (1.4ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 6.6ms | Allocations: 2259)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 21ms (Views: 12.1ms | ActiveRecord: 3.3ms | Allocations: 8779)


Started POST "/user" for ::1 at 2020-12-08 13:48:53 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"9pdUtDENgHIObHoH757jnuo23qoZFDmxJ7CExJe4ozymB1hCn8O9e/D928Sm+vZGGJfOjbqk7L1nVG5IVoOjPw==", "user"=>{"current_balance"=>"15000"}, "commit"=>"Withdraw"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:42:in `withdraw'
  [1m[36mCashMachine Load (0.5ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:16:in `cash_available?'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:24:in `cash_available?'
  [1m[36mCashMachine Update (2.1ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 110000.0], ["updated_at", "2020-12-08 10:48:53.278624"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:24:in `cash_available?'
  [1m[35m (8.1ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:24:in `cash_available?'
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/user.rb:27:in `withdraw'
  [1m[36mUser Update (1.1ms)[0m  [1m[33mUPDATE "users" SET "current_balance" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["current_balance", 35000.0], ["updated_at", "2020-12-08 10:48:53.294260"], ["id", 2]]
  ‚Ü≥ app/models/user.rb:27:in `withdraw'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/user.rb:27:in `withdraw'
  [1m[35m (1.0ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/controllers/user_controller.rb:47:in `withdraw'
  [1m[36mUsersHistoryRecord Create (1.8ms)[0m  [1m[32mINSERT INTO "users_history_records" ("operation_type", "amount", "balance_after", "created_at", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["operation_type", "Withdraw"], ["amount", 15000.0], ["balance_after", 35000.0], ["created_at", "2020-12-08 10:48:53.302917"], ["updated_at", "2020-12-08 10:48:53.302917"], ["user_id", 2]]
  ‚Ü≥ app/controllers/user_controller.rb:47:in `withdraw'
  [1m[35m (7.7ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/controllers/user_controller.rb:47:in `withdraw'
Redirected to http://localhost:3000/user
Completed 302 Found in 53ms (ActiveRecord: 24.7ms | Allocations: 10833)


Started GET "/user" for ::1 at 2020-12-08 13:48:53 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.3ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 8.1ms | Allocations: 2304)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 21ms (Views: 15.9ms | ActiveRecord: 1.4ms | Allocations: 8788)


Started GET "/user" for ::1 at 2020-12-08 13:49:01 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (1.1ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 9.2ms | Allocations: 2295)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 23ms (Views: 14.8ms | ActiveRecord: 2.4ms | Allocations: 8781)


Started GET "/user" for ::1 at 2020-12-08 13:49:03 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.5ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (1.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 7.9ms | Allocations: 2297)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 26ms (Views: 16.8ms | ActiveRecord: 3.6ms | Allocations: 8810)


Started GET "/about" for ::1 at 2020-12-08 13:49:06 +0300
Processing by AboutController#index as HTML
  Rendering about/index.html.erb within layouts/application
  Rendered about/index.html.erb within layouts/application (Duration: 0.9ms | Allocations: 119)
[Webpacker] Everything's up-to-date. Nothing to do
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/views/layouts/application.html.erb:12
Completed 200 OK in 14ms (Views: 12.3ms | ActiveRecord: 0.5ms | Allocations: 6020)


Started DELETE "/users/sign_out" for ::1 at 2020-12-08 13:49:10 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"xlFO0OSHADjWlelvpEdvcvOMMUSzTlW2jMQWmJta43OWwUImSkk9MSgESKztI3qqAS0hYxD+gLrMIPwUWmHjcA=="}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Redirected to http://localhost:3000/main
Completed 302 Found in 5ms (ActiveRecord: 0.7ms | Allocations: 2342)


Started GET "/main" for ::1 at 2020-12-08 13:49:10 +0300
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 0.3ms | Allocations: 62)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 11ms (Views: 9.5ms | ActiveRecord: 0.0ms | Allocations: 4517)


  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (43.0ms)[0m  [1m[35mDROP DATABASE IF EXISTS "cutebank_development"[0m
  [1m[35m (28.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "cutebank_test"[0m
  [1m[35m (99.9ms)[0m  [1m[35mCREATE DATABASE "cutebank_development" ENCODING = 'unicode'[0m
  [1m[35m (117.9ms)[0m  [1m[35mCREATE DATABASE "cutebank_test" ENCODING = 'unicode'[0m
  [1m[35m (4.8ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (25.5ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4489605530800437810)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20201023085922)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (24.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "login" character varying NOT NULL, "email" character varying NOT NULL, "password" character varying NOT NULL, "current_balance" float DEFAULT 0.0 NOT NULL, "user_is_admin" boolean NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.8ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023085922"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCashMachines (20201023085944)
  [1m[35m (10.0ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (16.2ms)[0m  [1m[35mCREATE TABLE "cash_machines" ("id" bigserial primary key, "cash_amount" float DEFAULT 100000.0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023085944"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUsersHistoryRecords (20201023090011)
  [1m[35m (8.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (15.7ms)[0m  [1m[35mCREATE TABLE "users_history_records" ("id" bigserial primary key, "operation_type" character varying NOT NULL, "amount" float NOT NULL, "balance_after" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023090011"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddForeignKeyUserUsersHistoryRecord (20201023095833)
  [1m[35m (11.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023095833"]]
  [1m[35m (11.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDeviseToUsers (20201023101716)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DROP COLUMN "email"[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ADD "email" character varying DEFAULT '' NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ADD "encrypted_password" character varying DEFAULT '' NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ADD "reset_password_token" character varying[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ADD "reset_password_sent_at" timestamp[0m
  [1m[35m (1.4ms)[0m  [1m[35mALTER TABLE "users" ADD "remember_created_at" timestamp[0m
  [1m[35m (15.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.4ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023101716"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to DeleteLoginAttribute (20201023200333)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DROP COLUMN "login"[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023200333"]]
  [1m[35m (11.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to DeleteNotNeedpaswordGetAdminDefault (20201023200711)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DROP COLUMN "password"[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "user_is_admin" TYPE boolean, ALTER COLUMN "user_is_admin" SET DEFAULT FALSE[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023200711"]]
  [1m[35m (8.1ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddForeignKeyUserHistoryUser (20201027162502)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users_history_records" ADD "user_id" bigint[0m
  [1m[35m (11.7ms)[0m  [1m[35mALTER TABLE "users_history_records" ADD CONSTRAINT "fk_rails_4e2c355ec6"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201027162502"]]
  [1m[35m (14.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddCash (20201109115808)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCashMachine Create (0.9ms)[0m  [1m[32mINSERT INTO "cash_machines" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2020-12-08 12:03:54.465852"], ["updated_at", "2020-12-08 12:03:54.465852"]]
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201109115808"]]
  [1m[35m (9.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddAdminWithMigration (20201115153707)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.6ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "trueadmin@google.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("user_is_admin", "created_at", "updated_at", "email", "encrypted_password") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_is_admin", true], ["created_at", "2020-12-08 12:03:54.770452"], ["updated_at", "2020-12-08 12:03:54.770452"], ["email", "trueadmin@google.com"], ["encrypted_password", "$2a$12$h5VD4FaG9wEoujXPTrMmGOkyTGlpwDBHIi8a8/LCigYE6b65O.A.G"]]
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201115153707"]]
  [1m[35m (10.7ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2020-12-08 12:03:54.795725"], ["updated_at", "2020-12-08 12:03:54.795725"]]
  [1m[35m (0.2ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4489605530800437810)[0m
  [1m[35m (1.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/user" for ::1 at 2020-12-08 15:04:08 +0300
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by UserController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Completed 401 Unauthorized in 18ms (ActiveRecord: 4.8ms | Allocations: 4001)


Started GET "/users/sign_in" for ::1 at 2020-12-08 15:04:08 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.7ms | Allocations: 156)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 6.5ms | Allocations: 1364)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 128ms (Views: 117.4ms | ActiveRecord: 0.0ms | Allocations: 29266)


Started GET "/users/sign_up" for ::1 at 2020-12-08 15:04:27 +0300
Processing by Devise::RegistrationsController#new as HTML
  Rendering devise/registrations/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.2ms | Allocations: 15)
  Rendered devise/registrations/new.html.erb within layouts/application (Duration: 2.6ms | Allocations: 780)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 12ms (Views: 10.8ms | ActiveRecord: 0.0ms | Allocations: 6050)


Started POST "/users" for ::1 at 2020-12-08 15:04:34 +0300
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"authenticity_token"=>"9WgbDWVrcCN2i+/S6Gkd5FoEO9q3b6275dEP+/UsnXf4JERfUnGeYX72viSYgLRVWQaq8IzbZtsmFLd9ejKeMA==", "user"=>{"email"=>"antaresloe@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Register"}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "antaresloe@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "email", "encrypted_password") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2020-12-08 12:04:35.156564"], ["updated_at", "2020-12-08 12:04:35.156564"], ["email", "antaresloe@gmail.com"], ["encrypted_password", "$2a$12$Vph9bpl1sTnv4VtGWEIgeeAZY5ducmmjGD7lM6UxXAzPdiQ9/M9yu"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/user
Completed 302 Found in 275ms (ActiveRecord: 2.3ms | Allocations: 9643)


Started GET "/user" for ::1 at 2020-12-08 15:04:35 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.4ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 7.1ms | Allocations: 3445)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 34ms (Views: 13.6ms | ActiveRecord: 4.3ms | Allocations: 13841)


Started POST "/user" for ::1 at 2020-12-08 15:04:42 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"Mv9F9jbfYCCFtFGGA/UaIv62rA4kaJLoTgCbzJ9EGKtRizfCWja+oJ4r6FAFZklRI+wpS15CkXKIRqfFfpYqZg==", "user"=>{"current_balance"=>"1000000"}, "commit"=>"Deposit"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:28:in `deposit'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mUser Update (0.7ms)[0m  [1m[33mUPDATE "users" SET "current_balance" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["current_balance", 1000000.0], ["updated_at", "2020-12-08 12:04:42.027360"], ["id", 2]]
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mCashMachine Load (0.4ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:7:in `add_cash'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[36mCashMachine Update (0.4ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 1100000.0], ["updated_at", "2020-12-08 12:04:42.046899"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
  [1m[36mUsersHistoryRecord Create (0.9ms)[0m  [1m[32mINSERT INTO "users_history_records" ("operation_type", "amount", "balance_after", "created_at", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["operation_type", "Deposit"], ["amount", 1000000.0], ["balance_after", 1000000.0], ["created_at", "2020-12-08 12:04:42.062485"], ["updated_at", "2020-12-08 12:04:42.062485"], ["user_id", 2]]
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
Redirected to http://localhost:3000/user
Completed 302 Found in 57ms (ActiveRecord: 19.3ms | Allocations: 17929)


Started GET "/user" for ::1 at 2020-12-08 15:04:42 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.3ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 5.0ms | Allocations: 2266)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 16ms (Views: 10.5ms | ActiveRecord: 1.4ms | Allocations: 8778)


Started POST "/user" for ::1 at 2020-12-08 15:04:46 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"Tm3flrL9XbAw+KPQcTeaIi5L3lLztNfvy/yoLAnzgZEtGa2i3hSDMCtnGgZ3pMlR8xFbF4me1HUNupQl6CGzXA==", "user"=>{"current_balance"=>"50000"}, "commit"=>"Withdraw"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:42:in `withdraw'
  [1m[36mCashMachine Load (0.4ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:16:in `cash_available?'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:24:in `cash_available?'
  [1m[36mCashMachine Update (0.4ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 1050000.0], ["updated_at", "2020-12-08 12:04:46.796883"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:24:in `cash_available?'
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:24:in `cash_available?'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/user.rb:27:in `withdraw'
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_balance" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["current_balance", 950000.0], ["updated_at", "2020-12-08 12:04:46.807902"], ["id", 2]]
  ‚Ü≥ app/models/user.rb:27:in `withdraw'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/user.rb:27:in `withdraw'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/controllers/user_controller.rb:47:in `withdraw'
  [1m[36mUsersHistoryRecord Create (0.8ms)[0m  [1m[32mINSERT INTO "users_history_records" ("operation_type", "amount", "balance_after", "created_at", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["operation_type", "Withdraw"], ["amount", 50000.0], ["balance_after", 950000.0], ["created_at", "2020-12-08 12:04:46.813948"], ["updated_at", "2020-12-08 12:04:46.813948"], ["user_id", 2]]
  ‚Ü≥ app/controllers/user_controller.rb:47:in `withdraw'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/controllers/user_controller.rb:47:in `withdraw'
Redirected to http://localhost:3000/user
Completed 302 Found in 31ms (ActiveRecord: 10.2ms | Allocations: 10823)


Started GET "/user" for ::1 at 2020-12-08 15:04:46 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.3ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 5.6ms | Allocations: 2299)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 16ms (Views: 10.9ms | ActiveRecord: 1.2ms | Allocations: 8794)


Started DELETE "/users/sign_out" for ::1 at 2020-12-08 15:04:52 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"nAUZsO6OzYDMbpQReofndHpi6HqvOuQlsPKYQnKoms//cWuEgmcTANfxLcd8FLQHpzhtP9UQ5792tKRLk3qoAg=="}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Redirected to http://localhost:3000/main
Completed 302 Found in 8ms (ActiveRecord: 0.4ms | Allocations: 2683)


Started GET "/main" for ::1 at 2020-12-08 15:04:52 +0300
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 1.1ms | Allocations: 207)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 13ms (Views: 10.8ms | ActiveRecord: 0.0ms | Allocations: 5299)


  [1m[35m (2.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (40.8ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (37.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "cutebank_development"[0m
  [1m[35m (70.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "cutebank_test"[0m
  [1m[35m (188.4ms)[0m  [1m[35mCREATE DATABASE "cutebank_development" ENCODING = 'unicode'[0m
  [1m[35m (64.7ms)[0m  [1m[35mCREATE DATABASE "cutebank_test" ENCODING = 'unicode'[0m
  [1m[35m (4.7ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4489605530800437810)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20201023085922)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (76.9ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "login" character varying NOT NULL, "email" character varying NOT NULL, "password" character varying NOT NULL, "current_balance" float DEFAULT 0.0 NOT NULL, "user_is_admin" boolean NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (1.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023085922"]]
  [1m[35m (5.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCashMachines (20201023085944)
  [1m[35m (15.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (16.5ms)[0m  [1m[35mCREATE TABLE "cash_machines" ("id" bigserial primary key, "cash_amount" float DEFAULT 100000.0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023085944"]]
  [1m[35m (4.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUsersHistoryRecords (20201023090011)
  [1m[35m (8.9ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (29.4ms)[0m  [1m[35mCREATE TABLE "users_history_records" ("id" bigserial primary key, "operation_type" character varying NOT NULL, "amount" float NOT NULL, "balance_after" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (2.1ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023090011"]]
  [1m[35m (12.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddForeignKeyUserUsersHistoryRecord (20201023095833)
  [1m[35m (7.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mprimary::SchemaMigration Create (1.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023095833"]]
  [1m[35m (13.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDeviseToUsers (20201023101716)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.6ms)[0m  [1m[35mALTER TABLE "users" DROP COLUMN "email"[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ADD "email" character varying DEFAULT '' NOT NULL[0m
  [1m[35m (1.3ms)[0m  [1m[35mALTER TABLE "users" ADD "encrypted_password" character varying DEFAULT '' NOT NULL[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "users" ADD "reset_password_token" character varying[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" ADD "reset_password_sent_at" timestamp[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "remember_created_at" timestamp[0m
  [1m[35m (7.8ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023101716"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to DeleteLoginAttribute (20201023200333)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.2ms)[0m  [1m[35mALTER TABLE "users" DROP COLUMN "login"[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023200333"]]
  [1m[35m (7.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to DeleteNotNeedpaswordGetAdminDefault (20201023200711)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.2ms)[0m  [1m[35mALTER TABLE "users" DROP COLUMN "password"[0m
  [1m[35m (1.8ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "user_is_admin" TYPE boolean, ALTER COLUMN "user_is_admin" SET DEFAULT FALSE[0m
  [1m[36mprimary::SchemaMigration Create (1.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023200711"]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddForeignKeyUserHistoryUser (20201027162502)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.6ms)[0m  [1m[35mALTER TABLE "users_history_records" ADD "user_id" bigint[0m
  [1m[35m (13.3ms)[0m  [1m[35mALTER TABLE "users_history_records" ADD CONSTRAINT "fk_rails_4e2c355ec6"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[36mprimary::SchemaMigration Create (9.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201027162502"]]
  [1m[35m (21.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddCash (20201109115808)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCashMachine Create (1.6ms)[0m  [1m[32mINSERT INTO "cash_machines" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2020-12-08 14:23:31.943388"], ["updated_at", "2020-12-08 14:23:31.943388"]]
  [1m[36mprimary::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201109115808"]]
  [1m[35m (6.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddAdminWithMigration (20201115153707)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.0ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "trueadmin@google.com"], ["LIMIT", 1]]
  [1m[36mUser Create (1.1ms)[0m  [1m[32mINSERT INTO "users" ("user_is_admin", "created_at", "updated_at", "email", "encrypted_password") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_is_admin", true], ["created_at", "2020-12-08 14:23:32.265722"], ["updated_at", "2020-12-08 14:23:32.265722"], ["email", "trueadmin@google.com"], ["encrypted_password", "$2a$12$sbWvLo6pFrSOB3kq9Ph8E.TkJpSUa6fD5LH6Q2vaMVzARUoQJCZpq"]]
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201115153707"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.6ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2020-12-08 14:23:32.287786"], ["updated_at", "2020-12-08 14:23:32.287786"]]
  [1m[35m (7.4ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT pg_advisory_unlock(4489605530800437810)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/" for ::1 at 2020-12-08 17:23:40 +0300
  [1m[35m (1.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 2.2ms | Allocations: 341)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 68ms (Views: 55.2ms | ActiveRecord: 0.0ms | Allocations: 12316)


Started GET "/users/sign_up" for ::1 at 2020-12-08 17:23:43 +0300
Processing by Devise::RegistrationsController#new as HTML
  Rendering devise/registrations/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.4ms | Allocations: 156)
  Rendered devise/registrations/new.html.erb within layouts/application (Duration: 6.0ms | Allocations: 1494)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 43ms (Views: 19.1ms | ActiveRecord: 8.4ms | Allocations: 13012)


Started POST "/users" for ::1 at 2020-12-08 17:23:51 +0300
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"authenticity_token"=>"1m6bdNEhgFoo9Nt5Yrox1yz667SdQGHBNgsAgPjT90Ynt1xN6kZNKfMefR8Zh5yeoAIIcqjxGRbcoQ5a8WZ8Rg==", "user"=>{"email"=>"antaresloe@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Register"}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "antaresloe@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (2.5ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "email", "encrypted_password") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2020-12-08 14:23:51.303153"], ["updated_at", "2020-12-08 14:23:51.303153"], ["email", "antaresloe@gmail.com"], ["encrypted_password", "$2a$12$YzbfV4j3udGAFKdmQNX7SuPwCuyEvLyx3ar8JWxaa.AJJBIu02FX6"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/user
Completed 302 Found in 558ms (ActiveRecord: 5.2ms | Allocations: 206883)


Started GET "/user" for ::1 at 2020-12-08 17:23:51 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.3ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 9.8ms | Allocations: 3448)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 43ms (Views: 18.4ms | ActiveRecord: 3.9ms | Allocations: 13837)


Started POST "/user" for ::1 at 2020-12-08 17:23:56 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"0aZoz1+omCm/NC91kDH+46BFQX8xXN6HeBgtxTb76nxSicPU0wqp06cobokTx+ZqelxslZ59OxyTeburAD57MA==", "user"=>{"current_balance"=>"500000"}, "commit"=>"Deposit"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:28:in `deposit'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_balance" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["current_balance", 500000.0], ["updated_at", "2020-12-08 14:23:56.684416"], ["id", 2]]
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[35m (9.9ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mCashMachine Load (0.5ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:7:in `add_cash'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[36mCashMachine Update (1.5ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 600000.0], ["updated_at", "2020-12-08 14:23:56.715743"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
  [1m[36mUsersHistoryRecord Create (2.2ms)[0m  [1m[32mINSERT INTO "users_history_records" ("operation_type", "amount", "balance_after", "created_at", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["operation_type", "Deposit"], ["amount", 500000.0], ["balance_after", 500000.0], ["created_at", "2020-12-08 14:23:56.739691"], ["updated_at", "2020-12-08 14:23:56.739691"], ["user_id", 2]]
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
  [1m[35m (7.2ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
Redirected to http://localhost:3000/user
Completed 302 Found in 79ms (ActiveRecord: 29.2ms | Allocations: 17656)


Started GET "/user" for ::1 at 2020-12-08 17:23:56 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.5ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 6.5ms | Allocations: 2260)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 20ms (Views: 14.4ms | ActiveRecord: 1.5ms | Allocations: 8747)


Started POST "/user" for ::1 at 2020-12-08 17:23:57 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"/d19z1LLAEJ7Jc0KJPSrGidEZI67qw/UEKtxnJ2ONwh+8tbU3mkxuGM5jPanArOT/V1JZBSK6k/7yufyq0umRA==", "user"=>{"current_balance"=>"500000.0"}, "commit"=>"Withdraw"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:42:in `withdraw'
  [1m[36mCashMachine Load (0.6ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:16:in `cash_available?'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:24:in `cash_available?'
  [1m[36mCashMachine Update (1.2ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 100000.0], ["updated_at", "2020-12-08 14:23:57.831426"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:24:in `cash_available?'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:24:in `cash_available?'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/user.rb:27:in `withdraw'
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_balance" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["current_balance", 0.0], ["updated_at", "2020-12-08 14:23:57.838295"], ["id", 2]]
  ‚Ü≥ app/models/user.rb:27:in `withdraw'
  [1m[35m (1.3ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/user.rb:27:in `withdraw'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/controllers/user_controller.rb:47:in `withdraw'
  [1m[36mUsersHistoryRecord Create (0.9ms)[0m  [1m[32mINSERT INTO "users_history_records" ("operation_type", "amount", "balance_after", "created_at", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["operation_type", "Withdraw"], ["amount", 500000.0], ["balance_after", 0.0], ["created_at", "2020-12-08 14:23:57.845177"], ["updated_at", "2020-12-08 14:23:57.845177"], ["user_id", 2]]
  ‚Ü≥ app/controllers/user_controller.rb:47:in `withdraw'
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/controllers/user_controller.rb:47:in `withdraw'
Redirected to http://localhost:3000/user
Completed 302 Found in 31ms (ActiveRecord: 8.0ms | Allocations: 10995)


Started GET "/user" for ::1 at 2020-12-08 17:23:57 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (3.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (3.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (1.1ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 10.8ms | Allocations: 2301)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 37ms (Views: 22.4ms | ActiveRecord: 9.0ms | Allocations: 8813)


Started POST "/user" for ::1 at 2020-12-08 17:24:05 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"A3XHg7nRyf5V85QzudUNjxnB9DMk1I/lWwS7UGS+mkCAWmyYNXP4BE3v1c86IxUGw9jZ2Yv1an6wZS0+UnsLDA==", "user"=>{"current_balance"=>"450000"}, "commit"=>"Deposit"}
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:28:in `deposit'
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mUser Update (1.0ms)[0m  [1m[33mUPDATE "users" SET "current_balance" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["current_balance", 450000.0], ["updated_at", "2020-12-08 14:24:05.050237"], ["id", 2]]
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mCashMachine Load (0.6ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:7:in `add_cash'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[36mCashMachine Update (0.4ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 550000.0], ["updated_at", "2020-12-08 14:24:05.061042"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
  [1m[36mUsersHistoryRecord Create (1.4ms)[0m  [1m[32mINSERT INTO "users_history_records" ("operation_type", "amount", "balance_after", "created_at", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["operation_type", "Deposit"], ["amount", 450000.0], ["balance_after", 450000.0], ["created_at", "2020-12-08 14:24:05.066643"], ["updated_at", "2020-12-08 14:24:05.066643"], ["user_id", 2]]
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
Redirected to http://localhost:3000/user
Completed 302 Found in 41ms (ActiveRecord: 9.8ms | Allocations: 10974)


Started GET "/user" for ::1 at 2020-12-08 17:24:05 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.7ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 9.1ms | Allocations: 2348)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 22ms (Views: 14.6ms | ActiveRecord: 2.2ms | Allocations: 8836)


Started POST "/user" for ::1 at 2020-12-08 17:24:09 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"cwh0dbzLhPFbQejsmd5hZmt5GsJNC5OrMoDU6neQcv3wJ99uMGm1C0NdqRAaKHnvsWA3KOIqdjDZ4UKEQVXjsQ==", "user"=>{"current_balance"=>"25000"}, "commit"=>"Withdraw"}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (1.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:42:in `withdraw'
  [1m[36mCashMachine Load (0.5ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:16:in `cash_available?'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:24:in `cash_available?'
  [1m[36mCashMachine Update (0.5ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 525000.0], ["updated_at", "2020-12-08 14:24:09.551709"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:24:in `cash_available?'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:24:in `cash_available?'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/user.rb:27:in `withdraw'
  [1m[36mUser Update (2.7ms)[0m  [1m[33mUPDATE "users" SET "current_balance" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["current_balance", 425000.0], ["updated_at", "2020-12-08 14:24:09.556436"], ["id", 2]]
  ‚Ü≥ app/models/user.rb:27:in `withdraw'
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/user.rb:27:in `withdraw'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/controllers/user_controller.rb:47:in `withdraw'
  [1m[36mUsersHistoryRecord Create (2.4ms)[0m  [1m[32mINSERT INTO "users_history_records" ("operation_type", "amount", "balance_after", "created_at", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["operation_type", "Withdraw"], ["amount", 25000.0], ["balance_after", 425000.0], ["created_at", "2020-12-08 14:24:09.567273"], ["updated_at", "2020-12-08 14:24:09.567273"], ["user_id", 2]]
  ‚Ü≥ app/controllers/user_controller.rb:47:in `withdraw'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/controllers/user_controller.rb:47:in `withdraw'
Redirected to http://localhost:3000/user
Completed 302 Found in 39ms (ActiveRecord: 12.3ms | Allocations: 11007)


Started GET "/user" for ::1 at 2020-12-08 17:24:09 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.4ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (0.9ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 8.3ms | Allocations: 2398)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 32ms (Views: 16.2ms | ActiveRecord: 2.2ms | Allocations: 8914)


Started POST "/user" for ::1 at 2020-12-08 17:24:15 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"3FGFhsDZdnpv7TzHpw8vlhXeB0S7438hQ6tlwitueLhffi6dTHtHgHfxfTsk+Tcfz8cqrhTCmrqoyvOsHavp9A==", "user"=>{"current_balance"=>"5000000"}, "commit"=>"Withdraw"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:42:in `withdraw'
  [1m[36mCashMachine Load (0.3ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:16:in `cash_available?'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.4ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (0.4ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 12.3ms | Allocations: 2604)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 27ms (Views: 19.5ms | ActiveRecord: 1.8ms | Allocations: 10181)


Started DELETE "/users/sign_out" for ::1 at 2020-12-08 17:24:22 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"qHKLN5ssXp+eVZmSSPpbAtV+u2gQT/LkynghR6nYSJMrXSAsF45vZYZJ2G7LDEOLD2eWgr9uF38hGbcpnx3Z3w=="}
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Redirected to http://localhost:3000/main
Completed 302 Found in 7ms (ActiveRecord: 0.7ms | Allocations: 2765)


Started GET "/main" for ::1 at 2020-12-08 17:24:22 +0300
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 0.2ms | Allocations: 62)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 9ms (Views: 8.4ms | ActiveRecord: 0.0ms | Allocations: 4496)


Started GET "/users/sign_in" for ::1 at 2020-12-08 17:24:27 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.1ms | Allocations: 15)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 2.4ms | Allocations: 706)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 14ms (Views: 12.2ms | ActiveRecord: 0.0ms | Allocations: 6019)


Started POST "/users/sign_in" for ::1 at 2020-12-08 17:24:49 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"yoTOAktqaVQJx+8c3oW4LxsOmP4IGhFYv9muGOARAwQdA1/n0tohVcmQBYgnO+kgljJo4lmWTrA+96AzkEO9rw==", "user"=>{"email"=>"trueadmin@google.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  [1m[36mUser Load (1.2ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "trueadmin@google.com"], ["LIMIT", 1]]
Redirected to http://localhost:3000/user
Completed 302 Found in 280ms (ActiveRecord: 1.2ms | Allocations: 3308)


Started GET "/user" for ::1 at 2020-12-08 17:24:49 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Redirected to http://localhost:3000/admin
Filter chain halted as :check_if_admin rendered or redirected
Completed 302 Found in 5ms (ActiveRecord: 0.3ms | Allocations: 1945)


Started GET "/admin" for ::1 at 2020-12-08 17:24:49 +0300
Processing by AdminController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCashMachine Load (0.2ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/admin_controller.rb:8:in `index'
  Rendering admin/index.html.erb within layouts/application
  Rendered admin/index.html.erb within layouts/application (Duration: 1.2ms | Allocations: 583)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 15ms (Views: 9.5ms | ActiveRecord: 0.5ms | Allocations: 7614)


Started POST "/admin" for ::1 at 2020-12-08 17:24:54 +0300
Processing by AdminController#create as HTML
  Parameters: {"authenticity_token"=>"ux1Y6fV8ymi7THrqkjuqn+xiEYX9zVrH29bvrsYJkTAl0qGyI699F01MdUKUzRijAHs1y7YZw/uYgzaHb+QuWg==", "admin"=>{"cash_amount"=>"1000000"}, "commit"=>"Submit"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCashMachine Load (0.4ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/admin_controller.rb:12:in `create'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:34:in `update_cash'
  [1m[36mCashMachine Update (0.5ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 1000000.0], ["updated_at", "2020-12-08 14:24:54.597510"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:34:in `update_cash'
  [1m[35m (11.5ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:34:in `update_cash'
  Rendering admin/index.html.erb within layouts/application
  Rendered admin/index.html.erb within layouts/application (Duration: 0.7ms | Allocations: 258)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 33ms (Views: 8.6ms | ActiveRecord: 13.9ms | Allocations: 9000)


Started DELETE "/users/sign_out" for ::1 at 2020-12-08 17:24:55 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"ZKRRlAoilTYqnhvfcPaiCweulV9RFVbgBKgx3nf/VZT6a6jP3PEiSdyeFHd2ABA367exERrBz9xH/ej33hLq/g=="}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Redirected to http://localhost:3000/main
Completed 302 Found in 5ms (ActiveRecord: 0.4ms | Allocations: 2309)


Started GET "/main" for ::1 at 2020-12-08 17:24:55 +0300
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 0.2ms | Allocations: 62)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 8ms (Views: 7.0ms | ActiveRecord: 0.0ms | Allocations: 4503)


  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (45.3ms)[0m  [1m[35mDROP DATABASE IF EXISTS "cutebank_development"[0m
  [1m[35m (34.8ms)[0m  [1m[35mDROP DATABASE IF EXISTS "cutebank_test"[0m
  [1m[35m (109.2ms)[0m  [1m[35mCREATE DATABASE "cutebank_development" ENCODING = 'unicode'[0m
  [1m[35m (98.2ms)[0m  [1m[35mCREATE DATABASE "cutebank_test" ENCODING = 'unicode'[0m
  [1m[35m (5.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.3ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4489605530800437810)[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20201023085922)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (3.6ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "login" character varying NOT NULL, "email" character varying NOT NULL, "password" character varying NOT NULL, "current_balance" float DEFAULT 0.0 NOT NULL, "user_is_admin" boolean NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023085922"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCashMachines (20201023085944)
  [1m[35m (0.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.8ms)[0m  [1m[35mCREATE TABLE "cash_machines" ("id" bigserial primary key, "cash_amount" float DEFAULT 100000.0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023085944"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUsersHistoryRecords (20201023090011)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (4.3ms)[0m  [1m[35mCREATE TABLE "users_history_records" ("id" bigserial primary key, "operation_type" character varying NOT NULL, "amount" float NOT NULL, "balance_after" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023090011"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddForeignKeyUserUsersHistoryRecord (20201023095833)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mprimary::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023095833"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDeviseToUsers (20201023101716)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "users" DROP COLUMN "email"[0m
  [1m[35m (0.8ms)[0m  [1m[35mALTER TABLE "users" ADD "email" character varying DEFAULT '' NOT NULL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ADD "encrypted_password" character varying DEFAULT '' NOT NULL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ADD "reset_password_token" character varying[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ADD "reset_password_sent_at" timestamp[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ADD "remember_created_at" timestamp[0m
  [1m[35m (1.2ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023101716"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to DeleteLoginAttribute (20201023200333)
  [1m[35m (0.6ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" DROP COLUMN "login"[0m
  [1m[36mprimary::SchemaMigration Create (0.7ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023200333"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to DeleteNotNeedpaswordGetAdminDefault (20201023200711)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" DROP COLUMN "password"[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "user_is_admin" TYPE boolean, ALTER COLUMN "user_is_admin" SET DEFAULT FALSE[0m
  [1m[36mprimary::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023200711"]]
  [1m[35m (1.0ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddForeignKeyUserHistoryUser (20201027162502)
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users_history_records" ADD "user_id" bigint[0m
  [1m[35m (2.1ms)[0m  [1m[35mALTER TABLE "users_history_records" ADD CONSTRAINT "fk_rails_4e2c355ec6"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201027162502"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddCash (20201109115808)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCashMachine Create (0.9ms)[0m  [1m[32mINSERT INTO "cash_machines" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2020-12-08 14:35:18.625733"], ["updated_at", "2020-12-08 14:35:18.625733"]]
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201109115808"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddAdminWithMigration (20201115153707)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "trueadmin@google.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("user_is_admin", "created_at", "updated_at", "email", "encrypted_password") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_is_admin", true], ["created_at", "2020-12-08 14:35:18.904553"], ["updated_at", "2020-12-08 14:35:18.904553"], ["email", "trueadmin@google.com"], ["encrypted_password", "$2a$12$aB0HCNMH6bzCoMc9gW6yaOj/iiPk/sx.RhTJlJ8bpCzn4vl7nEiU2"]]
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201115153707"]]
  [1m[35m (10.6ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.7ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2020-12-08 14:35:18.929109"], ["updated_at", "2020-12-08 14:35:18.929109"]]
  [1m[35m (1.5ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4489605530800437810)[0m
  [1m[35m (0.9ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/users/sign_in" for ::1 at 2020-12-08 17:35:26 +0300
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.6ms | Allocations: 156)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 8.5ms | Allocations: 1545)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 72ms (Views: 45.4ms | ActiveRecord: 7.3ms | Allocations: 20058)


Started POST "/users/sign_in" for ::1 at 2020-12-08 17:35:33 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"Z7hC7/dcFrJFPOomF4XfdDclwdZ7wS14WBlY/eXZjfsRr+L7G7N6rq1SEg8HoQ6KfZ9vrXe6IPrNCA8T3Wz9xw==", "user"=>{"email"=>"antaresloe@gmail.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "antaresloe@gmail.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 9ms (ActiveRecord: 1.2ms | Allocations: 2683)


Processing by Devise::SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"Z7hC7/dcFrJFPOomF4XfdDclwdZ7wS14WBlY/eXZjfsRr+L7G7N6rq1SEg8HoQ6KfZ9vrXe6IPrNCA8T3Wz9xw==", "user"=>{"email"=>"antaresloe@gmail.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.0ms | Allocations: 15)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 1.5ms | Allocations: 421)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 270ms (Views: 9.5ms | ActiveRecord: 0.0ms | Allocations: 5343)


Started GET "/users/sign_in" for ::1 at 2020-12-08 17:35:35 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.0ms | Allocations: 15)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 1.1ms | Allocations: 412)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 10ms (Views: 9.2ms | ActiveRecord: 0.0ms | Allocations: 5041)


Started POST "/users/sign_in" for ::1 at 2020-12-08 17:35:37 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"m3P9Re340BeThT2z9Wzfz1U3QLZhNnOdMNkOTs1ko3kifwixiVagsdID6bspR/1iyK+J3ExoJlBf0zeLVGik4w==", "user"=>{"email"=>"antaresloe@gmail.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  [1m[36mUser Load (1.1ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "antaresloe@gmail.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 6ms (ActiveRecord: 1.3ms | Allocations: 2171)


Processing by Devise::SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"m3P9Re340BeThT2z9Wzfz1U3QLZhNnOdMNkOTs1ko3kifwixiVagsdID6bspR/1iyK+J3ExoJlBf0zeLVGik4w==", "user"=>{"email"=>"antaresloe@gmail.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.0ms | Allocations: 15)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 1.0ms | Allocations: 412)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 272ms (Views: 8.3ms | ActiveRecord: 0.0ms | Allocations: 4827)


Started POST "/users/sign_in" for ::1 at 2020-12-08 17:35:41 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"Gkr/+uH460T5leZLmTMrKyH9iuTmHYruehku/IApTr1sXV/uDReHWBH7HmKJF/rVa0ckn+pmh2zvCHkSuJw+gQ==", "user"=>{"email"=>"antaresloe@gmail.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "antaresloe@gmail.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (ActiveRecord: 0.5ms | Allocations: 1965)


Processing by Devise::SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"Gkr/+uH460T5leZLmTMrKyH9iuTmHYruehku/IApTr1sXV/uDReHWBH7HmKJF/rVa0ckn+pmh2zvCHkSuJw+gQ==", "user"=>{"email"=>"antaresloe@gmail.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.1ms | Allocations: 15)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 1.4ms | Allocations: 412)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 272ms (Views: 7.7ms | ActiveRecord: 0.0ms | Allocations: 4795)


Started POST "/users/sign_in" for ::1 at 2020-12-08 17:35:46 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"MK2/PcTcM81MjGU/raObYnpayVlNBT86RACgPZZAip5Guh8pKDNf0aTinRa9h0qcMOBnIkF+MrjREffTrvX6og==", "user"=>{"email"=>"antaresloe@gmail.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "antaresloe@gmail.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 3ms (ActiveRecord: 0.5ms | Allocations: 1967)


Processing by Devise::SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"MK2/PcTcM81MjGU/raObYnpayVlNBT86RACgPZZAip5Guh8pKDNf0aTinRa9h0qcMOBnIkF+MrjREffTrvX6og==", "user"=>{"email"=>"antaresloe@gmail.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.0ms | Allocations: 15)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 0.9ms | Allocations: 412)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 271ms (Views: 8.6ms | ActiveRecord: 0.0ms | Allocations: 4795)


Started GET "/users/sign_up" for ::1 at 2020-12-08 17:35:48 +0300
Processing by Devise::RegistrationsController#new as HTML
  Rendering devise/registrations/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.0ms | Allocations: 15)
  Rendered devise/registrations/new.html.erb within layouts/application (Duration: 2.5ms | Allocations: 782)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 14ms (Views: 12.4ms | ActiveRecord: 0.0ms | Allocations: 6046)


Started GET "/users/sign_in" for ::1 at 2020-12-08 17:36:05 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.1ms | Allocations: 15)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 1.6ms | Allocations: 421)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 21ms (Views: 17.3ms | ActiveRecord: 0.0ms | Allocations: 5086)


Started POST "/users/sign_in" for ::1 at 2020-12-08 17:36:09 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"E/hp8ByEtigYu4Zv3ER17hQiatdSJ1vyPC3gU58/0Naq9JwEeCrGjlk9UmcAb1dDibqjvX95Dj9TJ9mWBjPXTA==", "user"=>{"email"=>"antaresloe@gmail.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  [1m[36mUser Load (1.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "antaresloe@gmail.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 6ms (ActiveRecord: 1.8ms | Allocations: 2131)


Processing by Devise::SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"E/hp8ByEtigYu4Zv3ER17hQiatdSJ1vyPC3gU58/0Naq9JwEeCrGjlk9UmcAb1dDibqjvX95Dj9TJ9mWBjPXTA==", "user"=>{"email"=>"antaresloe@gmail.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.1ms | Allocations: 15)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 1.1ms | Allocations: 413)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 270ms (Views: 8.9ms | ActiveRecord: 0.0ms | Allocations: 4828)


Started POST "/users/sign_in" for ::1 at 2020-12-08 17:36:12 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"DHHdZHqTm1KZMWP26BihAmFiJzV+R+O5wqac7ZV7acl6Zn1wlnz3TnFfm9/4PHD8K9iJTnI87jtXt8sDrc4Z9Q==", "user"=>{"email"=>"antaresloe@gmail.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "antaresloe@gmail.com"], ["LIMIT", 1]]
Completed 401 Unauthorized in 4ms (ActiveRecord: 0.4ms | Allocations: 1973)


Processing by Devise::SessionsController#new as HTML
  Parameters: {"authenticity_token"=>"DHHdZHqTm1KZMWP26BihAmFiJzV+R+O5wqac7ZV7acl6Zn1wlnz3TnFfm9/4PHD8K9iJTnI87jtXt8sDrc4Z9Q==", "user"=>{"email"=>"antaresloe@gmail.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.1ms | Allocations: 15)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 1.6ms | Allocations: 412)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 270ms (Views: 8.4ms | ActiveRecord: 0.0ms | Allocations: 4795)


Started GET "/users/sign_up" for ::1 at 2020-12-08 17:36:14 +0300
Processing by Devise::RegistrationsController#new as HTML
  Rendering devise/registrations/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.0ms | Allocations: 15)
  Rendered devise/registrations/new.html.erb within layouts/application (Duration: 1.2ms | Allocations: 461)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 12ms (Views: 10.1ms | ActiveRecord: 0.0ms | Allocations: 5019)


Started GET "/users/sign_in" for ::1 at 2020-12-08 17:36:21 +0300
Processing by Devise::SessionsController#new as HTML
  Rendering devise/sessions/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.1ms | Allocations: 15)
  Rendered devise/sessions/new.html.erb within layouts/application (Duration: 1.6ms | Allocations: 412)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 32ms (Views: 29.0ms | ActiveRecord: 0.0ms | Allocations: 5048)


Started POST "/users/sign_in" for ::1 at 2020-12-08 17:36:29 +0300
Processing by Devise::SessionsController#create as HTML
  Parameters: {"authenticity_token"=>"KIjWl0ToGIgtqmXUSl7FadKv+OKFZ52o/pLycPNT4cCRhCNjIEZoLmwssdyWdefETzcxiKg5yGWRmMu1al/mWg==", "user"=>{"email"=>"trueadmin@google.com", "password"=>"[FILTERED]"}, "commit"=>"Sign in"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."email" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["email", "trueadmin@google.com"], ["LIMIT", 1]]
Redirected to http://localhost:3000/user
Completed 302 Found in 276ms (ActiveRecord: 0.4ms | Allocations: 6592)


Started GET "/user" for ::1 at 2020-12-08 17:36:29 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Redirected to http://localhost:3000/admin
Filter chain halted as :check_if_admin rendered or redirected
Completed 302 Found in 5ms (ActiveRecord: 0.3ms | Allocations: 2454)


Started GET "/admin" for ::1 at 2020-12-08 17:36:29 +0300
Processing by AdminController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  [1m[36mCashMachine Load (0.4ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/admin_controller.rb:8:in `index'
  Rendering admin/index.html.erb within layouts/application
  Rendered admin/index.html.erb within layouts/application (Duration: 2.2ms | Allocations: 599)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 30ms (Views: 13.3ms | ActiveRecord: 6.1ms | Allocations: 10249)


Started DELETE "/users/sign_out" for ::1 at 2020-12-08 17:36:31 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"zrSmqb2b7JcoK7wQCtt+p+mQKztAhC4HGQm33sy4W+CVNraxn+JyEbjCVLOPt3PlEPtKhkAS0p6+yNZvMZcD6w=="}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
Redirected to http://localhost:3000/main
Completed 302 Found in 8ms (ActiveRecord: 0.6ms | Allocations: 2868)


Started GET "/main" for ::1 at 2020-12-08 17:36:31 +0300
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 0.6ms | Allocations: 206)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 14ms (Views: 12.1ms | ActiveRecord: 0.0ms | Allocations: 5356)


Started GET "/users/sign_up" for ::1 at 2020-12-08 17:36:33 +0300
Processing by Devise::RegistrationsController#new as HTML
  Rendering devise/registrations/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.0ms | Allocations: 15)
  Rendered devise/registrations/new.html.erb within layouts/application (Duration: 1.4ms | Allocations: 469)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 13ms (Views: 11.8ms | ActiveRecord: 0.0ms | Allocations: 5043)


Started POST "/users" for ::1 at 2020-12-08 17:36:40 +0300
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"authenticity_token"=>"L8NmONrMD2Il2wVAH4UJ3SUp5lTIOHMOyuIE5p3Zm1pITL6b3C7RbzcSmZ0qJHUAEumRNtru2eqrnqBaEicLbw==", "user"=>{"email"=>"andrey@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Register"}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.4ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "andrey@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "email", "encrypted_password") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2020-12-08 14:36:40.915961"], ["updated_at", "2020-12-08 14:36:40.915961"], ["email", "andrey@gmail.com"], ["encrypted_password", "$2a$12$2oUD5r/ak0Hkjp00gOzVI.0VX5by8WMlg4gk7s6mP9N/JZoHfTA4S"]]
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/user
Completed 302 Found in 285ms (ActiveRecord: 8.2ms | Allocations: 7943)


Started GET "/user" for ::1 at 2020-12-08 17:36:40 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.6ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (0.8ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 9.2ms | Allocations: 3004)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 34ms (Views: 17.0ms | ActiveRecord: 3.3ms | Allocations: 13096)


Started POST "/user" for ::1 at 2020-12-08 17:36:49 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"8IKmp+Cl77n8Cb6BLh11NF9d+cUMQey3XNezbqTxIt6vm4lLqxKqe+d1NO25aRQXg1LkKgpwgqYtQEA9yQc9Gw==", "user"=>{"current_balance"=>"5000"}, "commit"=>"Deposit"}
  [1m[36mUser Load (2.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:28:in `deposit'
  [1m[35m (1.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "current_balance" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["current_balance", 5000.0], ["updated_at", "2020-12-08 14:36:49.299247"], ["id", 2]]
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[35m (5.5ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mCashMachine Load (0.4ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:7:in `add_cash'
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[36mCashMachine Update (0.6ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 105000.0], ["updated_at", "2020-12-08 14:36:49.314029"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[35m (0.5ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
  [1m[36mUsersHistoryRecord Create (2.2ms)[0m  [1m[32mINSERT INTO "users_history_records" ("operation_type", "amount", "balance_after", "created_at", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["operation_type", "Deposit"], ["amount", 5000.0], ["balance_after", 5000.0], ["created_at", "2020-12-08 14:36:49.335711"], ["updated_at", "2020-12-08 14:36:49.335711"], ["user_id", 2]]
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
  [1m[35m (1.2ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
Redirected to http://localhost:3000/user
Completed 302 Found in 56ms (ActiveRecord: 17.0ms | Allocations: 15053)


Started GET "/user" for ::1 at 2020-12-08 17:36:49 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.4ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (0.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 5.7ms | Allocations: 2260)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 22ms (Views: 15.2ms | ActiveRecord: 1.5ms | Allocations: 8755)


Started POST "/user" for ::1 at 2020-12-08 17:36:53 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"owqNvWqi3feBl16MVuz2h0sp/HxwEVV5r/EfApKtEUj8E6JRIRWYNZrr1ODBmJeklybhk3YgO2jeZuxR/1sOjQ==", "user"=>{"current_balance"=>"100"}, "commit"=>"Withdraw"}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:42:in `withdraw'
  [1m[36mCashMachine Load (0.7ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:16:in `cash_available?'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:24:in `cash_available?'
  [1m[36mCashMachine Update (0.8ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 104900.0], ["updated_at", "2020-12-08 14:36:53.605958"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:24:in `cash_available?'
  [1m[35m (7.6ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:24:in `cash_available?'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/user.rb:27:in `withdraw'
  [1m[36mUser Update (0.5ms)[0m  [1m[33mUPDATE "users" SET "current_balance" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["current_balance", 4900.0], ["updated_at", "2020-12-08 14:36:53.619412"], ["id", 2]]
  ‚Ü≥ app/models/user.rb:27:in `withdraw'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/user.rb:27:in `withdraw'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/controllers/user_controller.rb:47:in `withdraw'
  [1m[36mUsersHistoryRecord Create (1.7ms)[0m  [1m[32mINSERT INTO "users_history_records" ("operation_type", "amount", "balance_after", "created_at", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["operation_type", "Withdraw"], ["amount", 100.0], ["balance_after", 4900.0], ["created_at", "2020-12-08 14:36:53.625634"], ["updated_at", "2020-12-08 14:36:53.625634"], ["user_id", 2]]
  ‚Ü≥ app/controllers/user_controller.rb:47:in `withdraw'
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/controllers/user_controller.rb:47:in `withdraw'
Redirected to http://localhost:3000/user
Completed 302 Found in 39ms (ActiveRecord: 13.7ms | Allocations: 10996)


Started GET "/user" for ::1 at 2020-12-08 17:36:53 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (6.5ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (7.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 39.0ms | Allocations: 2299)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 56ms (Views: 35.1ms | ActiveRecord: 14.4ms | Allocations: 8826)


Started DELETE "/users/sign_out" for ::1 at 2020-12-08 17:36:55 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"Nmj6EZvGgGmBOtJC6YkaERQ7HQ69hKiXXvy27V84a35pcdX90HHFq5pGWC5+/XsyyDQA4bu1xoYva0W+Ms50uw=="}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Redirected to http://localhost:3000/main
Completed 302 Found in 6ms (ActiveRecord: 0.4ms | Allocations: 2319)


Started GET "/main" for ::1 at 2020-12-08 17:36:55 +0300
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 0.2ms | Allocations: 62)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 9ms (Views: 8.4ms | ActiveRecord: 0.0ms | Allocations: 4499)


  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.3ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.1ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (62.2ms)[0m  [1m[35mDROP DATABASE IF EXISTS "cutebank_development"[0m
  [1m[35m (41.9ms)[0m  [1m[35mDROP DATABASE IF EXISTS "cutebank_test"[0m
  [1m[35m (223.4ms)[0m  [1m[35mCREATE DATABASE "cutebank_development" ENCODING = 'unicode'[0m
  [1m[35m (97.5ms)[0m  [1m[35mCREATE DATABASE "cutebank_test" ENCODING = 'unicode'[0m
  [1m[35m (4.4ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (2.4ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4489605530800437810)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20201023085922)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (23.5ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "login" character varying NOT NULL, "email" character varying NOT NULL, "password" character varying NOT NULL, "current_balance" float DEFAULT 0.0 NOT NULL, "user_is_admin" boolean NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023085922"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCashMachines (20201023085944)
  [1m[35m (9.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (7.8ms)[0m  [1m[35mCREATE TABLE "cash_machines" ("id" bigserial primary key, "cash_amount" float DEFAULT 100000.0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023085944"]]
  [1m[35m (4.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUsersHistoryRecords (20201023090011)
  [1m[35m (7.4ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (18.0ms)[0m  [1m[35mCREATE TABLE "users_history_records" ("id" bigserial primary key, "operation_type" character varying NOT NULL, "amount" float NOT NULL, "balance_after" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023090011"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddForeignKeyUserUsersHistoryRecord (20201023095833)
  [1m[35m (7.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023095833"]]
  [1m[35m (11.3ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDeviseToUsers (20201023101716)
  [1m[35m (0.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" DROP COLUMN "email"[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "email" character varying DEFAULT '' NOT NULL[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ADD "encrypted_password" character varying DEFAULT '' NOT NULL[0m
  [1m[35m (0.2ms)[0m  [1m[35mALTER TABLE "users" ADD "reset_password_token" character varying[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ADD "reset_password_sent_at" timestamp[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "remember_created_at" timestamp[0m
  [1m[35m (11.9ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.0ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023101716"]]
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to DeleteLoginAttribute (20201023200333)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" DROP COLUMN "login"[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023200333"]]
  [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to DeleteNotNeedpaswordGetAdminDefault (20201023200711)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DROP COLUMN "password"[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "user_is_admin" TYPE boolean, ALTER COLUMN "user_is_admin" SET DEFAULT FALSE[0m
  [1m[36mprimary::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023200711"]]
  [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddForeignKeyUserHistoryUser (20201027162502)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users_history_records" ADD "user_id" bigint[0m
  [1m[35m (1.9ms)[0m  [1m[35mALTER TABLE "users_history_records" ADD CONSTRAINT "fk_rails_4e2c355ec6"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201027162502"]]
  [1m[35m (6.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddCash (20201109115808)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCashMachine Create (0.9ms)[0m  [1m[32mINSERT INTO "cash_machines" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2020-12-08 16:58:42.470449"], ["updated_at", "2020-12-08 16:58:42.470449"]]
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201109115808"]]
  [1m[35m (5.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddAdminWithMigration (20201115153707)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.5ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "trueadmin@google.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("user_is_admin", "created_at", "updated_at", "email", "encrypted_password") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_is_admin", true], ["created_at", "2020-12-08 16:58:42.771109"], ["updated_at", "2020-12-08 16:58:42.771109"], ["email", "trueadmin@google.com"], ["encrypted_password", "$2a$12$VXuseb2nSUSvnzDNa3qgiuUG23BvSMQIm9fCkiFA8ZFmk02PKWGWS"]]
  [1m[36mprimary::SchemaMigration Create (0.2ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201115153707"]]
  [1m[35m (7.0ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.3ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2020-12-08 16:58:42.793517"], ["updated_at", "2020-12-08 16:58:42.793517"]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.3ms)[0m  [1m[34mSELECT pg_advisory_unlock(4489605530800437810)[0m
  [1m[35m (1.0ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/" for ::1 at 2020-12-08 19:58:53 +0300
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 5.3ms | Allocations: 448)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 403ms (Views: 389.3ms | ActiveRecord: 0.0ms | Allocations: 59550)


Started GET "/users/sign_up" for ::1 at 2020-12-08 19:59:10 +0300
Processing by Devise::RegistrationsController#new as HTML
  Rendering devise/registrations/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 0.6ms | Allocations: 154)
  Rendered devise/registrations/new.html.erb within layouts/application (Duration: 9.4ms | Allocations: 1793)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 43ms (Views: 20.9ms | ActiveRecord: 8.7ms | Allocations: 13159)


Started POST "/users" for ::1 at 2020-12-08 19:59:17 +0300
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"authenticity_token"=>"M2vZdXL31EJGKOyXgfqO3vspFjlY7kMIRvJYGvwC0Ga6Iho6aZJzkpVs7/eL0Pp6f2s/pUM76H1hxc8DPeNAIw==", "user"=>{"email"=>"antaresloe@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Register"}
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "antaresloe@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.6ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "email", "encrypted_password") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2020-12-08 16:59:17.860011"], ["updated_at", "2020-12-08 16:59:17.860011"], ["email", "antaresloe@gmail.com"], ["encrypted_password", "$2a$12$4beyCKYCyCkT2p3PN8d.m.PFISUYNA0zbGN3zv6ardSDJ/wCdgO2."]]
  [1m[35m (6.9ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/user
Completed 302 Found in 1678ms (ActiveRecord: 8.8ms | Allocations: 592528)


Started GET "/user" for ::1 at 2020-12-08 19:59:19 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.7ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 11.7ms | Allocations: 3444)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 65ms (Views: 21.9ms | ActiveRecord: 6.7ms | Allocations: 16170)


Started POST "/user" for ::1 at 2020-12-08 19:59:26 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"0+Wec9EnSWqqN+qS3WM8RPr7N4uwuf6CqilJu80xDQU+9WWZuTTpOByOHfzVHgv9UrwCKPI4x5ZhNm2jrSRXDw==", "user"=>{"current_balance"=>"10000.0"}, "commit"=>"Deposit"}
  [1m[36mUser Load (0.8ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:28:in `deposit'
  [1m[35m (1.9ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mUser Update (0.9ms)[0m  [1m[33mUPDATE "users" SET "current_balance" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["current_balance", 10000.0], ["updated_at", "2020-12-08 16:59:26.280471"], ["id", 2]]
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[35m (1.9ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mCashMachine Load (0.4ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:7:in `add_cash'
  [1m[35m (3.5ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[36mCashMachine Update (0.6ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 110000.0], ["updated_at", "2020-12-08 16:59:26.322993"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[35m (1.8ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[35m (20.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
  [1m[36mUsersHistoryRecord Create (6.8ms)[0m  [1m[32mINSERT INTO "users_history_records" ("operation_type", "amount", "balance_after", "created_at", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["operation_type", "Deposit"], ["amount", 10000.0], ["balance_after", 10000.0], ["created_at", "2020-12-08 16:59:26.364150"], ["updated_at", "2020-12-08 16:59:26.364150"], ["user_id", 2]]
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
Redirected to http://localhost:3000/user
Completed 302 Found in 137ms (ActiveRecord: 54.5ms | Allocations: 20199)


Started GET "/user" for ::1 at 2020-12-08 19:59:26 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (2.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.4ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (0.6ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 100.4ms | Allocations: 2265)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 141ms (Views: 127.3ms | ActiveRecord: 4.3ms | Allocations: 8765)


Started POST "/user" for ::1 at 2020-12-08 19:59:30 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"vFju898Z0CHuAN6cqN5sW5BuYngEVKoYSCHHbkLhyF1RSBUZtwpwc1i5KfKgo1viOClX20bVkwyDPuN2IvSSVw==", "user"=>{"current_balance"=>"5000"}, "commit"=>"Withdraw"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.3ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:42:in `withdraw'
  [1m[36mCashMachine Load (0.5ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:16:in `cash_available?'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:24:in `cash_available?'
  [1m[36mCashMachine Update (0.4ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 105000.0], ["updated_at", "2020-12-08 16:59:30.668805"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:24:in `cash_available?'
  [1m[35m (5.2ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:24:in `cash_available?'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/user.rb:27:in `withdraw'
  [1m[36mUser Update (0.6ms)[0m  [1m[33mUPDATE "users" SET "current_balance" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["current_balance", 5000.0], ["updated_at", "2020-12-08 16:59:30.682340"], ["id", 2]]
  ‚Ü≥ app/models/user.rb:27:in `withdraw'
  [1m[35m (1.4ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/user.rb:27:in `withdraw'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/controllers/user_controller.rb:47:in `withdraw'
  [1m[36mUsersHistoryRecord Create (0.7ms)[0m  [1m[32mINSERT INTO "users_history_records" ("operation_type", "amount", "balance_after", "created_at", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["operation_type", "Withdraw"], ["amount", 5000.0], ["balance_after", 5000.0], ["created_at", "2020-12-08 16:59:30.690018"], ["updated_at", "2020-12-08 16:59:30.690018"], ["user_id", 2]]
  ‚Ü≥ app/controllers/user_controller.rb:47:in `withdraw'
  [1m[35m (2.3ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/controllers/user_controller.rb:47:in `withdraw'
Redirected to http://localhost:3000/user
Completed 302 Found in 41ms (ActiveRecord: 12.4ms | Allocations: 10811)


Started GET "/user" for ::1 at 2020-12-08 19:59:30 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (0.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (1.7ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.9ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (1.7ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 8.4ms | Allocations: 2295)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 24ms (Views: 12.7ms | ActiveRecord: 5.0ms | Allocations: 8790)


Started DELETE "/users/sign_out" for ::1 at 2020-12-08 19:59:33 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"vtWexR58ARVGt86B1HP3bhbkNu3ISbcma8y57RJt39dTxWUvdm+hR/AOOe/cDsDXvqMDTorIjjKg0531cniF3Q=="}
  [1m[36mUser Load (0.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Redirected to http://localhost:3000/main
Completed 302 Found in 12ms (ActiveRecord: 0.8ms | Allocations: 3130)


Started GET "/main" for ::1 at 2020-12-08 19:59:33 +0300
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 0.5ms | Allocations: 62)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 10ms (Views: 8.8ms | ActiveRecord: 0.0ms | Allocations: 4496)


  [1m[35m (1.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
  [1m[35m (0.2ms)[0m  [1m[34mSELECT "ar_internal_metadata"."value" FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1[0m  [["key", "environment"]]
  [1m[35m (41.6ms)[0m  [1m[35mDROP DATABASE IF EXISTS "cutebank_development"[0m
  [1m[35m (43.7ms)[0m  [1m[35mDROP DATABASE IF EXISTS "cutebank_test"[0m
  [1m[35m (200.4ms)[0m  [1m[35mCREATE DATABASE "cutebank_development" ENCODING = 'unicode'[0m
  [1m[35m (162.3ms)[0m  [1m[35mCREATE DATABASE "cutebank_test" ENCODING = 'unicode'[0m
  [1m[35m (20.6ms)[0m  [1m[35mCREATE TABLE "schema_migrations" ("version" character varying NOT NULL PRIMARY KEY)[0m
  [1m[35m (26.9ms)[0m  [1m[35mCREATE TABLE "ar_internal_metadata" ("key" character varying NOT NULL PRIMARY KEY, "value" character varying, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[35m (0.4ms)[0m  [1m[34mSELECT pg_try_advisory_lock(4489605530800437810)[0m
  [1m[35m (0.6ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Migrating to CreateUsers (20201023085922)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (15.7ms)[0m  [1m[35mCREATE TABLE "users" ("id" bigserial primary key, "login" character varying NOT NULL, "email" character varying NOT NULL, "password" character varying NOT NULL, "current_balance" float DEFAULT 0.0 NOT NULL, "user_is_admin" boolean NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023085922"]]
  [1m[35m (0.4ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateCashMachines (20201023085944)
  [1m[35m (7.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (11.3ms)[0m  [1m[35mCREATE TABLE "cash_machines" ("id" bigserial primary key, "cash_amount" float DEFAULT 100000.0 NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023085944"]]
  [1m[35m (4.8ms)[0m  [1m[35mCOMMIT[0m
Migrating to CreateUsersHistoryRecords (20201023090011)
  [1m[35m (6.1ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (2.9ms)[0m  [1m[35mCREATE TABLE "users_history_records" ("id" bigserial primary key, "operation_type" character varying NOT NULL, "amount" float NOT NULL, "balance_after" float NOT NULL, "created_at" timestamp(6) NOT NULL, "updated_at" timestamp(6) NOT NULL)[0m
  [1m[36mprimary::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023090011"]]
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddForeignKeyUserUsersHistoryRecord (20201023095833)
  [1m[35m (6.8ms)[0m  [1m[35mBEGIN[0m
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023095833"]]
  [1m[35m (6.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddDeviseToUsers (20201023101716)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (1.1ms)[0m  [1m[35mALTER TABLE "users" DROP COLUMN "email"[0m
  [1m[35m (0.6ms)[0m  [1m[35mALTER TABLE "users" ADD "email" character varying DEFAULT '' NOT NULL[0m
  [1m[35m (1.0ms)[0m  [1m[35mALTER TABLE "users" ADD "encrypted_password" character varying DEFAULT '' NOT NULL[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "reset_password_token" character varying[0m
  [1m[35m (0.5ms)[0m  [1m[35mALTER TABLE "users" ADD "reset_password_sent_at" timestamp[0m
  [1m[35m (0.4ms)[0m  [1m[35mALTER TABLE "users" ADD "remember_created_at" timestamp[0m
  [1m[35m (8.5ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_email" ON "users"  ("email")[0m
  [1m[35m (1.3ms)[0m  [1m[35mCREATE UNIQUE INDEX  "index_users_on_reset_password_token" ON "users"  ("reset_password_token")[0m
  [1m[36mprimary::SchemaMigration Create (0.6ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023101716"]]
  [1m[35m (0.7ms)[0m  [1m[35mCOMMIT[0m
Migrating to DeleteLoginAttribute (20201023200333)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.7ms)[0m  [1m[35mALTER TABLE "users" DROP COLUMN "login"[0m
  [1m[36mprimary::SchemaMigration Create (0.4ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023200333"]]
  [1m[35m (7.2ms)[0m  [1m[35mCOMMIT[0m
Migrating to DeleteNotNeedpaswordGetAdminDefault (20201023200711)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" DROP COLUMN "password"[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users" ALTER COLUMN "user_is_admin" TYPE boolean, ALTER COLUMN "user_is_admin" SET DEFAULT FALSE[0m
  [1m[36mprimary::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201023200711"]]
  [1m[35m (6.5ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddForeignKeyUserHistoryUser (20201027162502)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[35m (0.3ms)[0m  [1m[35mALTER TABLE "users_history_records" ADD "user_id" bigint[0m
  [1m[35m (3.0ms)[0m  [1m[35mALTER TABLE "users_history_records" ADD CONSTRAINT "fk_rails_4e2c355ec6"
FOREIGN KEY ("user_id")
  REFERENCES "users" ("id")
[0m
  [1m[36mprimary::SchemaMigration Create (0.5ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201027162502"]]
  [1m[35m (5.9ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddCash (20201109115808)
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mCashMachine Create (1.6ms)[0m  [1m[32mINSERT INTO "cash_machines" ("created_at", "updated_at") VALUES ($1, $2) RETURNING "id"[0m  [["created_at", "2020-12-08 17:50:33.445591"], ["updated_at", "2020-12-08 17:50:33.445591"]]
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201109115808"]]
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
Migrating to AddAdminWithMigration (20201115153707)
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (0.8ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "trueadmin@google.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.7ms)[0m  [1m[32mINSERT INTO "users" ("user_is_admin", "created_at", "updated_at", "email", "encrypted_password") VALUES ($1, $2, $3, $4, $5) RETURNING "id"[0m  [["user_is_admin", true], ["created_at", "2020-12-08 17:50:33.740721"], ["updated_at", "2020-12-08 17:50:33.740721"], ["email", "trueadmin@google.com"], ["encrypted_password", "$2a$12$dcplMpDm5uagyJtIDnhgau9cRnqQWireEi.X4rthWvx9aeeYepkiK"]]
  [1m[36mprimary::SchemaMigration Create (0.3ms)[0m  [1m[32mINSERT INTO "schema_migrations" ("version") VALUES ($1) RETURNING "version"[0m  [["version", "20201115153707"]]
  [1m[35m (6.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[36mActiveRecord::InternalMetadata Load (0.5ms)[0m  [1m[34mSELECT "ar_internal_metadata".* FROM "ar_internal_metadata" WHERE "ar_internal_metadata"."key" = $1 LIMIT $2[0m  [["key", "environment"], ["LIMIT", 1]]
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  [1m[36mActiveRecord::InternalMetadata Create (0.4ms)[0m  [1m[32mINSERT INTO "ar_internal_metadata" ("key", "value", "created_at", "updated_at") VALUES ($1, $2, $3, $4) RETURNING "key"[0m  [["key", "environment"], ["value", "development"], ["created_at", "2020-12-08 17:50:33.762275"], ["updated_at", "2020-12-08 17:50:33.762275"]]
  [1m[35m (0.3ms)[0m  [1m[35mCOMMIT[0m
  [1m[35m (0.5ms)[0m  [1m[34mSELECT pg_advisory_unlock(4489605530800437810)[0m
  [1m[35m (0.7ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Started GET "/" for ::1 at 2020-12-08 20:50:42 +0300
  [1m[35m (0.8ms)[0m  [1m[34mSELECT "schema_migrations"."version" FROM "schema_migrations" ORDER BY "schema_migrations"."version" ASC[0m
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 1.9ms | Allocations: 340)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 88ms (Views: 78.5ms | ActiveRecord: 0.0ms | Allocations: 12289)


Started GET "/users/sign_up" for ::1 at 2020-12-08 20:50:44 +0300
Processing by Devise::RegistrationsController#new as HTML
  Rendering devise/registrations/new.html.erb within layouts/application
  Rendered devise/shared/_error_messages.html.erb (Duration: 1.1ms | Allocations: 154)
  Rendered devise/registrations/new.html.erb within layouts/application (Duration: 6.8ms | Allocations: 1494)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 37ms (Views: 16.5ms | ActiveRecord: 7.1ms | Allocations: 12831)


Started POST "/users" for ::1 at 2020-12-08 20:50:52 +0300
Processing by Devise::RegistrationsController#create as HTML
  Parameters: {"authenticity_token"=>"7T42u9skHPhlHKMBHib8NV0vE2HVfhQeeYaPxgPRWTJbcuj1cn9cO+6dFXwUAYBhKpQfa4WcViIZoZ2HAel//w==", "user"=>{"email"=>"antaresloe@gmail.com", "password"=>"[FILTERED]", "password_confirmation"=>"[FILTERED]"}, "commit"=>"Register"}
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  [1m[36mUser Exists? (1.1ms)[0m  [1m[34mSELECT 1 AS one FROM "users" WHERE "users"."email" = $1 LIMIT $2[0m  [["email", "antaresloe@gmail.com"], ["LIMIT", 1]]
  [1m[36mUser Create (0.8ms)[0m  [1m[32mINSERT INTO "users" ("created_at", "updated_at", "email", "encrypted_password") VALUES ($1, $2, $3, $4) RETURNING "id"[0m  [["created_at", "2020-12-08 17:50:52.666838"], ["updated_at", "2020-12-08 17:50:52.666838"], ["email", "antaresloe@gmail.com"], ["encrypted_password", "$2a$12$5syLeVo2GGBPnEOhbQ001.zxLTfmuYpjqUycCIvN6zIDnILrTiHoW"]]
  [1m[35m (8.6ms)[0m  [1m[35mCOMMIT[0m
Redirected to http://localhost:3000/user
Completed 302 Found in 566ms (ActiveRecord: 10.7ms | Allocations: 206835)


Started GET "/user" for ::1 at 2020-12-08 20:50:52 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (2.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.4ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (0.5ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 8.8ms | Allocations: 3444)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 57ms (Views: 22.4ms | ActiveRecord: 6.9ms | Allocations: 13811)


Started POST "/user" for ::1 at 2020-12-08 20:50:58 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"aKuMu//t0LJEAUCQK9vHqFoT1nZC9HQcxA07at7Ja9zadAeQOtyvaX+c9OCFOo7Ehp2ftGcox4pnzFBKWe7jsA==", "user"=>{"current_balance"=>"45000"}, "commit"=>"Deposit"}
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:28:in `deposit'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mUser Update (12.3ms)[0m  [1m[33mUPDATE "users" SET "current_balance" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["current_balance", 45000.0], ["updated_at", "2020-12-08 17:50:58.085215"], ["id", 2]]
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[35m (7.5ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/user.rb:16:in `deposit'
  [1m[36mCashMachine Load (0.7ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:7:in `add_cash'
  [1m[35m (0.9ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[36mCashMachine Update (0.5ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 145000.0], ["updated_at", "2020-12-08 17:50:58.124100"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[35m (6.1ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:11:in `add_cash'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
  [1m[36mUsersHistoryRecord Create (1.2ms)[0m  [1m[32mINSERT INTO "users_history_records" ("operation_type", "amount", "balance_after", "created_at", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["operation_type", "Deposit"], ["amount", 45000.0], ["balance_after", 45000.0], ["created_at", "2020-12-08 17:50:58.149933"], ["updated_at", "2020-12-08 17:50:58.149933"], ["user_id", 2]]
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
  [1m[35m (6.6ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/controllers/user_controller.rb:35:in `deposit'
Redirected to http://localhost:3000/user
Completed 302 Found in 86ms (ActiveRecord: 42.3ms | Allocations: 17481)


Started GET "/user" for ::1 at 2020-12-08 20:50:58 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (1.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.4ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (2.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 7.9ms | Allocations: 2262)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 28ms (Views: 16.6ms | ActiveRecord: 4.8ms | Allocations: 8746)


Started POST "/user" for ::1 at 2020-12-08 20:51:01 +0300
Processing by UserController#create as HTML
  Parameters: {"authenticity_token"=>"596Q8U5zBAsunk8Hard2LgPO2+cr4UWMM4HQ6OvV3wpVARvai0J70BUD+3fEVj9C30CSJQ499hqQQLvIbPJXZg==", "user"=>{"current_balance"=>"5000"}, "commit"=>"Withdraw"}
  [1m[36mUser Load (1.6ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.4ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:14:in `create'
  [1m[36mCACHE User Load (0.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:42:in `withdraw'
  [1m[36mCashMachine Load (0.6ms)[0m  [1m[34mSELECT "cash_machines".* FROM "cash_machines" WHERE "cash_machines"."id" = $1 LIMIT $2[0m  [["id", 1], ["LIMIT", 1]]
  ‚Ü≥ app/models/cash_machine.rb:16:in `cash_available?'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/cash_machine.rb:24:in `cash_available?'
  [1m[36mCashMachine Update (1.7ms)[0m  [1m[33mUPDATE "cash_machines" SET "cash_amount" = $1, "updated_at" = $2 WHERE "cash_machines"."id" = $3[0m  [["cash_amount", 140000.0], ["updated_at", "2020-12-08 17:51:01.271268"], ["id", 1]]
  ‚Ü≥ app/models/cash_machine.rb:24:in `cash_available?'
  [1m[35m (3.1ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/cash_machine.rb:24:in `cash_available?'
  [1m[35m (0.2ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/models/user.rb:27:in `withdraw'
  [1m[36mUser Update (0.4ms)[0m  [1m[33mUPDATE "users" SET "current_balance" = $1, "updated_at" = $2 WHERE "users"."id" = $3[0m  [["current_balance", 40000.0], ["updated_at", "2020-12-08 17:51:01.280339"], ["id", 2]]
  ‚Ü≥ app/models/user.rb:27:in `withdraw'
  [1m[35m (0.6ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/models/user.rb:27:in `withdraw'
  [1m[35m (0.3ms)[0m  [1m[35mBEGIN[0m
  ‚Ü≥ app/controllers/user_controller.rb:47:in `withdraw'
  [1m[36mUsersHistoryRecord Create (1.3ms)[0m  [1m[32mINSERT INTO "users_history_records" ("operation_type", "amount", "balance_after", "created_at", "updated_at", "user_id") VALUES ($1, $2, $3, $4, $5, $6) RETURNING "id"[0m  [["operation_type", "Withdraw"], ["amount", 5000.0], ["balance_after", 40000.0], ["created_at", "2020-12-08 17:51:01.285573"], ["updated_at", "2020-12-08 17:51:01.285573"], ["user_id", 2]]
  ‚Ü≥ app/controllers/user_controller.rb:47:in `withdraw'
  [1m[35m (0.5ms)[0m  [1m[35mCOMMIT[0m
  ‚Ü≥ app/controllers/user_controller.rb:47:in `withdraw'
Redirected to http://localhost:3000/user
Completed 302 Found in 36ms (ActiveRecord: 11.2ms | Allocations: 10999)


Started GET "/user" for ::1 at 2020-12-08 20:51:01 +0300
Processing by UserController#index as HTML
  [1m[36mUser Load (1.0ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  [1m[36mUser Load (0.5ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
  ‚Ü≥ app/controllers/user_controller.rb:8:in `index'
  Rendering user/index.html.erb within layouts/application
  [1m[36mUsersHistoryRecord Load (0.5ms)[0m  [1m[34mSELECT "users_history_records".* FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:56:in `!='
  [1m[35m (1.3ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  [1m[35mCACHE  (0.0ms)[0m  [1m[34mSELECT COUNT(*) FROM "users_history_records" WHERE "users_history_records"."user_id" = $1[0m  [["user_id", 2]]
  ‚Ü≥ app/views/user/index.html.erb:58
  Rendered user/index.html.erb within layouts/application (Duration: 10.9ms | Allocations: 2301)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 28ms (Views: 19.0ms | ActiveRecord: 3.4ms | Allocations: 8789)


Started DELETE "/users/sign_out" for ::1 at 2020-12-08 20:51:03 +0300
Processing by Devise::SessionsController#destroy as HTML
  Parameters: {"authenticity_token"=>"JDeH2IZBjLtv+SOj/AIRO3t634LGDX/ttHaPLouHh1OW6AzzQ3DzYFRkl9NS41hXp/SWQOPRzHsXt+QODKAPPw=="}
  [1m[36mUser Load (0.9ms)[0m  [1m[34mSELECT "users".* FROM "users" WHERE "users"."id" = $1 ORDER BY "users"."id" ASC LIMIT $2[0m  [["id", 2], ["LIMIT", 1]]
Redirected to http://localhost:3000/main
Completed 302 Found in 12ms (ActiveRecord: 2.0ms | Allocations: 2946)


Started GET "/main" for ::1 at 2020-12-08 20:51:03 +0300
Processing by MainController#index as HTML
  Rendering main/index.html.erb within layouts/application
  Rendered main/index.html.erb within layouts/application (Duration: 0.2ms | Allocations: 62)
[Webpacker] Everything's up-to-date. Nothing to do
Completed 200 OK in 12ms (Views: 10.3ms | ActiveRecord: 0.0ms | Allocations: 4502)


>>>>>>> upstream/main
